import{S as I,i as M,s as N,X as k,Y as y,a as $,d as _,b as d,f as v,I as h,M as S,N as U,aw as Z,O as V,T as J,j as A,m as T,o as R,R as K,x as g,u as w,v as j,K as ne,e as q,t as z,k as B,c as O,g as G,n as D,Z as ae,V as x,ax as H,r as L,w as Q,aq as ie,l as W,am as le,D as ee,J as te,as as fe,at as ue}from"../../chunks/vendor-dcea556b.js";import{g as Y}from"../../chunks/navigation-2ffed81e.js";import{C as ce}from"../../chunks/Content-60255230.js";import{C as de}from"../../chunks/CallToActionContainer-22f9f372.js";import{B as re}from"../../chunks/Button-409f2ee1.js";import"../../chunks/singletons-12a22614.js";import"../../chunks/survey-schema-481feb4b.js";function pe(i){let e,s,a,t,l,u,n,r,c,o,f,p,b,C;return{c(){e=k("svg"),s=k("path"),l=k("g"),u=k("path"),c=k("defs"),o=k("linearGradient"),f=k("stop"),p=k("stop"),b=k("stop"),this.h()},l(m){e=y(m,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var E=$(e);s=y(E,"path",{d:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0}),$(s).forEach(_),l=y(E,"g",{});var P=$(l);u=y(P,"path",{d:!0,fill:!0}),$(u).forEach(_),P.forEach(_),c=y(E,"defs",{});var X=$(c);o=y(X,"linearGradient",{id:!0,x1:!0,y1:!0,x2:!0,y2:!0,gradientUnits:!0});var F=$(o);f=y(F,"stop",{"stop-color":!0}),$(f).forEach(_),p=y(F,"stop",{offset:!0,"stop-color":!0}),$(p).forEach(_),b=y(F,"stop",{offset:!0,"stop-color":!0}),$(b).forEach(_),F.forEach(_),X.forEach(_),E.forEach(_),this.h()},h(){d(s,"d","M1 127.619C21.591 127.619 45.2219 104 48 86.6193C50.7781 69.2386 49 52.5 37 52.5C25 52.5 24.5 64.7377 39 67.5C53.5 70.2623 90 42.8807 21 6"),d(s,"stroke","url(#paint0_linear)"),d(s,"stroke-width","2"),d(s,"stroke-linecap","round"),d(u,"d","M16.7936 6.80449C16.2329 5.50077 15.0019 2.53349 15.5375 1.87833C16.1876 1.08304 17.9814 1.6468 20.0777 2.08646C21.8484 2.45783 24.5709 2.9662 24.3878 4.0835C24.2626 4.84797 21.9746 4.79424 20.8596 6.12262C20.0794 7.05222 19.8038 9.26208 19.0255 9.56392C18.2472 9.86577 17.3544 8.10822 16.7936 6.80449Z"),d(u,"fill","#F53A68"),d(f,"stop-color","#FF9100"),d(p,"offset","0.489583"),d(p,"stop-color","#F10366"),d(b,"offset","1"),d(b,"stop-color","#6173FF"),d(o,"id","paint0_linear"),d(o,"x1","50.7846"),d(o,"y1","-43.3675"),d(o,"x2","-35.6052"),d(o,"y2","104.653"),d(o,"gradientUnits","userSpaceOnUse"),d(e,"width","63"),d(e,"height","129"),d(e,"viewBox","0 0 63 129"),d(e,"fill","none"),d(e,"xmlns","http://www.w3.org/2000/svg")},m(m,E){v(m,e,E),h(e,s),h(e,l),h(l,u),h(e,c),h(c,o),h(o,f),h(o,p),h(o,b),C=!0},p(m,[E]){i=m},i(m){C||(S(()=>{t&&t.end(1),a=U(s,Z,{duration:1e3,delay:i[0]}),a.start()}),S(()=>{r&&r.end(1),n=U(l,V,{x:10,y:5,delay:800+i[0],opacity:0}),n.start()}),C=!0)},o(m){a&&a.invalidate(),m&&(t=J(s,Z,{duration:500,delay:i[0]})),n&&n.invalidate(),m&&(r=J(l,V,{duration:350,delay:i[0],x:20,y:10})),C=!1},d(m){m&&_(e),m&&t&&t.end(),m&&r&&r.end()}}}function _e(i,e,s){let{delay:a=0}=e;return i.$$set=t=>{"delay"in t&&s(0,a=t.delay)},[a]}class me extends I{constructor(e){super();M(this,e,_e,pe,N,{delay:0})}}function he(i){let e;return{c(){e=z("Save & Continue")},l(s){e=G(s,"Save & Continue")},m(s,a){v(s,e,a)},d(s){s&&_(e)}}}function $e(i){let e;return{c(){e=z("Skip for Now")},l(s){e=G(s,"Skip for Now")},m(s,a){v(s,e,a)},d(s){s&&_(e)}}}function oe(i){let e,s,a,t,l,u,n,r,c;return r=new me({}),{c(){e=q("div"),s=z("the following 7"),a=q("br"),t=z(" questions are optional"),u=B(),n=q("div"),A(r.$$.fragment),this.h()},l(o){e=O(o,"DIV",{class:!0,style:!0});var f=$(e);s=G(f,"the following 7"),a=O(f,"BR",{}),t=G(f," questions are optional"),f.forEach(_),u=D(o),n=O(o,"DIV",{class:!0});var p=$(n);T(r.$$.fragment,p),p.forEach(_),this.h()},h(){d(e,"class","shortcut-callout"),ae(e,"text-align","right"),d(n,"class","arrow svelte-1045c9n")},m(o,f){v(o,e,f),h(e,s),h(e,a),h(e,t),v(o,u,f),v(o,n,f),R(r,n,null),c=!0},i(o){c||(o&&S(()=>{l||(l=x(e,H,{duration:400},!0)),l.run(1)}),g(r.$$.fragment,o),c=!0)},o(o){o&&(l||(l=x(e,H,{duration:400},!1)),l.run(0)),w(r.$$.fragment,o),c=!1},d(o){o&&_(e),o&&l&&l.end(),o&&_(u),o&&_(n),j(r)}}}function ge(i){let e,s,a,t,l,u,n,r,c;s=new re({props:{size:"xl",product:!0,$$slots:{default:[he]},$$scope:{ctx:i}}}),s.$on("click",i[5]),t=new re({props:{size:"xl",product:!0,secondary:!0,$$slots:{default:[$e]},$$scope:{ctx:i}}}),t.$on("click",i[6]);let o=i[1]&&i[2]&&oe();return{c(){e=q("div"),A(s.$$.fragment),a=B(),A(t.$$.fragment),l=B(),o&&o.c(),this.h()},l(f){e=O(f,"DIV",{class:!0});var p=$(e);T(s.$$.fragment,p),a=D(p),T(t.$$.fragment,p),l=D(p),o&&o.l(p),p.forEach(_),this.h()},h(){d(e,"class","call-flow svelte-1045c9n")},m(f,p){v(f,e,p),R(s,e,null),h(e,a),R(t,e,null),h(e,l),o&&o.m(e,null),n=!0,r||(c=K(e,"introend",i[7]),r=!0)},p(f,p){const b={};p&256&&(b.$$scope={dirty:p,ctx:f}),s.$set(b);const C={};p&256&&(C.$$scope={dirty:p,ctx:f}),t.$set(C),f[1]&&f[2]?o?p&6&&g(o,1):(o=oe(),o.c(),g(o,1),o.m(e,null)):o&&(L(),w(o,1,1,()=>{o=null}),Q())},i(f){n||(g(s.$$.fragment,f),g(t.$$.fragment,f),g(o),u||S(()=>{u=U(e,V,{duration:200,y:5}),u.start()}),n=!0)},o(f){w(s.$$.fragment,f),w(t.$$.fragment,f),w(o),n=!1},d(f){f&&_(e),j(s),j(t),o&&o.d(),r=!1,c()}}}function ve(i){let e=!1,s=()=>{e=!1},a,t,l,u,n;return S(i[4]),t=new de({props:{$$slots:{default:[ge]},$$scope:{ctx:i}}}),{c(){A(t.$$.fragment)},l(r){T(t.$$.fragment,r)},m(r,c){R(t,r,c),l=!0,u||(n=K(window,"scroll",()=>{e=!0,clearTimeout(a),a=setTimeout(s,100),i[4]()}),u=!0)},p(r,[c]){c&1&&!e&&(e=!0,clearTimeout(a),scrollTo(window.pageXOffset,r[0]),a=setTimeout(s,100));const o={};c&262&&(o.$$scope={dirty:c,ctx:r}),t.$set(o)},i(r){l||(g(t.$$.fragment,r),l=!0)},o(r){w(t.$$.fragment,r),l=!1},d(r){j(t,r),u=!1,n()}}}function we(i,e,s){const a=ne();let t=0,l=!0,u=!1;function n(){s(0,t=window.pageYOffset)}const r=()=>a("save"),c=()=>a("skip"),o=()=>{s(2,u=!0)};return i.$$.update=()=>{i.$$.dirty&1&&(t>20?s(1,l=!1):s(1,l=!0))},[t,l,u,a,n,r,c,o]}class be extends I{constructor(e){super();M(this,e,we,ve,N,{})}}function se(i){let e,s,a,t,l;function u(r){i[7](r)}let n={};return i[1]!==void 0&&(n.formattedResults=i[1]),e=new ce({props:n}),fe.push(()=>ue(e,"formattedResults",u)),t=new be({}),t.$on("save",i[4](!0)),t.$on("skip",i[4](!1)),{c(){A(e.$$.fragment),a=B(),A(t.$$.fragment)},l(r){T(e.$$.fragment,r),a=D(r),T(t.$$.fragment,r)},m(r,c){R(e,r,c),v(r,a,c),R(t,r,c),l=!0},p(r,c){const o={};!s&&c&2&&(s=!0,o.formattedResults=r[1],ie(()=>s=!1)),e.$set(o)},i(r){l||(g(e.$$.fragment,r),g(t.$$.fragment,r),l=!0)},o(r){w(e.$$.fragment,r),w(t.$$.fragment,r),l=!1},d(r){j(e,r),r&&_(a),j(t,r)}}}function ke(i){var l,u;let e,s,a,t=i[0]._initialized&&!((u=(l=i[0])==null?void 0:l.user)==null?void 0:u.onboarded)&&se(i);return{c(){e=B(),t&&t.c(),s=W(),this.h()},l(n){le('[data-svelte="svelte-1gjniiu"]',document.head).forEach(_),e=D(n),t&&t.l(n),s=W(),this.h()},h(){document.title="Tell Us About Yourself | Mozilla Rally"},m(n,r){v(n,e,r),t&&t.m(n,r),v(n,s,r),a=!0},p(n,[r]){var c,o;n[0]._initialized&&!((o=(c=n[0])==null?void 0:c.user)==null?void 0:o.onboarded)?t?(t.p(n,r),r&1&&g(t,1)):(t=se(n),t.c(),g(t,1),t.m(s.parentNode,s)):t&&(L(),w(t,1,1,()=>{t=null}),Q())},i(n){a||(g(t),a=!0)},o(n){w(t),a=!1},d(n){n&&_(e),t&&t.d(n),n&&_(s)}}}function ye(i,e,s){let a,t;var l;const u=ee("rally:store");te(i,u,f=>s(0,a=f));const n=ee("rally:isAuthenticated");te(i,n,f=>s(6,t=f));let r;function c(f=!1){return async()=>{f&&await u.updateDemographicSurvey(r),await await u.updateOnboardedStatus(!0),Y("/studies")}}function o(f){r=f,s(1,r)}return i.$$.update=()=>{i.$$.dirty&97&&(t===!1?Y("/signup"):t===!0&&(s(5,l=a==null?void 0:a.user)===null||l===void 0?void 0:l.onboarded)&&Y("/studies"))},[a,r,u,n,c,l,t,o]}class Be extends I{constructor(e){super();M(this,e,ye,ke,N,{})}}export{Be as default};
