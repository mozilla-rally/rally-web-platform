var app=function(){"use strict";function noop(){}const identity=x=>x;function assign(tar,src){for(const k in src)tar[k]=src[k];return tar}function run(fn){return fn()}function blank_object(){return Object.create(null)}function run_all(fns){fns.forEach(run)}function is_function(thing){return"function"==typeof thing}function safe_not_equal(a,b){return a!=a?b==b:a!==b||a&&"object"==typeof a||"function"==typeof a}function subscribe(store,...callbacks){if(null==store)return noop;const unsub=store.subscribe(...callbacks);return unsub.unsubscribe?()=>unsub.unsubscribe():unsub}function component_subscribe(component,store,callback){component.$$.on_destroy.push(subscribe(store,callback))}function create_slot(definition,ctx,$$scope,fn){if(definition){const slot_ctx=get_slot_context(definition,ctx,$$scope,fn);return definition[0](slot_ctx)}}function get_slot_context(definition,ctx,$$scope,fn){return definition[1]&&fn?assign($$scope.ctx.slice(),definition[1](fn(ctx))):$$scope.ctx}function update_slot(slot,slot_definition,ctx,$$scope,dirty,get_slot_changes_fn,get_slot_context_fn){const slot_changes=function(definition,$$scope,dirty,fn){if(definition[2]&&fn){const lets=definition[2](fn(dirty));if(void 0===$$scope.dirty)return lets;if("object"==typeof lets){const merged=[],len=Math.max($$scope.dirty.length,lets.length);for(let i=0;i<len;i+=1)merged[i]=$$scope.dirty[i]|lets[i];return merged}return $$scope.dirty|lets}return $$scope.dirty}(slot_definition,$$scope,dirty,get_slot_changes_fn);if(slot_changes){const slot_context=get_slot_context(slot_definition,ctx,$$scope,get_slot_context_fn);slot.p(slot_context,slot_changes)}}function action_destroyer(action_result){return action_result&&is_function(action_result.destroy)?action_result.destroy:noop}const is_client="undefined"!=typeof window;let now=is_client?()=>window.performance.now():()=>Date.now(),raf=is_client?cb=>requestAnimationFrame(cb):noop;const tasks=new Set;function run_tasks(now){tasks.forEach((task=>{task.c(now)||(tasks.delete(task),task.f())})),0!==tasks.size&&raf(run_tasks)}function loop(callback){let task;return 0===tasks.size&&raf(run_tasks),{promise:new Promise((fulfill=>{tasks.add(task={c:callback,f:fulfill})})),abort(){tasks.delete(task)}}}function append(target,node){target.appendChild(node)}function insert(target,node,anchor){target.insertBefore(node,anchor||null)}function detach(node){node.parentNode.removeChild(node)}function destroy_each(iterations,detaching){for(let i=0;i<iterations.length;i+=1)iterations[i]&&iterations[i].d(detaching)}function element(name){return document.createElement(name)}function svg_element(name){return document.createElementNS("http://www.w3.org/2000/svg",name)}function text(data){return document.createTextNode(data)}function space(){return text(" ")}function empty(){return text("")}function listen(node,event,handler,options){return node.addEventListener(event,handler,options),()=>node.removeEventListener(event,handler,options)}function attr(node,attribute,value){null==value?node.removeAttribute(attribute):node.getAttribute(attribute)!==value&&node.setAttribute(attribute,value)}function set_data(text,data){data=""+data,text.wholeText!==data&&(text.data=data)}function set_input_value(input,value){input.value=null==value?"":value}function set_style(node,key,value,important){node.style.setProperty(key,value,important?"important":"")}function toggle_class(element,name,toggle){element.classList[toggle?"add":"remove"](name)}function custom_event(type,detail){const e=document.createEvent("CustomEvent");return e.initCustomEvent(type,!1,!1,detail),e}const active_docs=new Set;let current_component,active=0;function create_rule(node,a,b,duration,delay,ease,fn,uid=0){const step=16.666/duration;let keyframes="{\n";for(let p=0;p<=1;p+=step){const t=a+(b-a)*ease(p);keyframes+=100*p+`%{${fn(t,1-t)}}\n`}const rule=keyframes+`100% {${fn(b,1-b)}}\n}`,name=`__svelte_${function(str){let hash=5381,i=str.length;for(;i--;)hash=(hash<<5)-hash^str.charCodeAt(i);return hash>>>0}(rule)}_${uid}`,doc=node.ownerDocument;active_docs.add(doc);const stylesheet=doc.__svelte_stylesheet||(doc.__svelte_stylesheet=doc.head.appendChild(element("style")).sheet),current_rules=doc.__svelte_rules||(doc.__svelte_rules={});current_rules[name]||(current_rules[name]=!0,stylesheet.insertRule(`@keyframes ${name} ${rule}`,stylesheet.cssRules.length));const animation=node.style.animation||"";return node.style.animation=`${animation?`${animation}, `:""}${name} ${duration}ms linear ${delay}ms 1 both`,active+=1,name}function delete_rule(node,name){const previous=(node.style.animation||"").split(", "),next=previous.filter(name?anim=>anim.indexOf(name)<0:anim=>-1===anim.indexOf("__svelte")),deleted=previous.length-next.length;deleted&&(node.style.animation=next.join(", "),active-=deleted,active||raf((()=>{active||(active_docs.forEach((doc=>{const stylesheet=doc.__svelte_stylesheet;let i=stylesheet.cssRules.length;for(;i--;)stylesheet.deleteRule(i);doc.__svelte_rules={}})),active_docs.clear())})))}function set_current_component(component){current_component=component}function get_current_component(){if(!current_component)throw new Error("Function called outside component initialization");return current_component}function onMount(fn){get_current_component().$$.on_mount.push(fn)}function onDestroy(fn){get_current_component().$$.on_destroy.push(fn)}function createEventDispatcher(){const component=get_current_component();return(type,detail)=>{const callbacks=component.$$.callbacks[type];if(callbacks){const event=custom_event(type,detail);callbacks.slice().forEach((fn=>{fn.call(component,event)}))}}}function setContext(key,context){get_current_component().$$.context.set(key,context)}function getContext(key){return get_current_component().$$.context.get(key)}function bubble(component,event){const callbacks=component.$$.callbacks[event.type];callbacks&&callbacks.slice().forEach((fn=>fn(event)))}const dirty_components=[],binding_callbacks=[],render_callbacks=[],flush_callbacks=[],resolved_promise=Promise.resolve();let update_scheduled=!1;function add_render_callback(fn){render_callbacks.push(fn)}function add_flush_callback(fn){flush_callbacks.push(fn)}let flushing=!1;const seen_callbacks=new Set;function flush(){if(!flushing){flushing=!0;do{for(let i=0;i<dirty_components.length;i+=1){const component=dirty_components[i];set_current_component(component),update(component.$$)}for(set_current_component(null),dirty_components.length=0;binding_callbacks.length;)binding_callbacks.pop()();for(let i=0;i<render_callbacks.length;i+=1){const callback=render_callbacks[i];seen_callbacks.has(callback)||(seen_callbacks.add(callback),callback())}render_callbacks.length=0}while(dirty_components.length);for(;flush_callbacks.length;)flush_callbacks.pop()();update_scheduled=!1,flushing=!1,seen_callbacks.clear()}}function update($$){if(null!==$$.fragment){$$.update(),run_all($$.before_update);const dirty=$$.dirty;$$.dirty=[-1],$$.fragment&&$$.fragment.p($$.ctx,dirty),$$.after_update.forEach(add_render_callback)}}let promise;function wait(){return promise||(promise=Promise.resolve(),promise.then((()=>{promise=null}))),promise}function dispatch(node,direction,kind){node.dispatchEvent(custom_event(`${direction?"intro":"outro"}${kind}`))}const outroing=new Set;let outros;function group_outros(){outros={r:0,c:[],p:outros}}function check_outros(){outros.r||run_all(outros.c),outros=outros.p}function transition_in(block,local){block&&block.i&&(outroing.delete(block),block.i(local))}function transition_out(block,local,detach,callback){if(block&&block.o){if(outroing.has(block))return;outroing.add(block),outros.c.push((()=>{outroing.delete(block),callback&&(detach&&block.d(1),callback())})),block.o(local)}}const null_transition={duration:0};function create_in_transition(node,fn,params){let animation_name,task,config=fn(node,params),running=!1,uid=0;function cleanup(){animation_name&&delete_rule(node,animation_name)}function go(){const{delay:delay=0,duration:duration=300,easing:easing=identity,tick:tick=noop,css:css}=config||null_transition;css&&(animation_name=create_rule(node,0,1,duration,delay,easing,css,uid++)),tick(0,1);const start_time=now()+delay,end_time=start_time+duration;task&&task.abort(),running=!0,add_render_callback((()=>dispatch(node,!0,"start"))),task=loop((now=>{if(running){if(now>=end_time)return tick(1,0),dispatch(node,!0,"end"),cleanup(),running=!1;if(now>=start_time){const t=easing((now-start_time)/duration);tick(t,1-t)}}return running}))}let started=!1;return{start(){started||(delete_rule(node),is_function(config)?(config=config(),wait().then(go)):go())},invalidate(){started=!1},end(){running&&(cleanup(),running=!1)}}}function create_out_transition(node,fn,params){let animation_name,config=fn(node,params),running=!0;const group=outros;function go(){const{delay:delay=0,duration:duration=300,easing:easing=identity,tick:tick=noop,css:css}=config||null_transition;css&&(animation_name=create_rule(node,1,0,duration,delay,easing,css));const start_time=now()+delay,end_time=start_time+duration;add_render_callback((()=>dispatch(node,!1,"start"))),loop((now=>{if(running){if(now>=end_time)return tick(0,1),dispatch(node,!1,"end"),--group.r||run_all(group.c),!1;if(now>=start_time){const t=easing((now-start_time)/duration);tick(1-t,t)}}return running}))}return group.r+=1,is_function(config)?wait().then((()=>{config=config(),go()})):go(),{end(reset){reset&&config.tick&&config.tick(1,0),running&&(animation_name&&delete_rule(node,animation_name),running=!1)}}}function create_bidirectional_transition(node,fn,params,intro){let config=fn(node,params),t=intro?0:1,running_program=null,pending_program=null,animation_name=null;function clear_animation(){animation_name&&delete_rule(node,animation_name)}function init(program,duration){const d=program.b-t;return duration*=Math.abs(d),{a:t,b:program.b,d:d,duration:duration,start:program.start,end:program.start+duration,group:program.group}}function go(b){const{delay:delay=0,duration:duration=300,easing:easing=identity,tick:tick=noop,css:css}=config||null_transition,program={start:now()+delay,b:b};b||(program.group=outros,outros.r+=1),running_program||pending_program?pending_program=program:(css&&(clear_animation(),animation_name=create_rule(node,t,b,duration,delay,easing,css)),b&&tick(0,1),running_program=init(program,duration),add_render_callback((()=>dispatch(node,b,"start"))),loop((now=>{if(pending_program&&now>pending_program.start&&(running_program=init(pending_program,duration),pending_program=null,dispatch(node,running_program.b,"start"),css&&(clear_animation(),animation_name=create_rule(node,t,running_program.b,running_program.duration,0,easing,config.css))),running_program)if(now>=running_program.end)tick(t=running_program.b,1-t),dispatch(node,running_program.b,"end"),pending_program||(running_program.b?clear_animation():--running_program.group.r||run_all(running_program.group.c)),running_program=null;else if(now>=running_program.start){const p=now-running_program.start;t=running_program.a+running_program.d*easing(p/running_program.duration),tick(t,1-t)}return!(!running_program&&!pending_program)})))}return{run(b){is_function(config)?wait().then((()=>{config=config(),go(b)})):go(b)},end(){clear_animation(),running_program=pending_program=null}}}function outro_and_destroy_block(block,lookup){transition_out(block,1,1,(()=>{lookup.delete(block.key)}))}function bind(component,name,callback){const index=component.$$.props[name];void 0!==index&&(component.$$.bound[index]=callback,callback(component.$$.ctx[index]))}function create_component(block){block&&block.c()}function mount_component(component,target,anchor,customElement){const{fragment:fragment,on_mount:on_mount,on_destroy:on_destroy,after_update:after_update}=component.$$;fragment&&fragment.m(target,anchor),customElement||add_render_callback((()=>{const new_on_destroy=on_mount.map(run).filter(is_function);on_destroy?on_destroy.push(...new_on_destroy):run_all(new_on_destroy),component.$$.on_mount=[]})),after_update.forEach(add_render_callback)}function destroy_component(component,detaching){const $$=component.$$;null!==$$.fragment&&(run_all($$.on_destroy),$$.fragment&&$$.fragment.d(detaching),$$.on_destroy=$$.fragment=null,$$.ctx=[])}function make_dirty(component,i){-1===component.$$.dirty[0]&&(dirty_components.push(component),update_scheduled||(update_scheduled=!0,resolved_promise.then(flush)),component.$$.dirty.fill(0)),component.$$.dirty[i/31|0]|=1<<i%31}function init(component,options,instance,create_fragment,not_equal,props,dirty=[-1]){const parent_component=current_component;set_current_component(component);const $$=component.$$={fragment:null,ctx:null,props:props,update:noop,not_equal:not_equal,bound:blank_object(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(parent_component?parent_component.$$.context:options.context||[]),callbacks:blank_object(),dirty:dirty,skip_bound:!1};let ready=!1;if($$.ctx=instance?instance(component,options.props||{},((i,ret,...rest)=>{const value=rest.length?rest[0]:ret;return $$.ctx&&not_equal($$.ctx[i],$$.ctx[i]=value)&&(!$$.skip_bound&&$$.bound[i]&&$$.bound[i](value),ready&&make_dirty(component,i)),ret})):[],$$.update(),ready=!0,run_all($$.before_update),$$.fragment=!!create_fragment&&create_fragment($$.ctx),options.target){if(options.hydrate){const nodes=function(element){return Array.from(element.childNodes)}(options.target);$$.fragment&&$$.fragment.l(nodes),nodes.forEach(detach)}else $$.fragment&&$$.fragment.c();options.intro&&transition_in(component.$$.fragment),mount_component(component,options.target,options.anchor,options.customElement),flush()}set_current_component(parent_component)}class SvelteComponent{$destroy(){destroy_component(this,1),this.$destroy=noop}$on(type,callback){const callbacks=this.$$.callbacks[type]||(this.$$.callbacks[type]=[]);return callbacks.push(callback),()=>{const index=callbacks.indexOf(callback);-1!==index&&callbacks.splice(index,1)}}$set($$props){var obj;this.$$set&&(obj=$$props,0!==Object.keys(obj).length)&&(this.$$.skip_bound=!0,this.$$set($$props),this.$$.skip_bound=!1)}}const subscriber_queue=[];function writable(value,start=noop){let stop;const subscribers=[];function set(new_value){if(safe_not_equal(value,new_value)&&(value=new_value,stop)){const run_queue=!subscriber_queue.length;for(let i=0;i<subscribers.length;i+=1){const s=subscribers[i];s[1](),subscriber_queue.push(s,value)}if(run_queue){for(let i=0;i<subscriber_queue.length;i+=2)subscriber_queue[i][0](subscriber_queue[i+1]);subscriber_queue.length=0}}}return{set:set,update:function(fn){set(fn(value))},subscribe:function(run,invalidate=noop){const subscriber=[run,invalidate];return subscribers.push(subscriber),1===subscribers.length&&(stop=start(set)||noop),run(value),()=>{const index=subscribers.indexOf(subscriber);-1!==index&&subscribers.splice(index,1),0===subscribers.length&&(stop(),stop=null)}}}}function derived(stores,fn,initial_value){const single=!Array.isArray(stores),stores_array=single?[stores]:stores,auto=fn.length<2;return{subscribe:writable(initial_value,(set=>{let inited=!1;const values=[];let pending=0,cleanup=noop;const sync=()=>{if(pending)return;cleanup();const result=fn(single?values[0]:values,set);auto?set(result):cleanup=is_function(result)?result:noop},unsubscribers=stores_array.map(((store,i)=>subscribe(store,(value=>{values[i]=value,pending&=~(1<<i),inited&&sync()}),(()=>{pending|=1<<i}))));return inited=!0,sync(),function(){run_all(unsubscribers),cleanup()}})).subscribe}}var module,immer_cjs_production_min=(function(module,exports){function t(t){for(var n=arguments.length,r=Array(n>1?n-1:0),e=1;e<n;e++)r[e-1]=arguments[e];throw Error("[Immer] minified error nr: "+t+(r.length?" "+r.map((function(t){return"'"+t+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function n(t){return!!t&&!!t[H]}function r(t){return!!t&&(function(t){if(!t||"object"!=typeof t)return!1;var n=Object.getPrototypeOf(t);if(null===n)return!0;var r=Object.hasOwnProperty.call(n,"constructor")&&n.constructor;return r===Object||"function"==typeof r&&Function.toString.call(r)===Q}(t)||Array.isArray(t)||!!t[G]||!!t.constructor[G]||c(t)||v(t))}function e(t,n,r){void 0===r&&(r=!1),0===i(t)?(r?Object.keys:T)(t).forEach((function(e){r&&"symbol"==typeof e||n(e,t[e],t)})):t.forEach((function(r,e){return n(e,r,t)}))}function i(t){var n=t[H];return n?n.t>3?n.t-4:n.t:Array.isArray(t)?1:c(t)?2:v(t)?3:0}function u(t,n){return 2===i(t)?t.has(n):Object.prototype.hasOwnProperty.call(t,n)}function o(t,n){return 2===i(t)?t.get(n):t[n]}function f(t,n,r){var e=i(t);2===e?t.set(n,r):3===e?(t.delete(n),t.add(r)):t[n]=r}function a(t,n){return t===n?0!==t||1/t==1/n:t!=t&&n!=n}function c(t){return W&&t instanceof Map}function v(t){return X&&t instanceof Set}function s(t){return t.i||t.u}function p(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var n=U(t);delete n[H];for(var r=T(n),e=0;e<r.length;e++){var i=r[e],u=n[i];!1===u.writable&&(u.writable=!0,u.configurable=!0),(u.get||u.set)&&(n[i]={configurable:!0,writable:!0,enumerable:u.enumerable,value:t[i]})}return Object.create(Object.getPrototypeOf(t),n)}function l(t,u){return void 0===u&&(u=!1),d(t)||n(t)||!r(t)||(i(t)>1&&(t.set=t.add=t.clear=t.delete=h),Object.freeze(t),u&&e(t,(function(t,n){return l(n,!0)}),!0)),t}function h(){t(2)}function d(t){return null==t||"object"!=typeof t||Object.isFrozen(t)}function y(n){var r=V[n];return r||t(18,n),r}function _(t,n){V[t]||(V[t]=n)}function b(){return J}function m(t,n){n&&(y("Patches"),t.o=[],t.v=[],t.s=n)}function j(t){O(t),t.p.forEach(w),t.p=null}function O(t){t===J&&(J=t.l)}function x(t){return J={p:[],l:J,h:t,_:!0,m:0}}function w(t){var n=t[H];0===n.t||1===n.t?n.j():n.O=!0}function S(n,e){e.m=e.p.length;var i=e.p[0],u=void 0!==n&&n!==i;return e.h.S||y("ES5").M(e,n,u),u?(i[H].P&&(j(e),t(4)),r(n)&&(n=M(e,n),e.l||g(e,n)),e.o&&y("Patches").g(i[H],n,e.o,e.v)):n=M(e,i,[]),j(e),e.o&&e.s(e.o,e.v),n!==B?n:void 0}function M(t,n,r){if(d(n))return n;var i=n[H];if(!i)return e(n,(function(e,u){return P(t,i,n,e,u,r)}),!0),n;if(i.A!==t)return n;if(!i.P)return g(t,i.u,!0),i.u;if(!i.R){i.R=!0,i.A.m--;var u=4===i.t||5===i.t?i.i=p(i.k):i.i;e(3===i.t?new Set(u):u,(function(n,e){return P(t,i,u,n,e,r)})),g(t,u,!1),r&&t.o&&y("Patches").F(i,r,t.o,t.v)}return i.i}function P(t,e,i,o,a,c){if(n(a)){var v=M(t,a,c&&e&&3!==e.t&&!u(e.D,o)?c.concat(o):void 0);if(f(i,o,v),!n(v))return;t._=!1}if(r(a)&&!d(a)){if(!t.h.K&&t.m<1)return;M(t,a),e&&e.A.l||g(t,a)}}function g(t,n,r){void 0===r&&(r=!1),t.h.K&&t._&&l(n,r)}function A(t,n){var r=t[H];return(r?s(r):t)[n]}function z(t,n){if(n in t)for(var r=Object.getPrototypeOf(t);r;){var e=Object.getOwnPropertyDescriptor(r,n);if(e)return e;r=Object.getPrototypeOf(r)}}function E(t){t.P||(t.P=!0,t.l&&E(t.l))}function R(t){t.i||(t.i=p(t.u))}function k(t,n,r){var e=c(n)?y("MapSet").$(n,r):v(n)?y("MapSet").C(n,r):t.S?function(t,n){var r=Array.isArray(t),e={t:r?1:0,A:n?n.A:b(),P:!1,R:!1,D:{},l:n,u:t,k:null,i:null,j:null,I:!1},i=e,u=Y;r&&(i=[e],u=Z);var o=Proxy.revocable(i,u),f=o.revoke,a=o.proxy;return e.k=a,e.j=f,a}(n,r):y("ES5").J(n,r);return(r?r.A:b()).p.push(e),e}function F(u){return n(u)||t(22,u),function t(n){if(!r(n))return n;var u,a=n[H],c=i(n);if(a){if(!a.P&&(a.t<4||!y("ES5").N(a)))return a.u;a.R=!0,u=D(n,c),a.R=!1}else u=D(n,c);return e(u,(function(n,r){a&&o(a.u,n)===r||f(u,n,t(r))})),3===c?new Set(u):u}(u)}function D(t,n){switch(n){case 2:return new Map(t);case 3:return Array.from(t)}return p(t)}function K(){function t(t,n){var r=f[t];return r?r.enumerable=n:f[t]=r={configurable:!0,enumerable:n,get:function(){return Y.get(this[H],t)},set:function(n){Y.set(this[H],t,n)}},r}function r(t){for(var n=t.length-1;n>=0;n--){var r=t[n][H];if(!r.P)switch(r.t){case 5:o(r)&&E(r);break;case 4:i(r)&&E(r)}}}function i(t){for(var n=t.u,r=t.k,e=T(r),i=e.length-1;i>=0;i--){var o=e[i];if(o!==H){var f=n[o];if(void 0===f&&!u(n,o))return!0;var c=r[o],v=c&&c[H];if(v?v.u!==f:!a(c,f))return!0}}var s=!!n[H];return e.length!==T(n).length+(s?0:1)}function o(t){var n=t.k;if(n.length!==t.u.length)return!0;var r=Object.getOwnPropertyDescriptor(n,n.length-1);return!(!r||r.get)}var f={};_("ES5",{J:function(n,r){var e=Array.isArray(n),i=function(n,r){if(n){for(var e=Array(r.length),i=0;i<r.length;i++)Object.defineProperty(e,""+i,t(i,!0));return e}var u=U(r);delete u[H];for(var o=T(u),f=0;f<o.length;f++){var a=o[f];u[a]=t(a,n||!!u[a].enumerable)}return Object.create(Object.getPrototypeOf(r),u)}(e,n),u={t:e?5:4,A:r?r.A:b(),P:!1,R:!1,D:{},l:r,u:n,k:i,i:null,O:!1,I:!1};return Object.defineProperty(i,H,{value:u,writable:!0}),i},M:function(t,i,f){f?n(i)&&i[H].A===t&&r(t.p):(t.o&&function t(n){if(n&&"object"==typeof n){var r=n[H];if(r){var i=r.u,f=r.k,a=r.D,c=r.t;if(4===c)e(f,(function(n){n!==H&&(void 0!==i[n]||u(i,n)?a[n]||t(f[n]):(a[n]=!0,E(r)))})),e(i,(function(t){void 0!==f[t]||u(f,t)||(a[t]=!1,E(r))}));else if(5===c){if(o(r)&&(E(r),a.length=!0),f.length<i.length)for(var v=f.length;v<i.length;v++)a[v]=!1;else for(var s=i.length;s<f.length;s++)a[s]=!0;for(var p=Math.min(f.length,i.length),l=0;l<p;l++)void 0===a[l]&&t(f[l])}}}}(t.p[0]),r(t.p))},N:function(t){return 4===t.t?i(t):o(t)}})}function $(){function f(t){if(!r(t))return t;if(Array.isArray(t))return t.map(f);if(c(t))return new Map(Array.from(t.entries()).map((function(t){return[t[0],f(t[1])]})));if(v(t))return new Set(Array.from(t).map(f));var n=Object.create(Object.getPrototypeOf(t));for(var e in t)n[e]=f(t[e]);return u(t,G)&&(n[G]=t[G]),n}function a(t){return n(t)?f(t):t}var s="add";_("Patches",{W:function(n,r){return r.forEach((function(r){for(var e=r.path,u=r.op,a=n,c=0;c<e.length-1;c++){var v=i(a),p=e[c];0!==v&&1!==v||"__proto__"!==p&&"constructor"!==p||t(24),"function"==typeof a&&"prototype"===p&&t(24),"object"!=typeof(a=o(a,p))&&t(15,e.join("/"))}var l=i(a),h=f(r.value),d=e[e.length-1];switch(u){case"replace":switch(l){case 2:return a.set(d,h);case 3:t(16);default:return a[d]=h}case s:switch(l){case 1:return a.splice(d,0,h);case 2:return a.set(d,h);case 3:return a.add(h);default:return a[d]=h}case"remove":switch(l){case 1:return a.splice(d,1);case 2:return a.delete(d);case 3:return a.delete(r.value);default:return delete a[d]}default:t(17,u)}})),n},F:function(t,n,r,i){switch(t.t){case 0:case 4:case 2:return function(t,n,r,i){var f=t.u,c=t.i;e(t.D,(function(t,e){var v=o(f,t),p=o(c,t),l=e?u(f,t)?"replace":s:"remove";if(v!==p||"replace"!==l){var h=n.concat(t);r.push("remove"===l?{op:l,path:h}:{op:l,path:h,value:p}),i.push(l===s?{op:"remove",path:h}:"remove"===l?{op:s,path:h,value:a(v)}:{op:"replace",path:h,value:a(v)})}}))}(t,n,r,i);case 5:case 1:return function(t,n,r,e){var i=t.u,u=t.D,o=t.i;if(o.length<i.length){var f=[o,i];i=f[0],o=f[1];var c=[e,r];r=c[0],e=c[1]}for(var v=0;v<i.length;v++)if(u[v]&&o[v]!==i[v]){var p=n.concat([v]);r.push({op:"replace",path:p,value:a(o[v])}),e.push({op:"replace",path:p,value:a(i[v])})}for(var l=i.length;l<o.length;l++){var h=n.concat([l]);r.push({op:s,path:h,value:a(o[l])})}i.length<o.length&&e.push({op:"replace",path:n.concat(["length"]),value:i.length})}(t,n,r,i);case 3:return function(t,n,r,e){var i=t.u,u=t.i,o=0;i.forEach((function(t){if(!u.has(t)){var i=n.concat([o]);r.push({op:"remove",path:i,value:t}),e.unshift({op:s,path:i,value:t})}o++})),o=0,u.forEach((function(t){if(!i.has(t)){var u=n.concat([o]);r.push({op:s,path:u,value:t}),e.unshift({op:"remove",path:u,value:t})}o++}))}(t,n,r,i)}},g:function(t,n,r,e){r.push({op:"replace",path:[],value:n}),e.push({op:"replace",path:[],value:t.u})}})}function C(){function n(t,n){function r(){this.constructor=t}f(t,n),t.prototype=(r.prototype=n.prototype,new r)}function i(t){t.i||(t.D=new Map,t.i=new Map(t.u))}function u(t){t.i||(t.i=new Set,t.u.forEach((function(n){if(r(n)){var e=k(t.A.h,n,t);t.p.set(n,e),t.i.add(e)}else t.i.add(n)})))}function o(n){n.O&&t(3,JSON.stringify(s(n)))}var f=function(t,n){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])})(t,n)},a=function(){function t(t,n){return this[H]={t:2,l:n,A:n?n.A:b(),P:!1,R:!1,i:void 0,D:void 0,u:t,k:this,I:!1,O:!1},this}n(t,Map);var u=t.prototype;return Object.defineProperty(u,"size",{get:function(){return s(this[H]).size}}),u.has=function(t){return s(this[H]).has(t)},u.set=function(t,n){var r=this[H];return o(r),s(r).has(t)&&s(r).get(t)===n||(i(r),E(r),r.D.set(t,!0),r.i.set(t,n),r.D.set(t,!0)),this},u.delete=function(t){if(!this.has(t))return!1;var n=this[H];return o(n),i(n),E(n),n.D.set(t,!1),n.i.delete(t),!0},u.clear=function(){var t=this[H];o(t),s(t).size&&(i(t),E(t),t.D=new Map,e(t.u,(function(n){t.D.set(n,!1)})),t.i.clear())},u.forEach=function(t,n){var r=this;s(this[H]).forEach((function(e,i){t.call(n,r.get(i),i,r)}))},u.get=function(t){var n=this[H];o(n);var e=s(n).get(t);if(n.R||!r(e))return e;if(e!==n.u.get(t))return e;var u=k(n.A.h,e,n);return i(n),n.i.set(t,u),u},u.keys=function(){return s(this[H]).keys()},u.values=function(){var t,n=this,r=this.keys();return(t={})[L]=function(){return n.values()},t.next=function(){var t=r.next();return t.done?t:{done:!1,value:n.get(t.value)}},t},u.entries=function(){var t,n=this,r=this.keys();return(t={})[L]=function(){return n.entries()},t.next=function(){var t=r.next();if(t.done)return t;var e=n.get(t.value);return{done:!1,value:[t.value,e]}},t},u[L]=function(){return this.entries()},t}(),c=function(){function t(t,n){return this[H]={t:3,l:n,A:n?n.A:b(),P:!1,R:!1,i:void 0,u:t,k:this,p:new Map,O:!1,I:!1},this}n(t,Set);var r=t.prototype;return Object.defineProperty(r,"size",{get:function(){return s(this[H]).size}}),r.has=function(t){var n=this[H];return o(n),n.i?!!n.i.has(t)||!(!n.p.has(t)||!n.i.has(n.p.get(t))):n.u.has(t)},r.add=function(t){var n=this[H];return o(n),this.has(t)||(u(n),E(n),n.i.add(t)),this},r.delete=function(t){if(!this.has(t))return!1;var n=this[H];return o(n),u(n),E(n),n.i.delete(t)||!!n.p.has(t)&&n.i.delete(n.p.get(t))},r.clear=function(){var t=this[H];o(t),s(t).size&&(u(t),E(t),t.i.clear())},r.values=function(){var t=this[H];return o(t),u(t),t.i.values()},r.entries=function(){var t=this[H];return o(t),u(t),t.i.entries()},r.keys=function(){return this.values()},r[L]=function(){return this.values()},r.forEach=function(t,n){for(var r=this.values(),e=r.next();!e.done;)t.call(n,e.value,e.value,this),e=r.next()},t}();_("MapSet",{$:function(t,n){return new a(t,n)},C:function(t,n){return new c(t,n)}})}var I;Object.defineProperty(exports,"__esModule",{value:!0});var J,N="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),W="undefined"!=typeof Map,X="undefined"!=typeof Set,q="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,B=N?Symbol.for("immer-nothing"):((I={})["immer-nothing"]=!0,I),G=N?Symbol.for("immer-draftable"):"__$immer_draftable",H=N?Symbol.for("immer-state"):"__$immer_state",L="undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator",Q=""+Object.prototype.constructor,T="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames,U=Object.getOwnPropertyDescriptors||function(t){var n={};return T(t).forEach((function(r){n[r]=Object.getOwnPropertyDescriptor(t,r)})),n},V={},Y={get:function(t,n){if(n===H)return t;var e=s(t);if(!u(e,n))return function(t,n,r){var e,i=z(n,r);return i?"value"in i?i.value:null===(e=i.get)||void 0===e?void 0:e.call(t.k):void 0}(t,e,n);var i=e[n];return t.R||!r(i)?i:i===A(t.u,n)?(R(t),t.i[n]=k(t.A.h,i,t)):i},has:function(t,n){return n in s(t)},ownKeys:function(t){return Reflect.ownKeys(s(t))},set:function(t,n,r){var e=z(s(t),n);if(null==e?void 0:e.set)return e.set.call(t.k,r),!0;if(!t.P){var i=A(s(t),n),o=null==i?void 0:i[H];if(o&&o.u===r)return t.i[n]=r,t.D[n]=!1,!0;if(a(r,i)&&(void 0!==r||u(t.u,n)))return!0;R(t),E(t)}return t.i[n]===r&&"number"!=typeof r||(t.i[n]=r,t.D[n]=!0,!0)},deleteProperty:function(t,n){return void 0!==A(t.u,n)||n in t.u?(t.D[n]=!1,R(t),E(t)):delete t.D[n],t.i&&delete t.i[n],!0},getOwnPropertyDescriptor:function(t,n){var r=s(t),e=Reflect.getOwnPropertyDescriptor(r,n);return e?{writable:!0,configurable:1!==t.t||"length"!==n,enumerable:e.enumerable,value:r[n]}:e},defineProperty:function(){t(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.u)},setPrototypeOf:function(){t(12)}},Z={};e(Y,(function(t,n){Z[t]=function(){return arguments[0]=arguments[0][0],n.apply(this,arguments)}})),Z.deleteProperty=function(t,n){return Y.deleteProperty.call(this,t[0],n)},Z.set=function(t,n,r){return Y.set.call(this,t[0],n,r,t[0])};var tt=function(){function e(n){var e=this;this.S=q,this.K=!0,this.produce=function(n,i,u){if("function"==typeof n&&"function"!=typeof i){var o=i;i=n;var f=e;return function(t){var n=this;void 0===t&&(t=o);for(var r=arguments.length,e=Array(r>1?r-1:0),u=1;u<r;u++)e[u-1]=arguments[u];return f.produce(t,(function(t){var r;return(r=i).call.apply(r,[n,t].concat(e))}))}}var a;if("function"!=typeof i&&t(6),void 0!==u&&"function"!=typeof u&&t(7),r(n)){var c=x(e),v=k(e,n,void 0),s=!0;try{a=i(v),s=!1}finally{s?j(c):O(c)}return"undefined"!=typeof Promise&&a instanceof Promise?a.then((function(t){return m(c,u),S(t,c)}),(function(t){throw j(c),t})):(m(c,u),S(a,c))}if(!n||"object"!=typeof n){if((a=i(n))===B)return;return void 0===a&&(a=n),e.K&&l(a,!0),a}t(21,n)},this.produceWithPatches=function(t,n){return"function"==typeof t?function(n){for(var r=arguments.length,i=Array(r>1?r-1:0),u=1;u<r;u++)i[u-1]=arguments[u];return e.produceWithPatches(n,(function(n){return t.apply(void 0,[n].concat(i))}))}:[e.produce(t,n,(function(t,n){r=t,i=n})),r,i];var r,i},"boolean"==typeof(null==n?void 0:n.useProxies)&&this.setUseProxies(n.useProxies),"boolean"==typeof(null==n?void 0:n.autoFreeze)&&this.setAutoFreeze(n.autoFreeze)}var i=e.prototype;return i.createDraft=function(e){r(e)||t(8),n(e)&&(e=F(e));var i=x(this),u=k(this,e,void 0);return u[H].I=!0,O(i),u},i.finishDraft=function(t,n){var r=(t&&t[H]).A;return m(r,n),S(void 0,r)},i.setAutoFreeze=function(t){this.K=t},i.setUseProxies=function(n){n&&!q&&t(20),this.S=n},i.applyPatches=function(t,r){var e;for(e=r.length-1;e>=0;e--){var i=r[e];if(0===i.path.length&&"replace"===i.op){t=i.value;break}}var u=y("Patches").W;return n(t)?u(t,r):this.produce(t,(function(t){return u(t,r.slice(e+1))}))},e}(),nt=new tt,rt=nt.produce,et=nt.produceWithPatches.bind(nt),it=nt.setAutoFreeze.bind(nt),ut=nt.setUseProxies.bind(nt),ot=nt.applyPatches.bind(nt),ft=nt.createDraft.bind(nt),at=nt.finishDraft.bind(nt);exports.Immer=tt,exports.applyPatches=ot,exports.castDraft=function(t){return t},exports.castImmutable=function(t){return t},exports.createDraft=ft,exports.current=F,exports.default=rt,exports.enableAllPlugins=function(){K(),C(),$()},exports.enableES5=K,exports.enableMapSet=C,exports.enablePatches=$,exports.finishDraft=at,exports.freeze=l,exports.immerable=G,exports.isDraft=n,exports.isDraftable=r,exports.nothing=B,exports.original=function(r){return n(r)||t(23,r),r[H].u},exports.produce=rt,exports.produceWithPatches=et,exports.setAutoFreeze=it,exports.setUseProxies=ut}(module={exports:{}},module.exports),module.exports);let state={user:void 0};const app=firebase.initializeApp({apiKey:"AIzaSyAJv0aTJMCbG_e6FJZzc6hSzri9qDCmvoo",authDomain:"rally-web-spike.firebaseapp.com",projectId:"rally-web-spike",storageBucket:"rally-web-spike.appspot.com",messagingSenderId:"85993993890",appId:"1:85993993890:web:b975ff99733d2d8b50c9fb"}),auth=firebase.auth(),db=firebase.firestore(app),user={userRef:void 0,initialize(uid,{createUser:createUser=!1}={}){this.userRef=db.collection("users").doc(uid),createUser&&this.update({uid:uid,createdOn:new Date})},get(){return this.userRef.get()},update(updates,merge=!0){return this.userRef.set(updates,{merge:merge})}};const _stateChangeCallbacks=[];function _updateLocalState(callback){state=immer_cjs_production_min.produce(state,callback),_stateChangeCallbacks.forEach((callback=>callback(state)))}function listenForUserChanges(user){db.collection("users").doc(user.uid).onSnapshot((doc=>{const nextState=doc.data();_updateLocalState((draft=>{draft.user=nextState}))}))}let USER_ID;var api={async loginWithGoogle(){const googleAuthProvider=new firebase.auth.GoogleAuthProvider;let userCredential;try{userCredential=await firebase.auth().signInWithPopup(googleAuthProvider)}catch(err){console.error("there was an error",err)}user.initialize(userCredential.user.uid,{createUser:!0}),listenForUserChanges(userCredential.user),await this.notifyStudies(userCredential.credential.idToken)},async loginWithEmailAndPassword(email,password){let userCredential;try{userCredential=await firebase.auth().signInWithEmailAndPassword(email,password)}catch(err){console.error("there was an error",err)}userCredential?(user.initialize(userCredential.user.uid),listenForUserChanges(userCredential.user)):console.error("Unable to log in with email and password")},async signupWithEmailAndPassword(email,password){let userCredential;try{userCredential=await firebase.auth().createUserWithEmailAndPassword(email,password)}catch(err){console.error("there was an error",err)}userCredential?(user.initialize(userCredential.user.uid,{createUser:!0}),listenForUserChanges(userCredential.user)):console.error("Unable to sign up with email and password")},async initialize(){const initialState={};let userState;const authenticatedUser=await new Promise((resolve=>{auth.onAuthStateChanged(resolve)}));null!==authenticatedUser?(USER_ID=authenticatedUser.uid,user.initialize(USER_ID),initialState._isLoggedIn=!0,userState=await user.get(authenticatedUser.uid),userState=userState.data(),listenForUserChanges(authenticatedUser)):initialState._isLoggedIn=!1;let initialStudyState=await async function(){return db.collection("studies").get()}();return initialStudyState=initialStudyState.docs.map((doc=>doc.data())),db.collection("studies").onSnapshot((querySnapshot=>{const studies=[];querySnapshot.forEach((function(doc){studies.push(doc.data())})),_updateLocalState((draft=>{draft.studies=studies}))})),initialState._initialized=!0,userState&&(initialState.user=userState),initialStudyState&&(initialState.studies=initialStudyState),initialState},async notifyStudies(idToken){for(const studyId of["maoohlacnogbjgacnnoajgljfcdbdocb"])chrome.runtime.sendMessage(studyId,idToken)},async updateStudyEnrollment(studyID,enroll){const enrolledStudies={...state.user.enrolledStudies||{}};return studyID in enrolledStudies||(enrolledStudies[studyID]={}),enrolledStudies[studyID]={...enrolledStudies[studyID]},enrolledStudies[studyID].enrolled=enroll,enroll&&(enrolledStudies[studyID].joinedOn=new Date),user.userRef.update({enrolledStudies:enrolledStudies}),!0},async updatePlatformEnrollment(enrolled){user.update({enrolled:enrolled})},async updateDemographicSurvey(data){user.userRef.update({demographicsData:data})},setFirstRunCompletion:async firstRunCompleted=>!0,onNextState(callback){_stateChangeCallbacks.push(callback)}};const store=function(){const{subscribe:subscribe,set:set}=writable({_initialized:!1});return api.initialize().then((state=>{set(state)})),api.onNextState((state=>{const nextState={...state,_initialized:!0};set(nextState)})),{subscribe:subscribe,set:set,loginWithGoogle:async()=>api.loginWithGoogle(),loginWithEmailAndPassword:async(email,password)=>api.loginWithEmailAndPassword(email,password),signupWithEmailAndPassword:async(email,password)=>api.signupWithEmailAndPassword(email,password),async updateStudyEnrollment(studyID,enroll){const coercedEnroll=!!enroll;console.debug(`Rally - changing study ${studyID} enrollment to ${coercedEnroll}`);try{await api.updateStudyEnrollment(studyID,coercedEnroll)}catch(err){console.error(err)}},async updatePlatformEnrollment(enroll){const coercedEnroll=!!enroll;console.debug(`Rally - changing enrollment to ${coercedEnroll}`);try{await api.updatePlatformEnrollment(coercedEnroll)}catch(err){console.error(err)}},async updateDemographicSurvey(data){try{await api.updateDemographicSurvey(data)}catch(err){console.error("Rally - failed to update the demographic survey",err)}},async setFirstRunCompletion(firstRun){try{await api.setFirstRunCompletion(firstRun)}catch(err){console.error("Rally - failed to set first run flag",err)}}}}();const notification=function(){const _notification=writable({id:void 0});let timeout;function clear(){_notification.set({id:void 0})}const notifications=derived(_notification,(($notification,set)=>{clearTimeout(timeout),set($notification),$notification.id&&(timeout=setTimeout(clear,2e3))})),{subscribe:subscribe}=notifications;return{timeoutID:timeout,subscribe:subscribe,send:function({message:message,type:type="default",code:code}){_notification.set({id:"_"+Math.random().toString(36).substr(2,9),type:type,message:message,code:code})},clear:()=>{clearTimeout(timeout),clear()}}}();function create_fragment(ctx){let div,current;const default_slot_template=ctx[2].default,default_slot=create_slot(default_slot_template,ctx,ctx[1],null);return{c(){div=element("div"),default_slot&&default_slot.c(),attr(div,"class","mzp-t-mozilla noise-background svelte-e7j179"),toggle_class(div,"no-overflow",ctx[0])},m(target,anchor){insert(target,div,anchor),default_slot&&default_slot.m(div,null),current=!0},p(ctx,[dirty]){default_slot&&default_slot.p&&(!current||2&dirty)&&update_slot(default_slot,default_slot_template,ctx,ctx[1],dirty,null,null),1&dirty&&toggle_class(div,"no-overflow",ctx[0])},i(local){current||(transition_in(default_slot,local),current=!0)},o(local){transition_out(default_slot,local),current=!1},d(detaching){detaching&&detach(div),default_slot&&default_slot.d(detaching)}}}function instance($$self,$$props,$$invalidate){let{$$slots:slots={},$$scope:$$scope}=$$props,{noOverflow:noOverflow=!1}=$$props;return $$self.$$set=$$props=>{"noOverflow"in $$props&&$$invalidate(0,noOverflow=$$props.noOverflow),"$$scope"in $$props&&$$invalidate(1,$$scope=$$props.$$scope)},[noOverflow,$$scope,slots]}class OnboardingLayout extends SvelteComponent{constructor(options){super(),init(this,options,instance,create_fragment,safe_not_equal,{noOverflow:0})}}function create_fragment$1(ctx){let main,current;const default_slot_template=ctx[2].default,default_slot=create_slot(default_slot_template,ctx,ctx[1],null);return{c(){main=element("main"),default_slot&&default_slot.c(),set_style(main,"--bottom-pad",ctx[0]?"var(--onboarding-cta-offset)":"0px"),attr(main,"class","svelte-ak0gvj")},m(target,anchor){insert(target,main,anchor),default_slot&&default_slot.m(main,null),current=!0},p(ctx,[dirty]){default_slot&&default_slot.p&&(!current||2&dirty)&&update_slot(default_slot,default_slot_template,ctx,ctx[1],dirty,null,null),(!current||1&dirty)&&set_style(main,"--bottom-pad",ctx[0]?"var(--onboarding-cta-offset)":"0px")},i(local){current||(transition_in(default_slot,local),current=!0)},o(local){transition_out(default_slot,local),current=!1},d(detaching){detaching&&detach(main),default_slot&&default_slot.d(detaching)}}}function instance$1($$self,$$props,$$invalidate){let{$$slots:slots={},$$scope:$$scope}=$$props,{padForOnboarding:padForOnboarding=!1}=$$props;return $$self.$$set=$$props=>{"padForOnboarding"in $$props&&$$invalidate(0,padForOnboarding=$$props.padForOnboarding),"$$scope"in $$props&&$$invalidate(1,$$scope=$$props.$$scope)},[padForOnboarding,$$scope,slots]}class OnboardingBody extends SvelteComponent{constructor(options){super(),init(this,options,instance$1,create_fragment$1,safe_not_equal,{padForOnboarding:0})}}function cubicInOut(t){return t<.5?4*t*t*t:.5*Math.pow(2*t-2,3)+1}function cubicOut(t){const f=t-1;return f*f*f+1}function fade(node,{delay:delay=0,duration:duration=400,easing:easing=identity}={}){const o=+getComputedStyle(node).opacity;return{delay:delay,duration:duration,easing:easing,css:t=>"opacity: "+t*o}}function fly(node,{delay:delay=0,duration:duration=400,easing:easing=cubicOut,x:x=0,y:y=0,opacity:opacity=0}={}){const style=getComputedStyle(node),target_opacity=+style.opacity,transform="none"===style.transform?"":style.transform,od=target_opacity*(1-opacity);return{delay:delay,duration:duration,easing:easing,css:(t,u)=>`\n\t\t\ttransform: ${transform} translate(${(1-t)*x}px, ${(1-t)*y}px);\n\t\t\topacity: ${target_opacity-od*u}`}}function slide(node,{delay:delay=0,duration:duration=400,easing:easing=cubicOut}={}){const style=getComputedStyle(node),opacity=+style.opacity,height=parseFloat(style.height),padding_top=parseFloat(style.paddingTop),padding_bottom=parseFloat(style.paddingBottom),margin_top=parseFloat(style.marginTop),margin_bottom=parseFloat(style.marginBottom),border_top_width=parseFloat(style.borderTopWidth),border_bottom_width=parseFloat(style.borderBottomWidth);return{delay:delay,duration:duration,easing:easing,css:t=>`overflow: hidden;opacity: ${Math.min(20*t,1)*opacity};height: ${t*height}px;padding-top: ${t*padding_top}px;padding-bottom: ${t*padding_bottom}px;margin-top: ${t*margin_top}px;margin-bottom: ${t*margin_bottom}px;border-top-width: ${t*border_top_width}px;border-bottom-width: ${t*border_bottom_width}px;`}}function scale(node,{delay:delay=0,duration:duration=400,easing:easing=cubicOut,start:start=0,opacity:opacity=0}={}){const style=getComputedStyle(node),target_opacity=+style.opacity,transform="none"===style.transform?"":style.transform,sd=1-start,od=target_opacity*(1-opacity);return{delay:delay,duration:duration,easing:easing,css:(_t,u)=>`\n\t\t\ttransform: ${transform} scale(${1-sd*u});\n\t\t\topacity: ${target_opacity-od*u}\n\t\t`}}function draw(node,{delay:delay=0,speed:speed,duration:duration,easing:easing=cubicInOut}={}){const len=node.getTotalLength();return void 0===duration?duration=void 0===speed?800:len/speed:"function"==typeof duration&&(duration=duration(len)),{delay:delay,duration:duration,easing:easing,css:(t,u)=>`stroke-dasharray: ${t*len} ${u*len}`}}function create_fragment$2(ctx){let button,forwardAll_action,current,mounted,dispose;const default_slot_template=ctx[24].default,default_slot=create_slot(default_slot_template,ctx,ctx[23],null);return{c(){button=element("button"),default_slot&&default_slot.c(),attr(button,"class",ctx[1]),button.disabled=ctx[0]},m(target,anchor){insert(target,button,anchor),default_slot&&default_slot.m(button,null),current=!0,mounted||(dispose=action_destroyer(forwardAll_action=ctx[2].call(null,button)),mounted=!0)},p(ctx,[dirty]){default_slot&&default_slot.p&&(!current||8388608&dirty)&&update_slot(default_slot,default_slot_template,ctx,ctx[23],dirty,null,null),(!current||2&dirty)&&attr(button,"class",ctx[1]),(!current||1&dirty)&&(button.disabled=ctx[0])},i(local){current||(transition_in(default_slot,local),current=!0)},o(local){transition_out(default_slot,local),current=!1},d(detaching){detaching&&detach(button),default_slot&&default_slot.d(detaching),mounted=!1,dispose()}}}function instance$2($$self,$$props,$$invalidate){let sizeClass,productClass,neutralClass,secondaryClass,darkClass,leaveClass,iconClass,textClass,errorClass,compactClass,classSet,{$$slots:slots={},$$scope:$$scope}=$$props,{size:size="md"}=$$props,{neutral:neutral=!1}=$$props,{product:product=!1}=$$props,{secondary:secondary=!1}=$$props,{dark:dark=!1}=$$props,{leave:leave=!1}=$$props,{icon:icon=!1}=$$props,{text:text=!1}=$$props,{error:error=!1}=$$props,{compact:compact=!1}=$$props,{disabled:disabled=!1}=$$props;const forwardAll=function(component,additionalEvents=[]){const events=["focus","blur","fullscreenchange","fullscreenerror","scroll","cut","copy","paste","keydown","keypress","keyup","auxclick","click","contextmenu","dblclick","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseout","mouseup","pointerlockchange","pointerlockerror","select","wheel","drag","dragend","dragenter","dragstart","dragleave","dragover","drop","touchcancel","touchend","touchmove","touchstart","pointerover","pointerenter","pointerdown","pointermove","pointerup","pointercancel","pointerout","pointerleave","gotpointercapture","lostpointercapture",...additionalEvents];return node=>{const destructors=events.map((event=>listen(node,event,(e=>bubble(component,e)))));return{destroy:()=>{destructors.forEach((destructor=>{destructor()}))}}}}(get_current_component());return $$self.$$set=$$props=>{"size"in $$props&&$$invalidate(3,size=$$props.size),"neutral"in $$props&&$$invalidate(4,neutral=$$props.neutral),"product"in $$props&&$$invalidate(5,product=$$props.product),"secondary"in $$props&&$$invalidate(6,secondary=$$props.secondary),"dark"in $$props&&$$invalidate(7,dark=$$props.dark),"leave"in $$props&&$$invalidate(8,leave=$$props.leave),"icon"in $$props&&$$invalidate(9,icon=$$props.icon),"text"in $$props&&$$invalidate(10,text=$$props.text),"error"in $$props&&$$invalidate(11,error=$$props.error),"compact"in $$props&&$$invalidate(12,compact=$$props.compact),"disabled"in $$props&&$$invalidate(0,disabled=$$props.disabled),"$$scope"in $$props&&$$invalidate(23,$$scope=$$props.$$scope)},$$self.$$.update=()=>{8&$$self.$$.dirty&&$$invalidate(13,sizeClass=size?`mzp-t-${size}`:void 0),32&$$self.$$.dirty&&$$invalidate(14,productClass=product?"mzp-t-product":void 0),16&$$self.$$.dirty&&$$invalidate(15,neutralClass=neutral?"mzp-t-neutral":void 0),64&$$self.$$.dirty&&$$invalidate(16,secondaryClass=secondary?"mzp-t-secondary":void 0),128&$$self.$$.dirty&&$$invalidate(17,darkClass=dark?"mzp-t-dark":void 0),256&$$self.$$.dirty&&$$invalidate(18,leaveClass=leave?"mzp-t-leave":void 0),512&$$self.$$.dirty&&$$invalidate(19,iconClass=icon?"mzp-t-icon":void 0),1024&$$self.$$.dirty&&$$invalidate(20,textClass=text?"mzp-t-secondary mzp-t-text":void 0),2048&$$self.$$.dirty&&$$invalidate(21,errorClass=error?"mzp-t-error":void 0),4096&$$self.$$.dirty&&$$invalidate(22,compactClass=compact?"mzp-t-compact":void 0),8380416&$$self.$$.dirty&&$$invalidate(1,classSet=["mzp-c-button",sizeClass,productClass,neutralClass,darkClass,secondaryClass,leaveClass,textClass,iconClass,errorClass,compactClass].filter((t=>t)).join(" "))},[disabled,classSet,forwardAll,size,neutral,product,secondary,dark,leave,icon,text,error,compact,sizeClass,productClass,neutralClass,secondaryClass,darkClass,leaveClass,iconClass,textClass,errorClass,compactClass,$$scope,slots]}class Button extends SvelteComponent{constructor(options){super(),init(this,options,instance$2,create_fragment$2,safe_not_equal,{size:3,neutral:4,product:5,secondary:6,dark:7,leave:8,icon:9,text:10,error:11,compact:12,disabled:0})}}function create_fragment$3(ctx){let svg,path0,path1,path2;return{c(){svg=svg_element("svg"),path0=svg_element("path"),path1=svg_element("path"),path2=svg_element("path"),attr(path0,"d","M8.66675 2.66666H13.3334V7.33333"),attr(path0,"stroke","currentColor"),attr(path0,"stroke-width","2"),attr(path0,"stroke-linecap","round"),attr(path0,"stroke-linejoin","round"),attr(path1,"d","M8 8L13.3333 2.66666"),attr(path1,"stroke","currentColor"),attr(path1,"stroke-width","2"),attr(path1,"stroke-linecap","round"),attr(path1,"stroke-linejoin","round"),attr(path2,"d","M5.33341 2.66666V2.66666C3.86066 2.66666 2.66675 3.86057 2.66675 5.33333V10.3333C2.66675 11.9902 4.00989 13.3333 5.66675 13.3333H10.6667C12.1395 13.3333 13.3334 12.1394 13.3334 10.6667V10.6667"),attr(path2,"stroke","currentColor"),attr(path2,"stroke-width","2"),attr(path2,"stroke-linecap","round"),attr(path2,"stroke-linejoin","round"),attr(svg,"width","16"),attr(svg,"height","16"),attr(svg,"viewBox","0 0 16 16"),attr(svg,"fill","none"),attr(svg,"xmlns","http://www.w3.org/2000/svg")},m(target,anchor){insert(target,svg,anchor),append(svg,path0),append(svg,path1),append(svg,path2)},p:noop,i:noop,o:noop,d(detaching){detaching&&detach(svg)}}}class ExternalLink extends SvelteComponent{constructor(options){super(),init(this,options,null,create_fragment$3,safe_not_equal,{})}}function create_fragment$4(ctx){let section,div6,h2,h2_intro,t0,p0,t2,div0,button0,t4,div1,t6,fieldset,div2,label0,t8,input0,t9,div3,label1,t11,input1,t12,div4,button1,t14,button2,t16,p1,t18,div5,a,t19,externallink,div6_intro,current,mounted,dispose;return externallink=new ExternalLink({}),{c(){section=element("section"),div6=element("div"),h2=element("h2"),h2.innerHTML='<img src="img/logo-wide.svg" alt="Mozilla Rally Logo"/>',t0=space(),p0=element("p"),p0.textContent="This is a feasibility spike centered around bringing Rally into the web.",t2=space(),div0=element("div"),button0=element("button"),button0.textContent="Sign up with Google (FIXME IMG)",t4=space(),div1=element("div"),div1.textContent="or",t6=space(),fieldset=element("fieldset"),div2=element("div"),label0=element("label"),label0.textContent="Email",t8=space(),input0=element("input"),t9=space(),div3=element("div"),label1=element("label"),label1.textContent="Password",t11=space(),input1=element("input"),t12=space(),div4=element("div"),button1=element("button"),button1.textContent="Log In",t14=space(),button2=element("button"),button2.textContent="Sign Up",t16=space(),p1=element("p"),p1.textContent="This site is protected by reCAPTCHA, and the Google Privacy Policy and Terms of Service apply.",t18=space(),div5=element("div"),a=element("a"),t19=text("Wait â€“ how does it work again?\n        "),create_component(externallink.$$.fragment),attr(h2,"class","mzp-c-call-out-title mzp-has-zap-1 svelte-1d35p5o"),attr(p0,"class","mzp-c-call-out-desc"),set_style(p0,"color","var(--color-marketing-gray-70)"),set_style(button0,"display","grid"),set_style(button0,"place-items","center"),set_style(button0,"padding",".5rem 1rem"),set_style(button0,"background-color","white"),set_style(button0,"color","hsl(217, 10%, 20%)"),set_style(button0,"text-decoration","none"),set_style(button0,"width","max-content"),set_style(button0,"border","2px solid #5e5e72"),set_style(button0,"margin","auto"),set_style(button0,"border-radius","4px"),set_style(button0,"font-weight","600"),set_style(div0,"padding","2rem"),attr(div1,"class","mzp-c-form-header"),set_style(div1,"font-weight","bold"),set_style(div1,"font-size","1.25rem"),attr(label0,"class","mzp-c-field-label svelte-1d35p5o"),attr(label0,"for","id_name"),attr(input0,"class","mzp-c-field-control "),attr(input0,"id","id_name"),attr(input0,"type","email"),attr(div2,"class","mzp-c-field "),attr(label1,"class","mzp-c-field-label svelte-1d35p5o"),attr(label1,"for","id_user_email"),attr(input1,"class","mzp-c-field-control"),attr(input1,"id","id_user_email"),attr(input1,"type","password"),attr(div3,"class","mzp-c-field "),attr(fieldset,"class","mzp-c-field-set svelte-1d35p5o"),attr(button1,"class","mzp-c-button"),attr(button2,"class","mzp-c-button mzp-t-secondary"),attr(p1,"class","mzp-c-form-info mzp-t-xs"),attr(div4,"class","mzp-c-form-footer"),attr(a,"class","external-link"),attr(a,"target","_blank"),attr(a,"rel","noopener noreferrer"),attr(a,"href","https://rally.mozilla.org/how-rally-works/"),attr(div5,"class","how-it-works svelte-1d35p5o"),attr(div6,"class","mzp-l-content svelte-1d35p5o"),attr(section,"class","mzp-c-call-out svelte-1d35p5o")},m(target,anchor){insert(target,section,anchor),append(section,div6),append(div6,h2),append(div6,t0),append(div6,p0),append(div6,t2),append(div6,div0),append(div0,button0),append(div6,t4),append(div6,div1),append(div6,t6),append(div6,fieldset),append(fieldset,div2),append(div2,label0),append(div2,t8),append(div2,input0),set_input_value(input0,ctx[0]),append(fieldset,t9),append(fieldset,div3),append(div3,label1),append(div3,t11),append(div3,input1),set_input_value(input1,ctx[1]),append(div6,t12),append(div6,div4),append(div4,button1),append(div4,t14),append(div4,button2),append(div4,t16),append(div4,p1),append(div6,t18),append(div6,div5),append(div5,a),append(a,t19),mount_component(externallink,a,null),current=!0,mounted||(dispose=[listen(button0,"click",ctx[5]),listen(input0,"input",ctx[6]),listen(input1,"input",ctx[7]),listen(button1,"click",ctx[8]),listen(button2,"click",ctx[9])],mounted=!0)},p(ctx,[dirty]){1&dirty&&input0.value!==ctx[0]&&set_input_value(input0,ctx[0]),2&dirty&&input1.value!==ctx[1]&&set_input_value(input1,ctx[1])},i(local){current||(h2_intro||add_render_callback((()=>{h2_intro=create_in_transition(h2,fly,{duration:800,y:5}),h2_intro.start()})),transition_in(externallink.$$.fragment,local),div6_intro||add_render_callback((()=>{div6_intro=create_in_transition(div6,fly,{duration:800,y:5}),div6_intro.start()})),current=!0)},o(local){transition_out(externallink.$$.fragment,local),current=!1},d(detaching){detaching&&detach(section),destroy_component(externallink),mounted=!1,run_all(dispose)}}}function instance$3($$self,$$props,$$invalidate){const dispatch=createEventDispatcher();let{firstRunCompleted:firstRunCompleted=!1}=$$props;const store=getContext("rally:store");let email,password;return $$self.$$set=$$props=>{"firstRunCompleted"in $$props&&$$invalidate(4,firstRunCompleted=$$props.firstRunCompleted)},[email,password,dispatch,store,firstRunCompleted,async()=>{await store.loginWithGoogle(),dispatch("user-signup-login-complete")},function(){email=this.value,$$invalidate(0,email)},function(){password=this.value,$$invalidate(1,password)},async()=>{await store.loginWithEmailAndPassword(email,password),dispatch("user-signup-login-complete")},async()=>{await store.signupWithEmailAndPassword(email,password),dispatch("user-signup-login-complete")}]}class Content extends SvelteComponent{constructor(options){super(),init(this,options,instance$3,create_fragment$4,safe_not_equal,{firstRunCompleted:4})}}function create_fragment$5(ctx){let svg,path;return{c(){svg=svg_element("svg"),path=svg_element("path"),attr(path,"fill",ctx[1]),attr(path,"d","M9.061 8l3.47-3.47a.75.75 0 0 0-1.061-1.06L8 6.939 4.53 3.47a.75.75 0 1\n    0-1.06 1.06L6.939 8 3.47 11.47a.75.75 0 1 0 1.06 1.06L8 9.061l3.47\n    3.47a.75.75 0 0 0 1.06-1.061z"),attr(svg,"xmlns","http://www.w3.org/2000/svg"),attr(svg,"width",ctx[0]),attr(svg,"height",ctx[0]),attr(svg,"viewBox","0 0 16 16")},m(target,anchor){insert(target,svg,anchor),append(svg,path)},p(ctx,[dirty]){2&dirty&&attr(path,"fill",ctx[1]),1&dirty&&attr(svg,"width",ctx[0]),1&dirty&&attr(svg,"height",ctx[0])},i:noop,o:noop,d(detaching){detaching&&detach(svg)}}}function instance$4($$self,$$props,$$invalidate){let{size:size="1em"}=$$props,{color:color="currentColor"}=$$props;return $$self.$$set=$$props=>{"size"in $$props&&$$invalidate(0,size=$$props.size),"color"in $$props&&$$invalidate(1,color=$$props.color)},[size,color]}class CloseSmall extends SvelteComponent{constructor(options){super(),init(this,options,instance$4,create_fragment$5,safe_not_equal,{size:0,color:1})}}function create_fragment$6(ctx){let button,closesmall,t,button_transition,current,mounted,dispose;return closesmall=new CloseSmall({}),{c(){button=element("button"),create_component(closesmall.$$.fragment),t=text(" Clear this response"),attr(button,"class","gafc mzp-t-sm mzp-c-button mzp-t-neutral mzp-t-product svelte-qz2fv3")},m(target,anchor){insert(target,button,anchor),mount_component(closesmall,button,null),append(button,t),current=!0,mounted||(dispose=listen(button,"click",ctx[0]),mounted=!0)},p:noop,i(local){current||(transition_in(closesmall.$$.fragment,local),local&&add_render_callback((()=>{button_transition||(button_transition=create_bidirectional_transition(button,fly,{duration:150,y:2.5},!0)),button_transition.run(1)})),current=!0)},o(local){transition_out(closesmall.$$.fragment,local),local&&(button_transition||(button_transition=create_bidirectional_transition(button,fly,{duration:150,y:2.5},!1)),button_transition.run(0)),current=!1},d(detaching){detaching&&detach(button),destroy_component(closesmall),detaching&&button_transition&&button_transition.end(),mounted=!1,dispose()}}}function instance$5($$self){return[function(event){bubble($$self,event)}]}class ClearAnswerButton extends SvelteComponent{constructor(options){super(),init(this,options,instance$5,create_fragment$6,safe_not_equal,{})}}function createResultObject(schema,currentAnswers){return Object.values(schema).reduce(((acc,config)=>{let defaultValue,answer;switch(config.type){case"single":defaultValue=void 0;break;case"multi":defaultValue=[];break;case"text":defaultValue=""}return answer=currentAnswers&&void 0!==currentAnswers[config.key]?currentAnswers[config.key]:defaultValue,acc[config.key]=answer,acc}),{})}function questionIsAnswered(answer,questionType){if(void 0===answer)return!1;if("text"===questionType)return answer.length>0;if("single"===questionType)return void 0!==answer;if("multi"===questionType)return answer.length>0;throw Error("unknown question type")}function formatInput(node,formatter){function input(event){event.target.value=formatter.edit(event.target.value)}function focus(event){event.target.value=formatter.edit(event.target.value)}function blur(event){event.target.value=formatter.display(event.target.value)}return formatter&&(node.addEventListener("input",input),node.addEventListener("focus",focus),node.addEventListener("blur",blur),formatter.alignRight&&node.classList.add("right")),{destroy(){formatter&&(node.classList.remove("right"),node.removeEventListener("input",input),node.removeEventListener("focus",focus),node.removeEventListener("blur",blur))}}}class FieldFormatter{constructor(parameters={}){this.alignRight=!!parameters.alignRight||!1,this.showValidationErrors=!1}setValidator(callback){this.isInvalid=callback}formatForEditing(callback){this.edit=value=>(this.showValidationErrors=!1,callback(value))}formatForDisplay(callback){this.display=value=>(this.showValidationErrors=!0,callback(value))}formatForResponse(callback){this.response=callback}}const formatters={currency:function(){const formatCurrencyInput=value=>{if(void 0===value)return"";const r=/^\d/;return value.split("").filter((a=>r.test(a))).join("")},currency=new FieldFormatter({alignRight:!0});return currency.formatForDisplay((value=>{let intermediateValue=value;if("string"==typeof intermediateValue&&intermediateValue.includes("_"))return"";"number"==typeof intermediateValue?intermediateValue=Math.floor(intermediateValue).toString():"string"!=typeof intermediateValue&&(intermediateValue="");const toCurrency=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0}),finalValue=formatCurrencyInput(intermediateValue);return finalValue.length?toCurrency.format(finalValue):""})),currency.formatForEditing(formatCurrencyInput),currency.formatForResponse((value=>value.length?+formatCurrencyInput(value):void 0)),currency},zipcode:function(){const formatZipcodeInput=value=>{if(void 0===value)return"";const r=/^\d/;return value.split("").filter((a=>r.test(a))).join("").slice(0,5)},zipcode=new FieldFormatter({alignRight:!1});return zipcode.formatForDisplay(formatZipcodeInput),zipcode.formatForEditing(formatZipcodeInput),zipcode.formatForResponse(formatZipcodeInput),zipcode.setValidator((text=>{if(void 0===text)return!1;const number=Number(text);return(text.length>0&&text.length<5||!!Number.isNaN(number))&&"zipcode must be a five-digit number"})),zipcode}};function _formatFor(schema,answers,formatters,formatType,removeUnanswered=!1){const transformedAnswers={};return Object.keys(schema).forEach((key=>{const answer=answers[key];removeUnanswered&&!questionIsAnswered(answer,schema[key].type)||("text"===schema[key].type?formatters.has(key,formatType)?transformedAnswers[key]=formatters[key][formatType](answer):transformedAnswers[key]=answer:"multi"===schema[key].type?transformedAnswers[key]=answer?[...answer]:[]:"single"===schema[key].type&&(transformedAnswers[key]=answer))})),transformedAnswers}function formatAnswersForResponse(schema,answers,formatters){return _formatFor(schema,answers,formatters,"response",!0)}function formatAnswersForDisplay(schema,answers,formatters){return _formatFor(schema,answers,formatters,"display")}const schema={age:{key:"age",label:"1. What is your age?",type:"single",columns:!0,values:[{key:"19_24",label:"19-24 years old"},{key:"25_34",label:"25-34 years old"},{key:"35_44",label:"35-44 years old"},{key:"45_54",label:"45-54 years old"},{key:"55_64",label:"55-64 years old"},{key:"over_65",label:"65 years and older"}]},gender:{key:"gender",label:"2. What is your gender?",type:"single",columns:!0,values:[{key:"male",label:"Male"},{key:"female",label:"Female"},{key:"neither",label:"Neither choice describes me"},{key:"decline",label:"Decline to identify"}]},hispanicLatinxSpanishOrigin:{key:"hispanicLatinxSpanishOrigin",label:"3. Are you of Hispanic, Latinx, or Spanish origin?",type:"single",values:[{key:"other",label:"No, not of Hispanic, Latinx, or Spanish origin"},{key:"hispanicLatinxSpanish",label:"Yes"}]},race:{key:"race",label:"4. What is your race / ethnicity?",type:"multi",columns:!0,values:[{key:"american_indian_or_alaska_native",label:"American Indian or Alaska Native"},{key:"asian_indian",label:"Asian Indian"},{key:"black_or_african_american",label:"Black or African American"},{key:"chamorro",label:"Chamorro"},{key:"chinese",label:"Chinese"},{key:"filipino",label:"Filipino"},{key:"japanese",label:"Japanese"},{key:"korean",label:"Korean"},{key:"native_hawaiian",label:"Native Hawaiian"},{key:"samoan",label:"Samoan"},{key:"vietnamese",label:"Vietnamese"},{key:"white",label:"White"},{key:"other_asian",label:"Other Asian"},{key:"other_pacific_islander",label:"Other Pacific Islander"},{key:"some_other_race",label:"Some other race"}]},school:{key:"school",label:"5. What is the highest level of school you have completed?",type:"single",values:[{key:"less_than_high_school",label:"Less than high school"},{key:"some_high_school",label:"Some high school"},{key:"high_school_graduate_or_equivalent",label:"High school graduate or equivalent (for example GED)"},{key:"some_college_but_no_degree_or_in_progress",label:"Some college, but degree not received or in progress"},{key:"associates_degree",label:"Associate's degree (for example AA, AS)"},{key:"bachelors_degree",label:"Bachelor's degree (for example BA, BS, BB)"},{key:"graduate_degree",label:"Graduate degree (for example master's, professional, doctorate)"}]},exactIncome:{key:"exactIncome",label:"6. What is your household's combined annual income during the past 12 months?",sublabel:"Please provide an approximate estimate in US Dollars:",type:"text",formatter:"currency"},zipcode:{key:"zipcode",label:"7. What is your zip code?",type:"text",formatter:"zipcode"}},inputFormatters=function(schema){return{validateAllQuestions(schema,answers){return Object.keys(schema).every((key=>!this.hasValidator(key)||this.hasValidator(key)&&!this[key].isInvalid(answers[key])))},exists(key){return key in this},has(key,functionName){return this.exists(key)&&functionName in this[key]},hasValidator(key){return this.has(key,"isInvalid")},showErrors(key){return this[key].showValidationErrors},hasInput(key){return this.has(key,"edit")},hasBlur(key){return this.has(key,"display")},hasFocus(key){return this.has(key,"edit")},hasDisplay(key){return this.has(key,"display")},hasEdit(key){return this.has(key,"edit")},hasResponse(key){return this.has(key,"response")},...Object.keys(schema).reduce(((acc,v)=>{const formatter=schema[v].formatter;return formatter&&(formatter in formatters?acc[v]=formatters[formatter]():console.error(`error: formatter ${formatter} is not valid`)),acc}),{})}}(schema),get_call_to_action_slot_changes=dirty=>({formattedResults:1&dirty,validated:1&dirty}),get_call_to_action_slot_context=ctx=>({formattedResults:formatAnswersForResponse(schema,ctx[0],inputFormatters),validated:inputFormatters.validateAllQuestions(schema,ctx[0])});function get_each_context(ctx,list,i){const child_ctx=ctx.slice();return child_ctx[12]=list[i],child_ctx[13]=list,child_ctx[14]=i,child_ctx}function get_each_context_1(ctx,list,i){const child_ctx=ctx.slice();return child_ctx[15]=list[i],child_ctx}const get_description_slot_changes=dirty=>({}),get_description_slot_context=ctx=>({}),get_title_slot_changes=dirty=>({}),get_title_slot_context=ctx=>({});function create_if_block_5(ctx){let clearanswerbutton,current;return clearanswerbutton=new ClearAnswerButton({}),clearanswerbutton.$on("click",(function(...args){return ctx[5](ctx[12],...args)})),{c(){create_component(clearanswerbutton.$$.fragment)},m(target,anchor){mount_component(clearanswerbutton,target,anchor),current=!0},p(new_ctx,dirty){ctx=new_ctx},i(local){current||(transition_in(clearanswerbutton.$$.fragment,local),current=!0)},o(local){transition_out(clearanswerbutton.$$.fragment,local),current=!1},d(detaching){destroy_component(clearanswerbutton,detaching)}}}function create_if_block_4(ctx){let div,t,t_value=schema[ctx[12]].sublabel+"";return{c(){div=element("div"),t=text(t_value),set_style(div,"padding-top","-8px"),set_style(div,"padding-bottom","20px")},m(target,anchor){insert(target,div,anchor),append(div,t)},p(ctx,dirty){1&dirty&&t_value!==(t_value=schema[ctx[12]].sublabel+"")&&set_data(t,t_value)},d(detaching){detaching&&detach(div)}}}function create_else_block(ctx){let each_1_anchor,each_value_1=schema[ctx[12]].values,each_blocks=[];for(let i=0;i<each_value_1.length;i+=1)each_blocks[i]=create_each_block_1(get_each_context_1(ctx,each_value_1,i));return{c(){for(let i=0;i<each_blocks.length;i+=1)each_blocks[i].c();each_1_anchor=empty()},m(target,anchor){for(let i=0;i<each_blocks.length;i+=1)each_blocks[i].m(target,anchor);insert(target,each_1_anchor,anchor)},p(ctx,dirty){if(1&dirty){let i;for(each_value_1=schema[ctx[12]].values,i=0;i<each_value_1.length;i+=1){const child_ctx=get_each_context_1(ctx,each_value_1,i);each_blocks[i]?each_blocks[i].p(child_ctx,dirty):(each_blocks[i]=create_each_block_1(child_ctx),each_blocks[i].c(),each_blocks[i].m(each_1_anchor.parentNode,each_1_anchor))}for(;i<each_blocks.length;i+=1)each_blocks[i].d(1);each_blocks.length=each_value_1.length}},i:noop,o:noop,d(detaching){destroy_each(each_blocks,detaching),detaching&&detach(each_1_anchor)}}}function create_if_block(ctx){let div,input,input_value_value,formatInput_action,t,span,current,mounted,dispose,show_if=inputFormatters.showErrors(ctx[12])&&inputFormatters.hasValidator(ctx[12])&&inputFormatters[ctx[12]].isInvalid(ctx[0][ctx[12]]);function blur_handler(...args){return ctx[6](ctx[12],...args)}function focus_handler(...args){return ctx[7](ctx[12],...args)}function input_handler(...args){return ctx[8](ctx[12],...args)}let if_block=show_if&&create_if_block_1(ctx);return{c(){div=element("div"),input=element("input"),t=space(),span=element("span"),if_block&&if_block.c(),attr(input,"type","text"),input.value=input_value_value=ctx[0][ctx[12]],attr(input,"class","svelte-5brf0m"),toggle_class(input,"right",inputFormatters[ctx[12]].alignRight),set_style(span,"min-height","24px"),set_style(span,"display","block"),attr(div,"class","mzp-c-choice mzp-c-choice-text svelte-5brf0m"),toggle_class(div,"mzp-is-error",inputFormatters.showErrors(ctx[12])&&inputFormatters.hasValidator(ctx[12])&&inputFormatters[ctx[12]].isInvalid(ctx[0][ctx[12]]))},m(target,anchor){insert(target,div,anchor),append(div,input),append(div,t),append(div,span),if_block&&if_block.m(span,null),current=!0,mounted||(dispose=[action_destroyer(formatInput_action=formatInput.call(null,input,inputFormatters[ctx[12]])),listen(input,"blur",blur_handler),listen(input,"focus",focus_handler),listen(input,"input",input_handler)],mounted=!0)},p(new_ctx,dirty){ctx=new_ctx,(!current||1&dirty&&input_value_value!==(input_value_value=ctx[0][ctx[12]])&&input.value!==input_value_value)&&(input.value=input_value_value),formatInput_action&&is_function(formatInput_action.update)&&1&dirty&&formatInput_action.update.call(null,inputFormatters[ctx[12]]),1&dirty&&toggle_class(input,"right",inputFormatters[ctx[12]].alignRight),1&dirty&&(show_if=inputFormatters.showErrors(ctx[12])&&inputFormatters.hasValidator(ctx[12])&&inputFormatters[ctx[12]].isInvalid(ctx[0][ctx[12]])),show_if?if_block?(if_block.p(ctx,dirty),1&dirty&&transition_in(if_block,1)):(if_block=create_if_block_1(ctx),if_block.c(),transition_in(if_block,1),if_block.m(span,null)):if_block&&(group_outros(),transition_out(if_block,1,1,(()=>{if_block=null})),check_outros()),1&dirty&&toggle_class(div,"mzp-is-error",inputFormatters.showErrors(ctx[12])&&inputFormatters.hasValidator(ctx[12])&&inputFormatters[ctx[12]].isInvalid(ctx[0][ctx[12]]))},i(local){current||(transition_in(if_block),current=!0)},o(local){transition_out(if_block),current=!1},d(detaching){detaching&&detach(div),if_block&&if_block.d(),mounted=!1,run_all(dispose)}}}function create_if_block_3(ctx){let input,input_id_value,input_value_value,mounted,dispose;function input_change_handler_1(){ctx[11].call(input,ctx[12],ctx[14])}return ctx[10][0][ctx[14]]=[],{c(){input=element("input"),attr(input,"class","mzp-c-choice-control svelte-5brf0m"),attr(input,"type","checkbox"),attr(input,"id",input_id_value="answer-"+ctx[15].key),input.__value=input_value_value=ctx[15].key,input.value=input.__value,ctx[10][0][ctx[14]].push(input)},m(target,anchor){insert(target,input,anchor),input.checked=~ctx[0][ctx[12]].indexOf(input.__value),mounted||(dispose=listen(input,"change",input_change_handler_1),mounted=!0)},p(new_ctx,dirty){ctx=new_ctx,1&dirty&&input_id_value!==(input_id_value="answer-"+ctx[15].key)&&attr(input,"id",input_id_value),1&dirty&&input_value_value!==(input_value_value=ctx[15].key)&&(input.__value=input_value_value,input.value=input.__value),1&dirty&&(input.checked=~ctx[0][ctx[12]].indexOf(input.__value))},d(detaching){detaching&&detach(input),ctx[10][0][ctx[14]].splice(ctx[10][0][ctx[14]].indexOf(input),1),mounted=!1,dispose()}}}function create_if_block_2(ctx){let input,input_id_value,input_value_value,mounted,dispose;function input_change_handler(){ctx[9].call(input,ctx[12])}return ctx[10][0][ctx[14]]=[],{c(){input=element("input"),attr(input,"class","mzp-c-choice-control svelte-5brf0m"),attr(input,"type","radio"),attr(input,"id",input_id_value="answer-"+ctx[15].key),input.__value=input_value_value=ctx[15].key,input.value=input.__value,ctx[10][0][ctx[14]].push(input)},m(target,anchor){insert(target,input,anchor),input.checked=input.__value===ctx[0][ctx[12]],mounted||(dispose=listen(input,"change",input_change_handler),mounted=!0)},p(new_ctx,dirty){ctx=new_ctx,1&dirty&&input_id_value!==(input_id_value="answer-"+ctx[15].key)&&attr(input,"id",input_id_value),1&dirty&&input_value_value!==(input_value_value=ctx[15].key)&&(input.__value=input_value_value,input.value=input.__value),1&dirty&&(input.checked=input.__value===ctx[0][ctx[12]])},d(detaching){detaching&&detach(input),ctx[10][0][ctx[14]].splice(ctx[10][0][ctx[14]].indexOf(input),1),mounted=!1,dispose()}}}function create_each_block_1(ctx){let div,t0,label,t1,label_for_value,t2,t1_value=ctx[15].label+"";function select_block_type_1(ctx,dirty){return"single"===schema[ctx[12]].type?create_if_block_2:"multi"===schema[ctx[12]].type?create_if_block_3:void 0}let current_block_type=select_block_type_1(ctx),if_block=current_block_type&&current_block_type(ctx);return{c(){div=element("div"),if_block&&if_block.c(),t0=space(),label=element("label"),t1=text(t1_value),t2=space(),attr(label,"class","mzp-c-choice-label svelte-5brf0m"),attr(label,"for",label_for_value="answer-"+ctx[15].key),attr(div,"class","mzp-c-choice svelte-5brf0m")},m(target,anchor){insert(target,div,anchor),if_block&&if_block.m(div,null),append(div,t0),append(div,label),append(label,t1),append(div,t2)},p(ctx,dirty){current_block_type===(current_block_type=select_block_type_1(ctx))&&if_block?if_block.p(ctx,dirty):(if_block&&if_block.d(1),if_block=current_block_type&&current_block_type(ctx),if_block&&(if_block.c(),if_block.m(div,t0))),1&dirty&&t1_value!==(t1_value=ctx[15].label+"")&&set_data(t1,t1_value),1&dirty&&label_for_value!==(label_for_value="answer-"+ctx[15].key)&&attr(label,"for",label_for_value)},d(detaching){detaching&&detach(div),if_block&&if_block.d()}}}function create_if_block_1(ctx){let span,t,span_transition,current,t_value=inputFormatters[ctx[12]].isInvalid(ctx[0][ctx[12]])+"";return{c(){span=element("span"),t=text(t_value),attr(span,"class","mzp-c-fieldnote")},m(target,anchor){insert(target,span,anchor),append(span,t),current=!0},p(ctx,dirty){(!current||1&dirty)&&t_value!==(t_value=inputFormatters[ctx[12]].isInvalid(ctx[0][ctx[12]])+"")&&set_data(t,t_value)},i(local){current||(add_render_callback((()=>{span_transition||(span_transition=create_bidirectional_transition(span,fly,{duration:300,y:5},!0)),span_transition.run(1)})),current=!0)},o(local){span_transition||(span_transition=create_bidirectional_transition(span,fly,{duration:300,y:5},!1)),span_transition.run(0),current=!1},d(detaching){detaching&&detach(span),detaching&&span_transition&&span_transition.end()}}}function create_each_block(ctx){let fieldset,legend,t0,t1,legend_for_value,t2,t3,div,current_block_type_index,if_block2,t4,current,t0_value=schema[ctx[12]].label+"",show_if=questionIsAnswered(ctx[0][ctx[12]],schema[ctx[12]].type),if_block0=show_if&&create_if_block_5(ctx),if_block1=schema[ctx[12]].sublabel&&create_if_block_4(ctx);const if_block_creators=[create_if_block,create_else_block],if_blocks=[];function select_block_type(ctx,dirty){return"text"===schema[ctx[12]].type?0:1}return current_block_type_index=select_block_type(ctx),if_block2=if_blocks[current_block_type_index]=if_block_creators[current_block_type_index](ctx),{c(){fieldset=element("fieldset"),legend=element("legend"),t0=text(t0_value),t1=space(),if_block0&&if_block0.c(),t2=space(),if_block1&&if_block1.c(),t3=space(),div=element("div"),if_block2.c(),t4=space(),attr(legend,"class","mzp-c-field-label svelte-5brf0m"),attr(legend,"for",legend_for_value=schema[ctx[12]].key),toggle_class(legend,"remove-bottom-margin",schema[ctx[12]].sublabel),attr(div,"class","mzp-c-choices svelte-5brf0m"),set_style(div,"--rows",schema[ctx[12]].values?Math.ceil(schema[ctx[12]].values.length/2):0),toggle_class(div,"two-columns",schema[ctx[12]].columns),attr(fieldset,"class","mzp-c-field-set svelte-5brf0m"),toggle_class(fieldset,"mzp-c-field-set-text","text"===schema[ctx[12]].type)},m(target,anchor){insert(target,fieldset,anchor),append(fieldset,legend),append(legend,t0),append(legend,t1),if_block0&&if_block0.m(legend,null),append(fieldset,t2),if_block1&&if_block1.m(fieldset,null),append(fieldset,t3),append(fieldset,div),if_blocks[current_block_type_index].m(div,null),append(fieldset,t4),current=!0},p(ctx,dirty){(!current||1&dirty)&&t0_value!==(t0_value=schema[ctx[12]].label+"")&&set_data(t0,t0_value),1&dirty&&(show_if=questionIsAnswered(ctx[0][ctx[12]],schema[ctx[12]].type)),show_if?if_block0?(if_block0.p(ctx,dirty),1&dirty&&transition_in(if_block0,1)):(if_block0=create_if_block_5(ctx),if_block0.c(),transition_in(if_block0,1),if_block0.m(legend,null)):if_block0&&(group_outros(),transition_out(if_block0,1,1,(()=>{if_block0=null})),check_outros()),(!current||1&dirty&&legend_for_value!==(legend_for_value=schema[ctx[12]].key))&&attr(legend,"for",legend_for_value),1&dirty&&toggle_class(legend,"remove-bottom-margin",schema[ctx[12]].sublabel),schema[ctx[12]].sublabel?if_block1?if_block1.p(ctx,dirty):(if_block1=create_if_block_4(ctx),if_block1.c(),if_block1.m(fieldset,t3)):if_block1&&(if_block1.d(1),if_block1=null);let previous_block_index=current_block_type_index;current_block_type_index=select_block_type(ctx),current_block_type_index===previous_block_index?if_blocks[current_block_type_index].p(ctx,dirty):(group_outros(),transition_out(if_blocks[previous_block_index],1,1,(()=>{if_blocks[previous_block_index]=null})),check_outros(),if_block2=if_blocks[current_block_type_index],if_block2?if_block2.p(ctx,dirty):(if_block2=if_blocks[current_block_type_index]=if_block_creators[current_block_type_index](ctx),if_block2.c()),transition_in(if_block2,1),if_block2.m(div,null)),(!current||1&dirty)&&set_style(div,"--rows",schema[ctx[12]].values?Math.ceil(schema[ctx[12]].values.length/2):0),1&dirty&&toggle_class(div,"two-columns",schema[ctx[12]].columns),1&dirty&&toggle_class(fieldset,"mzp-c-field-set-text","text"===schema[ctx[12]].type)},i(local){current||(transition_in(if_block0),transition_in(if_block2),current=!0)},o(local){transition_out(if_block0),transition_out(if_block2),current=!1},d(detaching){detaching&&detach(fieldset),if_block0&&if_block0.d(),if_block1&&if_block1.d(),if_blocks[current_block_type_index].d()}}}function create_fragment$7(ctx){let div,h2,t0,t1,hr,t2,form,t3,div_intro,current;const title_slot_template=ctx[4].title,title_slot=create_slot(title_slot_template,ctx,ctx[3],get_title_slot_context),title_slot_or_fallback=title_slot||function(ctx){let span;return{c(){span=element("span"),span.textContent="Tell Us About Yourself"},m(target,anchor){insert(target,span,anchor)},d(detaching){detaching&&detach(span)}}}(),description_slot_template=ctx[4].description,description_slot=create_slot(description_slot_template,ctx,ctx[3],get_description_slot_context),description_slot_or_fallback=description_slot||function(ctx){let p;return{c(){p=element("p"),p.textContent="Each question is completely optional, and can be updated at any time by clicking Manage Profile. \n      The answers you give will help us understand the composition and representivity of the Rally community.\n      Additionally, collaborators will combine your answers with the data collected in the studies you join to enrich their findings and answer research questions."},m(target,anchor){insert(target,p,anchor)},d(detaching){detaching&&detach(p)}}}();let each_value=Object.keys(ctx[0]),each_blocks=[];for(let i=0;i<each_value.length;i+=1)each_blocks[i]=create_each_block(get_each_context(ctx,each_value,i));const out=i=>transition_out(each_blocks[i],1,1,(()=>{each_blocks[i]=null})),call_to_action_slot_template=ctx[4]["call-to-action"],call_to_action_slot=create_slot(call_to_action_slot_template,ctx,ctx[3],get_call_to_action_slot_context);return{c(){div=element("div"),h2=element("h2"),title_slot_or_fallback&&title_slot_or_fallback.c(),t0=space(),description_slot_or_fallback&&description_slot_or_fallback.c(),t1=space(),hr=element("hr"),t2=space(),form=element("form");for(let i=0;i<each_blocks.length;i+=1)each_blocks[i].c();t3=space(),call_to_action_slot&&call_to_action_slot.c(),attr(h2,"class","section-header"),attr(form,"class","mzp-c-form")},m(target,anchor){insert(target,div,anchor),append(div,h2),title_slot_or_fallback&&title_slot_or_fallback.m(h2,null),append(div,t0),description_slot_or_fallback&&description_slot_or_fallback.m(div,null),append(div,t1),append(div,hr),append(div,t2),append(div,form);for(let i=0;i<each_blocks.length;i+=1)each_blocks[i].m(form,null);append(div,t3),call_to_action_slot&&call_to_action_slot.m(div,null),current=!0},p(ctx,[dirty]){if(title_slot&&title_slot.p&&(!current||8&dirty)&&update_slot(title_slot,title_slot_template,ctx,ctx[3],dirty,get_title_slot_changes,get_title_slot_context),description_slot&&description_slot.p&&(!current||8&dirty)&&update_slot(description_slot,description_slot_template,ctx,ctx[3],dirty,get_description_slot_changes,get_description_slot_context),1&dirty){let i;for(each_value=Object.keys(ctx[0]),i=0;i<each_value.length;i+=1){const child_ctx=get_each_context(ctx,each_value,i);each_blocks[i]?(each_blocks[i].p(child_ctx,dirty),transition_in(each_blocks[i],1)):(each_blocks[i]=create_each_block(child_ctx),each_blocks[i].c(),transition_in(each_blocks[i],1),each_blocks[i].m(form,null))}for(group_outros(),i=each_value.length;i<each_blocks.length;i+=1)out(i);check_outros()}call_to_action_slot&&call_to_action_slot.p&&(!current||9&dirty)&&update_slot(call_to_action_slot,call_to_action_slot_template,ctx,ctx[3],dirty,get_call_to_action_slot_changes,get_call_to_action_slot_context)},i(local){if(!current){transition_in(title_slot_or_fallback,local),transition_in(description_slot_or_fallback,local);for(let i=0;i<each_value.length;i+=1)transition_in(each_blocks[i]);transition_in(call_to_action_slot,local),div_intro||add_render_callback((()=>{div_intro=create_in_transition(div,fly,{duration:800,y:5}),div_intro.start()})),current=!0}},o(local){transition_out(title_slot_or_fallback,local),transition_out(description_slot_or_fallback,local),each_blocks=each_blocks.filter(Boolean);for(let i=0;i<each_blocks.length;i+=1)transition_out(each_blocks[i]);transition_out(call_to_action_slot,local),current=!1},d(detaching){detaching&&detach(div),title_slot_or_fallback&&title_slot_or_fallback.d(detaching),description_slot_or_fallback&&description_slot_or_fallback.d(detaching),destroy_each(each_blocks,detaching),call_to_action_slot&&call_to_action_slot.d(detaching)}}}function instance$6($$self,$$props,$$invalidate){let{$$slots:slots={},$$scope:$$scope}=$$props,{results:results=createResultObject(schema)}=$$props,{workingResults:workingResults=createResultObject(schema,results)}=$$props,{formattedResults:formattedResults=formatAnswersForResponse(schema,workingResults,inputFormatters)}=$$props;const $$binding_groups=[[]];return $$self.$$set=$$props=>{"results"in $$props&&$$invalidate(2,results=$$props.results),"workingResults"in $$props&&$$invalidate(0,workingResults=$$props.workingResults),"formattedResults"in $$props&&$$invalidate(1,formattedResults=$$props.formattedResults),"$$scope"in $$props&&$$invalidate(3,$$scope=$$props.$$scope)},$$self.$$.update=()=>{1&$$self.$$.dirty&&$$invalidate(0,workingResults=createResultObject(schema,workingResults)),1&$$self.$$.dirty&&$$invalidate(1,formattedResults=formatAnswersForResponse(schema,workingResults,inputFormatters))},[workingResults,formattedResults,results,$$scope,slots,(question,e)=>{e.preventDefault(),$$invalidate(0,workingResults[question]=function(questionType){switch(questionType){case"text":return"";case"single":return;case"multi":return[];default:throw Error("question must have a type")}}(schema[question].type),workingResults)},(question,event)=>{$$invalidate(0,workingResults[question]=event.target.value,workingResults)},(question,event)=>{$$invalidate(0,workingResults[question]=event.target.value,workingResults)},(question,event)=>{$$invalidate(0,workingResults[question]=event.target.value,workingResults)},function(question){workingResults[question]=this.__value,$$invalidate(0,workingResults)},$$binding_groups,function(question,question_index){workingResults[question]=function(group,__value,checked){const value=new Set;for(let i=0;i<group.length;i+=1)group[i].checked&&value.add(group[i].__value);return checked||value.delete(__value),Array.from(value)}($$binding_groups[0][question_index],this.__value,this.checked),$$invalidate(0,workingResults)}]}class Content$1 extends SvelteComponent{constructor(options){super(),init(this,options,instance$6,create_fragment$7,safe_not_equal,{results:2,workingResults:0,formattedResults:1})}}function create_else_block$1(ctx){let p;return{c(){p=element("p"),p.textContent="Put your data to work and start building a better internet.",attr(p,"class","svelte-arhgw")},m(target,anchor){insert(target,p,anchor)},d(detaching){detaching&&detach(p)}}}function create_if_block$1(ctx){let p;return{c(){p=element("p"),p.textContent="Before you get started, please make sure you're comfortable with our privacy notice.",attr(p,"class","svelte-arhgw")},m(target,anchor){insert(target,p,anchor)},d(detaching){detaching&&detach(p)}}}function create_fragment$8(ctx){let div23,h2,t1,t2,hr,t3,h30,t5,p0,t7,div3,t23,h31,t25,p1,t27,div12,t73,h32,t75,p2,t77,div13,t86,h33,t88,p3,t90,div20,t115,h34,t117,p4,t119,div22,div23_intro;function select_block_type(ctx,dirty){return ctx[0]?create_if_block$1:create_else_block$1}let current_block_type=select_block_type(ctx),if_block=current_block_type(ctx);return{c(){div23=element("div"),h2=element("h2"),h2.textContent="Our Privacy Notice",t1=space(),if_block.c(),t2=space(),hr=element("hr"),t3=space(),h30=element("h3"),h30.textContent="Introduction",t5=space(),p0=element("p"),p0.textContent="In this notice, we detail what data Mozilla Rally collects and discloses, and why it does so.",t7=space(),div3=element("div"),div3.innerHTML='<img class="icon-block-left svelte-arhgw" width="84" src="img/new-platform.png" alt="Mozilla Rally is a new platform created to empower people to contribute their data towards &lt;b&gt;building a better internet"/> \n    <div class="icon-block-right svelte-arhgw">Mozilla Rally is a <b>new platform</b> created to empower people to \n      contribute their data towards <b>building a better internet</b>.</div> \n    <img class="icon-block-left svelte-arhgw" width="111" src="img/who-is-eligible.png" alt="It is currently available to Firefox users in the U.S. who are 19 or older."/> \n    <div class="icon-block-right svelte-arhgw" style="max-width: 514px;">It is currently available to Firefox users in the U.S. who are 19 or older.</div> \n    <img class="icon-block-left svelte-arhgw" width="83" src="img/notice-covers-rally.png" alt="It is currently available to Firefox users in the U.S. who are 19 or older."/> \n    <div class="icon-block-right svelte-arhgw"><b>This notice only covers Rally itself</b>, as each study will have a\n      unique privacy notice detailing how data is collected and handled in \n      that particular study. We also adhere to the <a href="https://www.mozilla.org/en-US/privacy/" target="_blank" rel="noopener noreferrer">Mozilla Privacy Policy</a>\n      for how we receive, handle, and share information.</div>',t23=space(),h31=element("h3"),h31.textContent="Types of Information We Collect",t25=space(),p1=element("p"),p1.textContent="We'll ask for your consent before we collect any of your info, which could include:",t27=space(),div12=element("div"),div12.innerHTML='<img class="icon-block-left svelte-arhgw" width="95" src="img/your-demographic-data.png" alt="It is currently available to Firefox users in the U.S. who are 19 or older."/> \n    <div class="icon-block-right svelte-arhgw"><h4 class="svelte-arhgw">Your Demographic Data</h4> \n      <div class="svelte-arhgw">This includes your <b>age</b>, <b>gender</b>, <b>race/ethnicity</b>, \n        <b>education level</b>, <b>household income</b>, and <b>zip code</b>.\n        This is entirely optional.</div></div> \n\n    <img class="icon-block-left svelte-arhgw" width="109" src="img/your-technical-data.png" alt="It is currently available to Firefox users in the U.S. who are 19 or older."/> \n    <div class="icon-block-right svelte-arhgw"><h4 class="svelte-arhgw">Your Device&#39;s Technical Data</h4> \n      <div class="svelte-arhgw">This includes your device&#39;s <b>operating system</b> and <b>IP address</b> (which we&#39;ll only hang on to temporarily).</div></div> \n\n    <img class="icon-block-left svelte-arhgw" width="97" src="img/your-interaction-data.png" alt="It is currently available to Firefox users in the U.S. who are 19 or older."/> \n    <div class="icon-block-right svelte-arhgw"><h4 class="svelte-arhgw">Your Interaction Data</h4> \n      <div class="svelte-arhgw">This includes your <b>interactions with Firefox</b>, like the number and type of Firefox Add-ons you have installed, \n        your interactions with the Rally add-on itself, or the duration of your active browsing session.</div></div> \n\n  <img class="icon-block-left svelte-arhgw" width="82" src="img/your-location-data.png" alt="It is currently available to Firefox users in the U.S. who are 19 or older."/> \n  <div class="icon-block-right svelte-arhgw"><h4 class="svelte-arhgw">Your Location Data</h4> \n    <div class="svelte-arhgw">This includes your <b>country</b>, <b>city</b>, and <b>state</b> location, which is\n      determined by your <b>IP address</b>.</div></div>',t73=space(),h32=element("h3"),h32.textContent="How We Use Your Information",t75=space(),p2=element("p"),p2.textContent="We use the information we collect for research and development, which could mean:",t77=space(),div13=element("div"),div13.innerHTML='<img class="icon-block-left align-start svelte-arhgw" width="125" src="img/how-we-use-your-information.png" alt="It is currently available to Firefox users in the U.S. who are 19 or older."/> \n    <ul class="mzp-u-list-styled icon-block-right svelte-arhgw"><li class="svelte-arhgw">determining which Rally participants could be eligible to participate\n        in particular research studies, should they choose to enroll</li> \n      <li class="svelte-arhgw">ensuring that the data we collect represents the diverse communities\n        that use the internet</li> \n      <li class="svelte-arhgw">improving Mozilla&#39;s existing products and services</li> \n      <li class="svelte-arhgw">creating and developing new products</li></ul>',t86=space(),h33=element("h3"),h33.textContent="Who We May Share Information With",t88=space(),p3=element("p"),p3.textContent="We may share information with trusted entities that help us fulfill our mission, including:",t90=space(),div20=element("div"),div20.innerHTML='<img class="icon-block-left svelte-arhgw" width="99" src="img/data-storage-provider.png" alt="It is currently available to Firefox users in the U.S. who are 19 or older."/> \n    <div class="icon-block-right svelte-arhgw"><h4 class="svelte-arhgw">Our Data Storage Provider</h4> \n\n      <div class="svelte-arhgw">We use Google&#39;s cloud storage service to store the data collected\n        through Rally. Google only stores Rally data and <b>cannot use that\n          data for its own purposes</b>.</div></div> \n\n    <img class="icon-block-left svelte-arhgw" width="117" src="img/our-research-collaborators.png" alt="It is currently available to Firefox users in the U.S. who are 19 or older."/> \n    <div class="icon-block-right svelte-arhgw"><h4 class="svelte-arhgw">Our Research Collaborators</h4> \n\n      <div class="svelte-arhgw">Rally collaborates with trusted third parties to build and release studies. \n        For any studies you join, we may ask you to share the data collected\n        under <b>this Privacy Notice</b> with third party researcher(s)\n        administering the study. Our research collaborators are under contracts\n        with Mozilla to ensure that <b>your data is protected</b> and handled only\n        in ways we&#39;ve approved.</div></div> \n\n    <img class="icon-block-left svelte-arhgw" width="118" src="img/people-like-you.png" alt="It is currently available to Firefox users in the U.S. who are 19 or older."/> \n    <div class="icon-block-right svelte-arhgw"><h4 class="svelte-arhgw">People Like You (only aggregated data)</h4> \n\n      <div class="svelte-arhgw">Our mission is focused on <b>empowering everyday citizens</b>, not just a\n        select few. To that end, we may release aggregated, de-identified data sets\n        to help further public knowledge on certain issues. These\n        data sets will be <b>stripped of any identifiable data</b>, and won&#39;t reveal\n        anything about individual users.</div></div>',t115=space(),h34=element("h3"),h34.textContent="How You Can Manage Your Data",t117=space(),p4=element("p"),p4.textContent='Our "opt-in" approach to data collection means that you choose which data you share with us.',t119=space(),div22=element("div"),div22.innerHTML='<img class="icon-block-left svelte-arhgw" width="96" src="img/manage-your-data.png" alt="It is currently available to Firefox users in the U.S. who are 19 or older."/> \n    \n    <div class="icon-block-right svelte-arhgw"><p class="svelte-arhgw">Rally operates based on <b>your participation</b> â€“ meaning you can\n    choose to disclose the level of information you&#39;re comfortable with, either by finding a study\n  that matches your level of comfort or by declining to share demographic information in your profile. <br/><a target="_blank" rel="noopener noreferrer" href="https://support.mozilla.org/en-US/kb/mozilla-rally-managing-account-data">Learn more about managing your data</a>.</p> \n  <p class="svelte-arhgw">If you have any other questions regarding our privacy practices, please contact us at <a href="mailto:compliance@mozilla.com">compliance@mozilla.com</a>.</p></div>',attr(h2,"class","section-header svelte-arhgw"),attr(hr,"class","svelte-arhgw"),attr(h30,"class","svelte-arhgw"),attr(p0,"class","svelte-arhgw"),attr(div3,"class","icon-explanation-block svelte-arhgw"),attr(h31,"class","svelte-arhgw"),attr(p1,"class","svelte-arhgw"),attr(div12,"class","icon-explanation-block svelte-arhgw"),attr(h32,"class","svelte-arhgw"),attr(p2,"class","svelte-arhgw"),attr(div13,"class","icon-explanation-block svelte-arhgw"),attr(h33,"class","svelte-arhgw"),attr(p3,"class","svelte-arhgw"),attr(div20,"class","icon-explanation-block svelte-arhgw"),attr(h34,"class","svelte-arhgw"),attr(p4,"class","svelte-arhgw"),attr(div22,"class","icon-explanation-block svelte-arhgw"),set_style(div22,"padding-bottom","48px"),attr(div23,"class","svelte-arhgw")},m(target,anchor){insert(target,div23,anchor),append(div23,h2),append(div23,t1),if_block.m(div23,null),append(div23,t2),append(div23,hr),append(div23,t3),append(div23,h30),append(div23,t5),append(div23,p0),append(div23,t7),append(div23,div3),append(div23,t23),append(div23,h31),append(div23,t25),append(div23,p1),append(div23,t27),append(div23,div12),append(div23,t73),append(div23,h32),append(div23,t75),append(div23,p2),append(div23,t77),append(div23,div13),append(div23,t86),append(div23,h33),append(div23,t88),append(div23,p3),append(div23,t90),append(div23,div20),append(div23,t115),append(div23,h34),append(div23,t117),append(div23,p4),append(div23,t119),append(div23,div22)},p(ctx,[dirty]){current_block_type!==(current_block_type=select_block_type(ctx))&&(if_block.d(1),if_block=current_block_type(ctx),if_block&&(if_block.c(),if_block.m(div23,t2)))},i(local){div23_intro||add_render_callback((()=>{div23_intro=create_in_transition(div23,fly,{duration:800,y:5}),div23_intro.start()}))},o:noop,d(detaching){detaching&&detach(div23),if_block.d()}}}function instance$7($$self,$$props,$$invalidate){let{onboarding:onboarding=!0}=$$props;return $$self.$$set=$$props=>{"onboarding"in $$props&&$$invalidate(0,onboarding=$$props.onboarding)},[onboarding]}class Content$2 extends SvelteComponent{constructor(options){super(),init(this,options,instance$7,create_fragment$8,safe_not_equal,{onboarding:0})}}function get_each_context$1(ctx,list,i){const child_ctx=ctx.slice();return child_ctx[12]=list[i],child_ctx}function create_each_block$1(ctx){let div;return{c(){div=element("div"),attr(div,"class","onboarding-cta-step svelte-19c5yc3"),set_style(div,"opacity",ctx[12]+1===ctx[0]?"1":".25")},m(target,anchor){insert(target,div,anchor)},p(ctx,dirty){3&dirty&&set_style(div,"opacity",ctx[12]+1===ctx[0]?"1":".25")},d(detaching){detaching&&detach(div)}}}function create_fragment$9(ctx){let scrolling_timeout,div2,div0,t,div1,current,mounted,dispose,scrolling=!1,clear_scrolling=()=>{scrolling=!1};add_render_callback(ctx[10]),add_render_callback(ctx[11]);const default_slot_template=ctx[9].default,default_slot=create_slot(default_slot_template,ctx,ctx[8],null);let each_value=Array.from({length:ctx[1]}).map(func),each_blocks=[];for(let i=0;i<each_value.length;i+=1)each_blocks[i]=create_each_block$1(get_each_context$1(ctx,each_value,i));return{c(){div2=element("div"),div0=element("div"),default_slot&&default_slot.c(),t=space(),div1=element("div");for(let i=0;i<each_blocks.length;i+=1)each_blocks[i].c();attr(div0,"class","onboarding-cta-inner svelte-19c5yc3"),attr(div1,"class","onboarding-cta-steps svelte-19c5yc3"),attr(div2,"class","onboarding-cta-container svelte-19c5yc3"),attr(div2,"style",ctx[4])},m(target,anchor){insert(target,div2,anchor),append(div2,div0),default_slot&&default_slot.m(div0,null),append(div2,t),append(div2,div1);for(let i=0;i<each_blocks.length;i+=1)each_blocks[i].m(div1,null);current=!0,mounted||(dispose=[listen(window,"scroll",(()=>{scrolling=!0,clearTimeout(scrolling_timeout),scrolling_timeout=setTimeout(clear_scrolling,100),ctx[10]()})),listen(window,"resize",ctx[11])],mounted=!0)},p(ctx,[dirty]){if(4&dirty&&!scrolling&&(scrolling=!0,clearTimeout(scrolling_timeout),scrollTo(window.pageXOffset,ctx[2]),scrolling_timeout=setTimeout(clear_scrolling,100)),default_slot&&default_slot.p&&(!current||256&dirty)&&update_slot(default_slot,default_slot_template,ctx,ctx[8],dirty,null,null),3&dirty){let i;for(each_value=Array.from({length:ctx[1]}).map(func),i=0;i<each_value.length;i+=1){const child_ctx=get_each_context$1(ctx,each_value,i);each_blocks[i]?each_blocks[i].p(child_ctx,dirty):(each_blocks[i]=create_each_block$1(child_ctx),each_blocks[i].c(),each_blocks[i].m(div1,null))}for(;i<each_blocks.length;i+=1)each_blocks[i].d(1);each_blocks.length=each_value.length}(!current||16&dirty)&&attr(div2,"style",ctx[4])},i(local){current||(transition_in(default_slot,local),current=!0)},o(local){transition_out(default_slot,local),current=!1},d(detaching){detaching&&detach(div2),default_slot&&default_slot.d(detaching),destroy_each(each_blocks,detaching),mounted=!1,run_all(dispose)}}}const func=(_,i)=>i;function instance$8($$self,$$props,$$invalidate){let gradient,style,{$$slots:slots={},$$scope:$$scope}=$$props,{step:step=1}=$$props,{totalSteps:totalSteps=3}=$$props,{transparent:transparent=!1}=$$props,scrollY=0,innerHeight=0,bodyHeight=0;return onMount((()=>{$$invalidate(6,bodyHeight=document.body.clientHeight);new ResizeObserver((([e])=>{$$invalidate(6,bodyHeight=e.contentRect.height)})).observe(document.body)})),$$self.$$set=$$props=>{"step"in $$props&&$$invalidate(0,step=$$props.step),"totalSteps"in $$props&&$$invalidate(1,totalSteps=$$props.totalSteps),"transparent"in $$props&&$$invalidate(5,transparent=$$props.transparent),"$$scope"in $$props&&$$invalidate(8,$$scope=$$props.$$scope)},$$self.$$.update=()=>{76&$$self.$$.dirty&&$$invalidate(7,gradient=Math.min(1,(bodyHeight-(scrollY+innerHeight))/130)),160&$$self.$$.dirty&&$$invalidate(4,style=transparent?"--background: none":`\n--background: linear-gradient(\n    to bottom,\n    transparent 0%,\n    rgba(249, 249, 251, ${gradient}) 45%\n  );\n`)},[step,totalSteps,scrollY,innerHeight,style,transparent,bodyHeight,gradient,$$scope,slots,function(){$$invalidate(2,scrollY=window.pageYOffset)},function(){$$invalidate(3,innerHeight=window.innerHeight)}]}class OnboardingCTAContainer extends SvelteComponent{constructor(options){super(),init(this,options,instance$8,create_fragment$9,safe_not_equal,{step:0,totalSteps:1,transparent:5})}}function create_fragment$a(ctx){let svg,path0,path0_intro,path0_outro,g,path1,g_intro,g_outro,defs,linearGradient,stop0,stop1,stop2,current;return{c(){svg=svg_element("svg"),path0=svg_element("path"),g=svg_element("g"),path1=svg_element("path"),defs=svg_element("defs"),linearGradient=svg_element("linearGradient"),stop0=svg_element("stop"),stop1=svg_element("stop"),stop2=svg_element("stop"),attr(path0,"d","M1 127.619C21.591 127.619 45.2219 104 48 86.6193C50.7781 69.2386 49 52.5 37 52.5C25 52.5 24.5 64.7377 39 67.5C53.5 70.2623 90 42.8807 21 6"),attr(path0,"stroke","url(#paint0_linear)"),attr(path0,"stroke-width","2"),attr(path0,"stroke-linecap","round"),attr(path1,"d","M16.7936 6.80449C16.2329 5.50077 15.0019 2.53349 15.5375 1.87833C16.1876 1.08304 17.9814 1.6468 20.0777 2.08646C21.8484 2.45783 24.5709 2.9662 24.3878 4.0835C24.2626 4.84797 21.9746 4.79424 20.8596 6.12262C20.0794 7.05222 19.8038 9.26208 19.0255 9.56392C18.2472 9.86577 17.3544 8.10822 16.7936 6.80449Z"),attr(path1,"fill","#F53A68"),attr(stop0,"stop-color","#FF9100"),attr(stop1,"offset","0.489583"),attr(stop1,"stop-color","#F10366"),attr(stop2,"offset","1"),attr(stop2,"stop-color","#6173FF"),attr(linearGradient,"id","paint0_linear"),attr(linearGradient,"x1","50.7846"),attr(linearGradient,"y1","-43.3675"),attr(linearGradient,"x2","-35.6052"),attr(linearGradient,"y2","104.653"),attr(linearGradient,"gradientUnits","userSpaceOnUse"),attr(svg,"width","63"),attr(svg,"height","129"),attr(svg,"viewBox","0 0 63 129"),attr(svg,"fill","none"),attr(svg,"xmlns","http://www.w3.org/2000/svg")},m(target,anchor){insert(target,svg,anchor),append(svg,path0),append(svg,g),append(g,path1),append(svg,defs),append(defs,linearGradient),append(linearGradient,stop0),append(linearGradient,stop1),append(linearGradient,stop2),current=!0},p(new_ctx,[dirty]){ctx=new_ctx},i(local){current||(add_render_callback((()=>{path0_outro&&path0_outro.end(1),path0_intro||(path0_intro=create_in_transition(path0,draw,{duration:1e3,delay:ctx[0]})),path0_intro.start()})),add_render_callback((()=>{g_outro&&g_outro.end(1),g_intro||(g_intro=create_in_transition(g,fly,{x:10,y:5,delay:800+ctx[0],opacity:0})),g_intro.start()})),current=!0)},o(local){path0_intro&&path0_intro.invalidate(),local&&(path0_outro=create_out_transition(path0,draw,{duration:500,delay:ctx[0]})),g_intro&&g_intro.invalidate(),local&&(g_outro=create_out_transition(g,fly,{duration:350,delay:ctx[0],x:20,y:10})),current=!1},d(detaching){detaching&&detach(svg),detaching&&path0_outro&&path0_outro.end(),detaching&&g_outro&&g_outro.end()}}}function instance$9($$self,$$props,$$invalidate){let{delay:delay=0}=$$props;return $$self.$$set=$$props=>{"delay"in $$props&&$$invalidate(0,delay=$$props.delay)},[delay]}class Arrow02 extends SvelteComponent{constructor(options){super(),init(this,options,instance$9,create_fragment$a,safe_not_equal,{delay:0})}}function create_default_slot_1(ctx){let t;return{c(){t=text("Save & Continue")},m(target,anchor){insert(target,t,anchor)},d(detaching){detaching&&detach(t)}}}function create_default_slot(ctx){let t;return{c(){t=text("Skip for Now")},m(target,anchor){insert(target,t,anchor)},d(detaching){detaching&&detach(t)}}}function create_if_block$2(ctx){let div0,div0_transition,t2,div1,arrow02,current;return arrow02=new Arrow02({}),{c(){div0=element("div"),div0.innerHTML="the following 7<br/> questions are optional",t2=space(),div1=element("div"),create_component(arrow02.$$.fragment),attr(div0,"class","shortcut-callout"),set_style(div0,"text-align","right"),attr(div1,"class","arrow svelte-kwlg2v")},m(target,anchor){insert(target,div0,anchor),insert(target,t2,anchor),insert(target,div1,anchor),mount_component(arrow02,div1,null),current=!0},i(local){current||(local&&add_render_callback((()=>{div0_transition||(div0_transition=create_bidirectional_transition(div0,fade,{duration:400},!0)),div0_transition.run(1)})),transition_in(arrow02.$$.fragment,local),current=!0)},o(local){local&&(div0_transition||(div0_transition=create_bidirectional_transition(div0,fade,{duration:400},!1)),div0_transition.run(0)),transition_out(arrow02.$$.fragment,local),current=!1},d(detaching){detaching&&detach(div0),detaching&&div0_transition&&div0_transition.end(),detaching&&detach(t2),detaching&&detach(div1),destroy_component(arrow02)}}}function create_fragment$b(ctx){let scrolling_timeout,div,button0,t0,button1,t1,div_intro,current,mounted,dispose,scrolling=!1,clear_scrolling=()=>{scrolling=!1};add_render_callback(ctx[4]),button0=new Button({props:{size:"xl",product:!0,$$slots:{default:[create_default_slot_1]},$$scope:{ctx:ctx}}}),button0.$on("click",ctx[5]),button1=new Button({props:{size:"xl",product:!0,secondary:!0,$$slots:{default:[create_default_slot]},$$scope:{ctx:ctx}}}),button1.$on("click",ctx[6]);let if_block=ctx[1]&ctx[2]&&create_if_block$2();return{c(){div=element("div"),create_component(button0.$$.fragment),t0=space(),create_component(button1.$$.fragment),t1=space(),if_block&&if_block.c(),attr(div,"class","call-flow svelte-kwlg2v")},m(target,anchor){insert(target,div,anchor),mount_component(button0,div,null),append(div,t0),mount_component(button1,div,null),append(div,t1),if_block&&if_block.m(div,null),current=!0,mounted||(dispose=[listen(window,"scroll",(()=>{scrolling=!0,clearTimeout(scrolling_timeout),scrolling_timeout=setTimeout(clear_scrolling,100),ctx[4]()})),listen(div,"introend",ctx[7])],mounted=!0)},p(ctx,[dirty]){1&dirty&&!scrolling&&(scrolling=!0,clearTimeout(scrolling_timeout),scrollTo(window.pageXOffset,ctx[0]),scrolling_timeout=setTimeout(clear_scrolling,100));const button0_changes={};256&dirty&&(button0_changes.$$scope={dirty:dirty,ctx:ctx}),button0.$set(button0_changes);const button1_changes={};256&dirty&&(button1_changes.$$scope={dirty:dirty,ctx:ctx}),button1.$set(button1_changes),ctx[1]&ctx[2]?if_block?6&dirty&&transition_in(if_block,1):(if_block=create_if_block$2(),if_block.c(),transition_in(if_block,1),if_block.m(div,null)):if_block&&(group_outros(),transition_out(if_block,1,1,(()=>{if_block=null})),check_outros())},i(local){current||(transition_in(button0.$$.fragment,local),transition_in(button1.$$.fragment,local),transition_in(if_block),div_intro||add_render_callback((()=>{div_intro=create_in_transition(div,fly,{duration:200,y:5}),div_intro.start()})),current=!0)},o(local){transition_out(button0.$$.fragment,local),transition_out(button1.$$.fragment,local),transition_out(if_block),current=!1},d(detaching){detaching&&detach(div),destroy_component(button0),destroy_component(button1),if_block&&if_block.d(),mounted=!1,run_all(dispose)}}}function instance$a($$self,$$props,$$invalidate){const dispatch=createEventDispatcher();let scrollY=0,showArrow=!0,intro=!1;return $$self.$$.update=()=>{1&$$self.$$.dirty&&$$invalidate(1,showArrow=!(scrollY>20))},[scrollY,showArrow,intro,dispatch,function(){$$invalidate(0,scrollY=window.pageYOffset)},()=>dispatch("save"),()=>dispatch("skip"),()=>{$$invalidate(2,intro=!0)}]}class CallToAction extends SvelteComponent{constructor(options){super(),init(this,options,instance$a,create_fragment$b,safe_not_equal,{})}}function create_fragment$c(ctx){let svg,path0,path0_intro,path0_outro,g,path1,g_intro,g_outro,defs,linearGradient,stop0,stop1,stop2,current;return{c(){svg=svg_element("svg"),path0=svg_element("path"),g=svg_element("g"),path1=svg_element("path"),defs=svg_element("defs"),linearGradient=svg_element("linearGradient"),stop0=svg_element("stop"),stop1=svg_element("stop"),stop2=svg_element("stop"),attr(path0,"d","M1 176C26.3297 176 57 169.224 57 126C57 99.847 37.5 90 33 107C30.1049 117.937 45.3328 163.572 86.4877 134.123C119.5 110.5 117.91 17.9607 72 4.50003"),attr(path0,"stroke","url(#paint0_linear)"),attr(path0,"stroke-width","2"),attr(path0,"stroke-linecap","round"),attr(path1,"d","M69.2988 6.44407C68.4185 5.33089 66.4586 2.78549 66.8055 2.01365C67.2266 1.07674 69.1053 1.15493 71.2439 1.03466C73.0503 0.933065 75.8113 0.716407 75.9249 1.8429C76.0026 2.61366 73.7793 3.15641 73.0479 4.72891C72.5361 5.82934 72.8443 8.03488 72.1712 8.52863C71.4981 9.02238 70.1792 7.55726 69.2988 6.44407Z"),attr(path1,"fill","#FF9101"),attr(stop0,"stop-color","#FF9100"),attr(stop1,"offset","0.489583"),attr(stop1,"stop-color","#F10366"),attr(stop2,"offset","1"),attr(stop2,"stop-color","#6173FF"),attr(linearGradient,"id","paint0_linear"),attr(linearGradient,"x1","69.5015"),attr(linearGradient,"y1","5.00034"),attr(linearGradient,"x2","1.00103"),attr(linearGradient,"y2","176"),attr(linearGradient,"gradientUnits","userSpaceOnUse"),attr(svg,"width","111"),attr(svg,"height","177"),attr(svg,"viewBox","0 0 111 177"),attr(svg,"fill","none"),attr(svg,"xmlns","http://www.w3.org/2000/svg")},m(target,anchor){insert(target,svg,anchor),append(svg,path0),append(svg,g),append(g,path1),append(svg,defs),append(defs,linearGradient),append(linearGradient,stop0),append(linearGradient,stop1),append(linearGradient,stop2),current=!0},p(new_ctx,[dirty]){},i(local){current||(add_render_callback((()=>{path0_outro&&path0_outro.end(1),path0_intro||(path0_intro=create_in_transition(path0,draw,{duration:1e3,delay:delay})),path0_intro.start()})),add_render_callback((()=>{g_outro&&g_outro.end(1),g_intro||(g_intro=create_in_transition(g,fly,{x:10,y:5,delay:800+delay,opacity:0})),g_intro.start()})),current=!0)},o(local){path0_intro&&path0_intro.invalidate(),local&&(path0_outro=create_out_transition(path0,draw,{duration:500,delay:delay})),g_intro&&g_intro.invalidate(),local&&(g_outro=create_out_transition(g,fly,{duration:350,delay:delay,x:20,y:10})),current=!1},d(detaching){detaching&&detach(svg),detaching&&path0_outro&&path0_outro.end(),detaching&&g_outro&&g_outro.end()}}}let delay=0;class Arrow01 extends SvelteComponent{constructor(options){super(),init(this,options,null,create_fragment$c,safe_not_equal,{})}}function create_default_slot_1$1(ctx){let t;return{c(){t=text("Accept & Enroll")},m(target,anchor){insert(target,t,anchor)},d(detaching){detaching&&detach(t)}}}function create_default_slot$1(ctx){let t;return{c(){t=text("Cancel")},m(target,anchor){insert(target,t,anchor)},d(detaching){detaching&&detach(t)}}}function create_if_block$3(ctx){let div0,div0_transition,t1,div1,arrow01,current;return arrow01=new Arrow01({}),{c(){div0=element("div"),div0.textContent="please read through before accepting",t1=space(),div1=element("div"),create_component(arrow01.$$.fragment),attr(div0,"class","shortcut-callout"),set_style(div0,"text-align","right"),attr(div1,"class","arrow svelte-150niqm")},m(target,anchor){insert(target,div0,anchor),insert(target,t1,anchor),insert(target,div1,anchor),mount_component(arrow01,div1,null),current=!0},i(local){current||(add_render_callback((()=>{div0_transition||(div0_transition=create_bidirectional_transition(div0,fade,{duration:400},!0)),div0_transition.run(1)})),transition_in(arrow01.$$.fragment,local),current=!0)},o(local){div0_transition||(div0_transition=create_bidirectional_transition(div0,fade,{duration:400},!1)),div0_transition.run(0),transition_out(arrow01.$$.fragment,local),current=!1},d(detaching){detaching&&detach(div0),detaching&&div0_transition&&div0_transition.end(),detaching&&detach(t1),detaching&&detach(div1),destroy_component(arrow01)}}}function create_fragment$d(ctx){let scrolling_timeout,div,button0,t0,button1,t1,div_intro,div_outro,current,mounted,dispose,scrolling=!1,clear_scrolling=()=>{scrolling=!1};add_render_callback(ctx[4]),button0=new Button({props:{size:"xl",product:!0,$$slots:{default:[create_default_slot_1$1]},$$scope:{ctx:ctx}}}),button0.$on("click",ctx[5]),button1=new Button({props:{size:"xl",product:!0,secondary:!0,$$slots:{default:[create_default_slot$1]},$$scope:{ctx:ctx}}}),button1.$on("click",ctx[6]);let if_block=ctx[1]&&ctx[2]&&create_if_block$3();return{c(){div=element("div"),create_component(button0.$$.fragment),t0=space(),create_component(button1.$$.fragment),t1=space(),if_block&&if_block.c(),attr(div,"class","call-flow svelte-150niqm")},m(target,anchor){insert(target,div,anchor),mount_component(button0,div,null),append(div,t0),mount_component(button1,div,null),append(div,t1),if_block&&if_block.m(div,null),current=!0,mounted||(dispose=[listen(window,"scroll",(()=>{scrolling=!0,clearTimeout(scrolling_timeout),scrolling_timeout=setTimeout(clear_scrolling,100),ctx[4]()})),listen(div,"introend",ctx[7])],mounted=!0)},p(ctx,[dirty]){1&dirty&&!scrolling&&(scrolling=!0,clearTimeout(scrolling_timeout),scrollTo(window.pageXOffset,ctx[0]),scrolling_timeout=setTimeout(clear_scrolling,100));const button0_changes={};256&dirty&&(button0_changes.$$scope={dirty:dirty,ctx:ctx}),button0.$set(button0_changes);const button1_changes={};256&dirty&&(button1_changes.$$scope={dirty:dirty,ctx:ctx}),button1.$set(button1_changes),ctx[1]&&ctx[2]?if_block?6&dirty&&transition_in(if_block,1):(if_block=create_if_block$3(),if_block.c(),transition_in(if_block,1),if_block.m(div,null)):if_block&&(group_outros(),transition_out(if_block,1,1,(()=>{if_block=null})),check_outros())},i(local){current||(transition_in(button0.$$.fragment,local),transition_in(button1.$$.fragment,local),transition_in(if_block),add_render_callback((()=>{div_outro&&div_outro.end(1),div_intro||(div_intro=create_in_transition(div,fly,{duration:200,y:5})),div_intro.start()})),current=!0)},o(local){transition_out(button0.$$.fragment,local),transition_out(button1.$$.fragment,local),transition_out(if_block),div_intro&&div_intro.invalidate(),div_outro=create_out_transition(div,fly,{duration:200,y:-5}),current=!1},d(detaching){detaching&&detach(div),destroy_component(button0),destroy_component(button1),if_block&&if_block.d(),detaching&&div_outro&&div_outro.end(),mounted=!1,run_all(dispose)}}}function instance$b($$self,$$props,$$invalidate){const dispatch=createEventDispatcher();let scrollY=0,showArrow=!0,intro=!1;return $$self.$$.update=()=>{1&$$self.$$.dirty&&$$invalidate(1,showArrow=!(scrollY>20))},[scrollY,showArrow,intro,dispatch,function(){$$invalidate(0,scrollY=window.pageYOffset)},()=>dispatch("accept"),()=>dispatch("cancel"),()=>{$$invalidate(2,intro=!0)}]}class CallToAction$1 extends SvelteComponent{constructor(options){super(),init(this,options,instance$b,create_fragment$d,safe_not_equal,{})}}function create_if_block$4(ctx){let div,layout,current;return layout=new OnboardingLayout({props:{$$slots:{default:[create_default_slot$2]},$$scope:{ctx:ctx}}}),{c(){div=element("div"),create_component(layout.$$.fragment)},m(target,anchor){insert(target,div,anchor),mount_component(layout,div,null),current=!0},p(ctx,dirty){const layout_changes={};16407&dirty&&(layout_changes.$$scope={dirty:dirty,ctx:ctx}),layout.$set(layout_changes)},i(local){current||(transition_in(layout.$$.fragment,local),current=!0)},o(local){transition_out(layout.$$.fragment,local),current=!1},d(detaching){detaching&&detach(div),destroy_component(layout)}}}function create_if_block_5$1(ctx){let demographics,updating_formattedResults,current;function demographics_formattedResults_binding(value){ctx[9](value)}let demographics_props={};return void 0!==ctx[4]&&(demographics_props.formattedResults=ctx[4]),demographics=new Content$1({props:demographics_props}),binding_callbacks.push((()=>bind(demographics,"formattedResults",demographics_formattedResults_binding))),{c(){create_component(demographics.$$.fragment)},m(target,anchor){mount_component(demographics,target,anchor),current=!0},p(ctx,dirty){const demographics_changes={};!updating_formattedResults&&16&dirty&&(updating_formattedResults=!0,demographics_changes.formattedResults=ctx[4],add_flush_callback((()=>updating_formattedResults=!1))),demographics.$set(demographics_changes)},i(local){current||(transition_in(demographics.$$.fragment,local),current=!0)},o(local){transition_out(demographics.$$.fragment,local),current=!1},d(detaching){destroy_component(demographics,detaching)}}}function create_if_block_4$1(ctx){let termsofservice,current;return termsofservice=new Content$2({}),{c(){create_component(termsofservice.$$.fragment)},m(target,anchor){mount_component(termsofservice,target,anchor),current=!0},p:noop,i(local){current||(transition_in(termsofservice.$$.fragment,local),current=!0)},o(local){transition_out(termsofservice.$$.fragment,local),current=!1},d(detaching){destroy_component(termsofservice,detaching)}}}function create_if_block_3$1(ctx){let welcome,current;return welcome=new Content({props:{firstRunCompleted:ctx[1]}}),welcome.$on("user-signup-login-complete",ctx[8]),{c(){create_component(welcome.$$.fragment)},m(target,anchor){mount_component(welcome,target,anchor),current=!0},p(ctx,dirty){const welcome_changes={};2&dirty&&(welcome_changes.firstRunCompleted=ctx[1]),welcome.$set(welcome_changes)},i(local){current||(transition_in(welcome.$$.fragment,local),current=!0)},o(local){transition_out(welcome.$$.fragment,local),current=!1},d(detaching){destroy_component(welcome,detaching)}}}function create_default_slot_2(ctx){let current_block_type_index,if_block,if_block_anchor,current;const if_block_creators=[create_if_block_3$1,create_if_block_4$1,create_if_block_5$1],if_blocks=[];function select_block_type(ctx,dirty){return"welcome"===ctx[0]?0:"terms"===ctx[0]?1:"demographics"===ctx[0]?2:-1}return~(current_block_type_index=select_block_type(ctx))&&(if_block=if_blocks[current_block_type_index]=if_block_creators[current_block_type_index](ctx)),{c(){if_block&&if_block.c(),if_block_anchor=empty()},m(target,anchor){~current_block_type_index&&if_blocks[current_block_type_index].m(target,anchor),insert(target,if_block_anchor,anchor),current=!0},p(ctx,dirty){let previous_block_index=current_block_type_index;current_block_type_index=select_block_type(ctx),current_block_type_index===previous_block_index?~current_block_type_index&&if_blocks[current_block_type_index].p(ctx,dirty):(if_block&&(group_outros(),transition_out(if_blocks[previous_block_index],1,1,(()=>{if_blocks[previous_block_index]=null})),check_outros()),~current_block_type_index?(if_block=if_blocks[current_block_type_index],if_block?if_block.p(ctx,dirty):(if_block=if_blocks[current_block_type_index]=if_block_creators[current_block_type_index](ctx),if_block.c()),transition_in(if_block,1),if_block.m(if_block_anchor.parentNode,if_block_anchor)):if_block=null)},i(local){current||(transition_in(if_block),current=!0)},o(local){transition_out(if_block),current=!1},d(detaching){~current_block_type_index&&if_blocks[current_block_type_index].d(detaching),detaching&&detach(if_block_anchor)}}}function create_if_block_2$1(ctx){let demographicscalltoaction,current;return demographicscalltoaction=new CallToAction({}),demographicscalltoaction.$on("save",ctx[12]),demographicscalltoaction.$on("skip",ctx[7]),{c(){create_component(demographicscalltoaction.$$.fragment)},m(target,anchor){mount_component(demographicscalltoaction,target,anchor),current=!0},p:noop,i(local){current||(transition_in(demographicscalltoaction.$$.fragment,local),current=!0)},o(local){transition_out(demographicscalltoaction.$$.fragment,local),current=!1},d(detaching){destroy_component(demographicscalltoaction,detaching)}}}function create_if_block_1$1(ctx){let termscalltoaction,current;return termscalltoaction=new CallToAction$1({}),termscalltoaction.$on("accept",ctx[10]),termscalltoaction.$on("cancel",ctx[11]),{c(){create_component(termscalltoaction.$$.fragment)},m(target,anchor){mount_component(termscalltoaction,target,anchor),current=!0},p:noop,i(local){current||(transition_in(termscalltoaction.$$.fragment,local),current=!0)},o(local){transition_out(termscalltoaction.$$.fragment,local),current=!1},d(detaching){destroy_component(termscalltoaction,detaching)}}}function create_default_slot_1$2(ctx){let current_block_type_index,if_block,if_block_anchor,current;const if_block_creators=[create_if_block_1$1,create_if_block_2$1],if_blocks=[];function select_block_type_1(ctx,dirty){return"terms"===ctx[0]?0:"demographics"===ctx[0]?1:-1}return~(current_block_type_index=select_block_type_1(ctx))&&(if_block=if_blocks[current_block_type_index]=if_block_creators[current_block_type_index](ctx)),{c(){if_block&&if_block.c(),if_block_anchor=empty()},m(target,anchor){~current_block_type_index&&if_blocks[current_block_type_index].m(target,anchor),insert(target,if_block_anchor,anchor),current=!0},p(ctx,dirty){let previous_block_index=current_block_type_index;current_block_type_index=select_block_type_1(ctx),current_block_type_index===previous_block_index?~current_block_type_index&&if_blocks[current_block_type_index].p(ctx,dirty):(if_block&&(group_outros(),transition_out(if_blocks[previous_block_index],1,1,(()=>{if_blocks[previous_block_index]=null})),check_outros()),~current_block_type_index?(if_block=if_blocks[current_block_type_index],if_block?if_block.p(ctx,dirty):(if_block=if_blocks[current_block_type_index]=if_block_creators[current_block_type_index](ctx),if_block.c()),transition_in(if_block,1),if_block.m(if_block_anchor.parentNode,if_block_anchor)):if_block=null)},i(local){current||(transition_in(if_block),current=!0)},o(local){transition_out(if_block),current=!1},d(detaching){~current_block_type_index&&if_blocks[current_block_type_index].d(detaching),detaching&&detach(if_block_anchor)}}}function create_default_slot$2(ctx){let main,t,onboardingctacontainer,current;return main=new OnboardingBody({props:{padForOnboarding:"welcome"!==ctx[0],$$slots:{default:[create_default_slot_2]},$$scope:{ctx:ctx}}}),onboardingctacontainer=new OnboardingCTAContainer({props:{step:step(ctx[0]),transparent:"welcome"===ctx[0],$$slots:{default:[create_default_slot_1$2]},$$scope:{ctx:ctx}}}),{c(){create_component(main.$$.fragment),t=space(),create_component(onboardingctacontainer.$$.fragment)},m(target,anchor){mount_component(main,target,anchor),insert(target,t,anchor),mount_component(onboardingctacontainer,target,anchor),current=!0},p(ctx,dirty){const main_changes={};1&dirty&&(main_changes.padForOnboarding="welcome"!==ctx[0]),16407&dirty&&(main_changes.$$scope={dirty:dirty,ctx:ctx}),main.$set(main_changes);const onboardingctacontainer_changes={};1&dirty&&(onboardingctacontainer_changes.step=step(ctx[0])),1&dirty&&(onboardingctacontainer_changes.transparent="welcome"===ctx[0]),16401&dirty&&(onboardingctacontainer_changes.$$scope={dirty:dirty,ctx:ctx}),onboardingctacontainer.$set(onboardingctacontainer_changes)},i(local){current||(transition_in(main.$$.fragment,local),transition_in(onboardingctacontainer.$$.fragment,local),current=!0)},o(local){transition_out(main.$$.fragment,local),transition_out(onboardingctacontainer.$$.fragment,local),current=!1},d(detaching){destroy_component(main,detaching),detaching&&detach(t),destroy_component(onboardingctacontainer,detaching)}}}function create_fragment$e(ctx){let if_block_anchor,current,if_block=ctx[3]&&create_if_block$4(ctx);return{c(){if_block&&if_block.c(),if_block_anchor=empty()},m(target,anchor){if_block&&if_block.m(target,anchor),insert(target,if_block_anchor,anchor),current=!0},p(ctx,[dirty]){ctx[3]?if_block?(if_block.p(ctx,dirty),8&dirty&&transition_in(if_block,1)):(if_block=create_if_block$4(ctx),if_block.c(),transition_in(if_block,1),if_block.m(if_block_anchor.parentNode,if_block_anchor)):if_block&&(group_outros(),transition_out(if_block,1,1,(()=>{if_block=null})),check_outros())},i(local){current||(transition_in(if_block),current=!0)},o(local){transition_out(if_block),current=!1},d(detaching){if_block&&if_block.d(detaching),detaching&&detach(if_block_anchor)}}}function step(w){return"welcome"===w?1:"terms"===w?2:"demographics"===w?3:1}function instance$c($$self,$$props,$$invalidate){let $store,{view:view="welcome"}=$$props,{firstRunCompleted:firstRunCompleted=!1}=$$props,mounted=!1;const store=getContext("rally:store");component_subscribe($$self,store,(value=>$$invalidate(2,$store=value)));const dispatch=createEventDispatcher();function send(next){$$invalidate(0,view=next),window.scrollTo(0,0)}function finishOnboarding(){dispatch("onboarding-complete")}let formattedResults;onMount((()=>{$$invalidate(3,mounted=!0),dispatch("first-run-initiated")}));return $$self.$$set=$$props=>{"view"in $$props&&$$invalidate(0,view=$$props.view),"firstRunCompleted"in $$props&&$$invalidate(1,firstRunCompleted=$$props.firstRunCompleted)},$$self.$$.update=()=>{5&$$self.$$.dirty&&"welcome"===view&&$store.user&&$store.user.uid&&$store.user.enrolled&&finishOnboarding(),5&$$self.$$.dirty&&"welcome"===view&&$store.user&&$store.user.uid&&!$store.user.enrolled&&send("terms")},[view,firstRunCompleted,$store,mounted,formattedResults,store,send,finishOnboarding,()=>{$store.user&&send("terms")},function(value){formattedResults=value,$$invalidate(4,formattedResults)},()=>{store.updatePlatformEnrollment(!0),send("demographics")},()=>{send("welcome")},()=>{store.updateDemographicSurvey(formattedResults),finishOnboarding()}]}class Onboarding extends SvelteComponent{constructor(options){super(),init(this,options,instance$c,create_fragment$e,safe_not_equal,{view:0,firstRunCompleted:1})}}function create_fragment$f(ctx){let div,current;const default_slot_template=ctx[1].default,default_slot=create_slot(default_slot_template,ctx,ctx[0],null);return{c(){div=element("div"),default_slot&&default_slot.c(),attr(div,"class","noise-background svelte-1ok1ejz")},m(target,anchor){insert(target,div,anchor),default_slot&&default_slot.m(div,null),current=!0},p(ctx,[dirty]){default_slot&&default_slot.p&&(!current||1&dirty)&&update_slot(default_slot,default_slot_template,ctx,ctx[0],dirty,null,null)},i(local){current||(transition_in(default_slot,local),current=!0)},o(local){transition_out(default_slot,local),current=!1},d(detaching){detaching&&detach(div),default_slot&&default_slot.d(detaching)}}}function instance$d($$self,$$props,$$invalidate){let{$$slots:slots={},$$scope:$$scope}=$$props;return $$self.$$set=$$props=>{"$$scope"in $$props&&$$invalidate(0,$$scope=$$props.$$scope)},[$$scope,slots]}class MainLayout extends SvelteComponent{constructor(options){super(),init(this,options,instance$d,create_fragment$f,safe_not_equal,{})}}function create_fragment$g(ctx){let main,current;const default_slot_template=ctx[1].default,default_slot=create_slot(default_slot_template,ctx,ctx[0],null);return{c(){main=element("main"),default_slot&&default_slot.c(),attr(main,"class","mzp-t-mozilla")},m(target,anchor){insert(target,main,anchor),default_slot&&default_slot.m(main,null),current=!0},p(ctx,[dirty]){default_slot&&default_slot.p&&(!current||1&dirty)&&update_slot(default_slot,default_slot_template,ctx,ctx[0],dirty,null,null)},i(local){current||(transition_in(default_slot,local),current=!0)},o(local){transition_out(default_slot,local),current=!1},d(detaching){detaching&&detach(main),default_slot&&default_slot.d(detaching)}}}function instance$e($$self,$$props,$$invalidate){let{$$slots:slots={},$$scope:$$scope}=$$props;return $$self.$$set=$$props=>{"$$scope"in $$props&&$$invalidate(0,$$scope=$$props.$$scope)},[$$scope,slots]}class MainBody extends SvelteComponent{constructor(options){super(),init(this,options,instance$e,create_fragment$g,safe_not_equal,{})}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _toConsumableArray(arr){return function(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function(iter){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(iter))return Array.from(iter)}(arr)||function(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var FOCUSABLE_ELEMENTS,Modal,activeModal,validateModalPresence,validateArgs,MicroModal=(FOCUSABLE_ELEMENTS=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden])","iframe","object","embed","[contenteditable]",'[tabindex]:not([tabindex^="-"])'],Modal=function(){function Modal(_ref){var targetModal=_ref.targetModal,_ref$triggers=_ref.triggers,triggers=void 0===_ref$triggers?[]:_ref$triggers,_ref$onShow=_ref.onShow,onShow=void 0===_ref$onShow?function(){}:_ref$onShow,_ref$onClose=_ref.onClose,onClose=void 0===_ref$onClose?function(){}:_ref$onClose,_ref$openTrigger=_ref.openTrigger,openTrigger=void 0===_ref$openTrigger?"data-micromodal-trigger":_ref$openTrigger,_ref$closeTrigger=_ref.closeTrigger,closeTrigger=void 0===_ref$closeTrigger?"data-micromodal-close":_ref$closeTrigger,_ref$openClass=_ref.openClass,openClass=void 0===_ref$openClass?"is-open":_ref$openClass,_ref$disableScroll=_ref.disableScroll,disableScroll=void 0!==_ref$disableScroll&&_ref$disableScroll,_ref$disableFocus=_ref.disableFocus,disableFocus=void 0!==_ref$disableFocus&&_ref$disableFocus,_ref$awaitCloseAnimat=_ref.awaitCloseAnimation,awaitCloseAnimation=void 0!==_ref$awaitCloseAnimat&&_ref$awaitCloseAnimat,_ref$awaitOpenAnimati=_ref.awaitOpenAnimation,awaitOpenAnimation=void 0!==_ref$awaitOpenAnimati&&_ref$awaitOpenAnimati,_ref$debugMode=_ref.debugMode,debugMode=void 0!==_ref$debugMode&&_ref$debugMode;!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Modal),this.modal=document.getElementById(targetModal),this.config={debugMode:debugMode,disableScroll:disableScroll,openTrigger:openTrigger,closeTrigger:closeTrigger,openClass:openClass,onShow:onShow,onClose:onClose,awaitCloseAnimation:awaitCloseAnimation,awaitOpenAnimation:awaitOpenAnimation,disableFocus:disableFocus},triggers.length>0&&this.registerTriggers.apply(this,_toConsumableArray(triggers)),this.onClick=this.onClick.bind(this),this.onKeydown=this.onKeydown.bind(this)}var Constructor,protoProps,staticProps;return Constructor=Modal,(protoProps=[{key:"registerTriggers",value:function(){for(var _this=this,_len=arguments.length,triggers=new Array(_len),_key=0;_key<_len;_key++)triggers[_key]=arguments[_key];triggers.filter(Boolean).forEach((function(trigger){trigger.addEventListener("click",(function(event){return _this.showModal(event)}))}))}},{key:"showModal",value:function(){var _this2=this,event=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(this.activeElement=document.activeElement,this.modal.setAttribute("aria-hidden","false"),this.modal.classList.add(this.config.openClass),this.scrollBehaviour("disable"),this.addEventListeners(),this.config.awaitOpenAnimation){var handler=function handler(){_this2.modal.removeEventListener("animationend",handler,!1),_this2.setFocusToFirstNode()};this.modal.addEventListener("animationend",handler,!1)}else this.setFocusToFirstNode();this.config.onShow(this.modal,this.activeElement,event)}},{key:"closeModal",value:function(){var event=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,modal=this.modal;if(this.modal.setAttribute("aria-hidden","true"),this.removeEventListeners(),this.scrollBehaviour("enable"),this.activeElement&&this.activeElement.focus&&this.activeElement.focus(),this.config.onClose(this.modal,this.activeElement,event),this.config.awaitCloseAnimation){var openClass=this.config.openClass;this.modal.addEventListener("animationend",(function handler(){modal.classList.remove(openClass),modal.removeEventListener("animationend",handler,!1)}),!1)}else modal.classList.remove(this.config.openClass)}},{key:"closeModalById",value:function(targetModal){this.modal=document.getElementById(targetModal),this.modal&&this.closeModal()}},{key:"scrollBehaviour",value:function(toggle){if(this.config.disableScroll){var body=document.querySelector("body");switch(toggle){case"enable":Object.assign(body.style,{overflow:""});break;case"disable":Object.assign(body.style,{overflow:"hidden"})}}}},{key:"addEventListeners",value:function(){this.modal.addEventListener("touchstart",this.onClick),this.modal.addEventListener("click",this.onClick),document.addEventListener("keydown",this.onKeydown)}},{key:"removeEventListeners",value:function(){this.modal.removeEventListener("touchstart",this.onClick),this.modal.removeEventListener("click",this.onClick),document.removeEventListener("keydown",this.onKeydown)}},{key:"onClick",value:function(event){event.target.hasAttribute(this.config.closeTrigger)&&this.closeModal(event)}},{key:"onKeydown",value:function(event){27===event.keyCode&&this.closeModal(event),9===event.keyCode&&this.retainFocus(event)}},{key:"getFocusableNodes",value:function(){var nodes=this.modal.querySelectorAll(FOCUSABLE_ELEMENTS);return Array.apply(void 0,_toConsumableArray(nodes))}},{key:"setFocusToFirstNode",value:function(){var _this3=this;if(!this.config.disableFocus){var focusableNodes=this.getFocusableNodes();if(0!==focusableNodes.length){var nodesWhichAreNotCloseTargets=focusableNodes.filter((function(node){return!node.hasAttribute(_this3.config.closeTrigger)}));nodesWhichAreNotCloseTargets.length>0&&nodesWhichAreNotCloseTargets[0].focus(),0===nodesWhichAreNotCloseTargets.length&&focusableNodes[0].focus()}}}},{key:"retainFocus",value:function(event){var focusableNodes=this.getFocusableNodes();if(0!==focusableNodes.length)if(focusableNodes=focusableNodes.filter((function(node){return null!==node.offsetParent})),this.modal.contains(document.activeElement)){var focusedItemIndex=focusableNodes.indexOf(document.activeElement);event.shiftKey&&0===focusedItemIndex&&(focusableNodes[focusableNodes.length-1].focus(),event.preventDefault()),!event.shiftKey&&focusableNodes.length>0&&focusedItemIndex===focusableNodes.length-1&&(focusableNodes[0].focus(),event.preventDefault())}else focusableNodes[0].focus()}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Modal}(),activeModal=null,validateModalPresence=function(id){if(!document.getElementById(id))return console.warn("MicroModal: â—Seems like you have missed %c'".concat(id,"'"),"background-color: #f8f9fa;color: #50596c;font-weight: bold;","ID somewhere in your code. Refer example below to resolve it."),console.warn("%cExample:","background-color: #f8f9fa;color: #50596c;font-weight: bold;",'<div class="modal" id="'.concat(id,'"></div>')),!1},validateArgs=function(triggers,triggerMap){if(function(triggers){triggers.length<=0&&(console.warn("MicroModal: â—Please specify at least one %c'micromodal-trigger'","background-color: #f8f9fa;color: #50596c;font-weight: bold;","data attribute."),console.warn("%cExample:","background-color: #f8f9fa;color: #50596c;font-weight: bold;",'<a href="#" data-micromodal-trigger="my-modal"></a>'))}(triggers),!triggerMap)return!0;for(var id in triggerMap)validateModalPresence(id);return!0},{init:function(config){var options=Object.assign({},{openTrigger:"data-micromodal-trigger"},config),triggers=_toConsumableArray(document.querySelectorAll("[".concat(options.openTrigger,"]"))),triggerMap=function(triggers,triggerAttr){var triggerMap=[];return triggers.forEach((function(trigger){var targetModal=trigger.attributes[triggerAttr].value;void 0===triggerMap[targetModal]&&(triggerMap[targetModal]=[]),triggerMap[targetModal].push(trigger)})),triggerMap}(triggers,options.openTrigger);if(!0!==options.debugMode||!1!==validateArgs(triggers,triggerMap))for(var key in triggerMap){var value=triggerMap[key];options.targetModal=key,options.triggers=_toConsumableArray(value),activeModal=new Modal(options)}},show:function(targetModal,config){var options=config||{};options.targetModal=targetModal,!0===options.debugMode&&!1===validateModalPresence(targetModal)||(activeModal&&activeModal.removeEventListeners(),(activeModal=new Modal(options)).showModal())},close:function(targetModal){targetModal?activeModal.closeModalById(targetModal):activeModal.closeModal()}});function create_fragment$h(ctx){let div1,div0,current;const default_slot_template=ctx[2].default,default_slot=create_slot(default_slot_template,ctx,ctx[1],null);return{c(){div1=element("div"),div0=element("div"),default_slot&&default_slot.c(),attr(div1,"class","gp-portal"),set_style(div1,"display","none")},m(target,anchor){insert(target,div1,anchor),append(div1,div0),default_slot&&default_slot.m(div0,null),ctx[3](div0),current=!0},p(ctx,[dirty]){default_slot&&default_slot.p&&(!current||2&dirty)&&update_slot(default_slot,default_slot_template,ctx,ctx[1],dirty,null,null)},i(local){current||(transition_in(default_slot,local),current=!0)},o(local){transition_out(default_slot,local),current=!1},d(detaching){detaching&&detach(div1),default_slot&&default_slot.d(detaching),ctx[3](null)}}}function instance$f($$self,$$props,$$invalidate){let ref,portal,{$$slots:slots={},$$scope:$$scope}=$$props;return onMount((()=>{portal=document.createElement("div"),portal.className="portal",document.body.appendChild(portal),portal.appendChild(ref)})),onDestroy((()=>{document.body.removeChild(portal)})),$$self.$$set=$$props=>{"$$scope"in $$props&&$$invalidate(1,$$scope=$$props.$$scope)},[ref,$$scope,slots,function($$value){binding_callbacks[$$value?"unshift":"push"]((()=>{ref=$$value,$$invalidate(0,ref)}))}]}window.MicroModal=MicroModal;class Portal extends SvelteComponent{constructor(options){super(),init(this,options,instance$f,create_fragment$h,safe_not_equal,{})}}function create_fragment$i(ctx){let svg,path;return{c(){svg=svg_element("svg"),path=svg_element("path"),attr(path,"d","M9.75 29.25L29.25 9.75M9.75 9.75L29.25 29.25L9.75 9.75Z"),attr(path,"stroke",ctx[1]),attr(path,"stroke-width","2"),attr(path,"stroke-linecap","round"),attr(svg,"width",ctx[0]),attr(svg,"height",ctx[0]),attr(svg,"viewBox","0 0 39 39"),attr(svg,"fill","none"),attr(svg,"xmlns","http://www.w3.org/2000/svg")},m(target,anchor){insert(target,svg,anchor),append(svg,path)},p(ctx,[dirty]){2&dirty&&attr(path,"stroke",ctx[1]),1&dirty&&attr(svg,"width",ctx[0]),1&dirty&&attr(svg,"height",ctx[0])},i:noop,o:noop,d(detaching){detaching&&detach(svg)}}}function instance$g($$self,$$props,$$invalidate){let{size:size="1em"}=$$props,{color:color="currentColor"}=$$props;return $$self.$$set=$$props=>{"size"in $$props&&$$invalidate(0,size=$$props.size),"color"in $$props&&$$invalidate(1,color=$$props.color)},[size,color]}class Close extends SvelteComponent{constructor(options){super(),init(this,options,instance$g,create_fragment$i,safe_not_equal,{size:0,color:1})}}const get_cta_slot_changes=dirty=>({}),get_cta_slot_context=ctx=>({}),get_body_slot_changes=dirty=>({}),get_body_slot_context=ctx=>({}),get_title_slot_changes$1=dirty=>({}),get_title_slot_context$1=ctx=>({});function create_default_slot$3(ctx){let div4,div3,div2,header,h2,t0,button,close,t1,div0,t2,div1,div3_transition,div4_transition,current,mounted,dispose;const title_slot_template=ctx[10].title,title_slot=create_slot(title_slot_template,ctx,ctx[11],get_title_slot_context$1),title_slot_or_fallback=title_slot||function(ctx){let t;return{c(){t=text("Title.")},m(target,anchor){insert(target,t,anchor)},d(detaching){detaching&&detach(t)}}}();close=new Close({props:{size:"28px"}});const body_slot_template=ctx[10].body,body_slot=create_slot(body_slot_template,ctx,ctx[11],get_body_slot_context),body_slot_or_fallback=body_slot||function(ctx){let p;return{c(){p=element("p"),p.textContent="I am a dialog"},m(target,anchor){insert(target,p,anchor)},d(detaching){detaching&&detach(p)}}}(),cta_slot_template=ctx[10].cta,cta_slot=create_slot(cta_slot_template,ctx,ctx[11],get_cta_slot_context),cta_slot_or_fallback=cta_slot||function(ctx){let button0,t1,button1,mounted,dispose;return{c(){button0=element("button"),button0.textContent="Accept",t1=space(),button1=element("button"),button1.textContent="Cancel",attr(button0,"class","svelte-oeijlo"),attr(button1,"class","svelte-oeijlo")},m(target,anchor){insert(target,button0,anchor),insert(target,t1,anchor),insert(target,button1,anchor),mounted||(dispose=[listen(button0,"click",ctx[3]),listen(button1,"click",ctx[2])],mounted=!0)},p:noop,d(detaching){detaching&&detach(button0),detaching&&detach(t1),detaching&&detach(button1),mounted=!1,run_all(dispose)}}}(ctx);return{c(){div4=element("div"),div3=element("div"),div2=element("div"),header=element("header"),h2=element("h2"),title_slot_or_fallback&&title_slot_or_fallback.c(),t0=space(),button=element("button"),create_component(close.$$.fragment),t1=space(),div0=element("div"),body_slot_or_fallback&&body_slot_or_fallback.c(),t2=space(),div1=element("div"),cta_slot_or_fallback&&cta_slot_or_fallback.c(),attr(h2,"class","mzp-t-mozilla svelte-oeijlo"),attr(button,"class","svelte-oeijlo"),attr(header,"class","svelte-oeijlo"),attr(div0,"class","modal-body"),attr(div1,"class","cta svelte-oeijlo"),attr(div2,"role","dialog"),attr(div2,"aria-modal","true"),attr(div2,"aria-labelledby","modal-1-title"),attr(div2,"class","container radius-sm mzp-t-mozilla svelte-oeijlo"),attr(div3,"tabindex","-1"),attr(div3,"data-micromodal-close",""),attr(div3,"class","overlay svelte-oeijlo"),attr(div3,"style",ctx[0]),attr(div4,"id",ctx[1]),attr(div4,"aria-hidden","true")},m(target,anchor){insert(target,div4,anchor),append(div4,div3),append(div3,div2),append(div2,header),append(header,h2),title_slot_or_fallback&&title_slot_or_fallback.m(h2,null),append(header,t0),append(header,button),mount_component(close,button,null),append(div2,t1),append(div2,div0),body_slot_or_fallback&&body_slot_or_fallback.m(div0,null),append(div2,t2),append(div2,div1),cta_slot_or_fallback&&cta_slot_or_fallback.m(div1,null),current=!0,mounted||(dispose=[listen(button,"click",ctx[4]),listen(div3,"click",ctx[5])],mounted=!0)},p(ctx,dirty){title_slot&&title_slot.p&&(!current||2048&dirty)&&update_slot(title_slot,title_slot_template,ctx,ctx[11],dirty,get_title_slot_changes$1,get_title_slot_context$1),body_slot&&body_slot.p&&(!current||2048&dirty)&&update_slot(body_slot,body_slot_template,ctx,ctx[11],dirty,get_body_slot_changes,get_body_slot_context),cta_slot&&cta_slot.p&&(!current||2048&dirty)&&update_slot(cta_slot,cta_slot_template,ctx,ctx[11],dirty,get_cta_slot_changes,get_cta_slot_context),(!current||1&dirty)&&attr(div3,"style",ctx[0])},i(local){current||(transition_in(title_slot_or_fallback,local),transition_in(close.$$.fragment,local),transition_in(body_slot_or_fallback,local),transition_in(cta_slot_or_fallback,local),add_render_callback((()=>{div3_transition||(div3_transition=create_bidirectional_transition(div3,fly,{duration:200,y:5},!0)),div3_transition.run(1)})),add_render_callback((()=>{div4_transition||(div4_transition=create_bidirectional_transition(div4,fade,{duration:200},!0)),div4_transition.run(1)})),current=!0)},o(local){transition_out(title_slot_or_fallback,local),transition_out(close.$$.fragment,local),transition_out(body_slot_or_fallback,local),transition_out(cta_slot_or_fallback,local),div3_transition||(div3_transition=create_bidirectional_transition(div3,fly,{duration:200,y:5},!1)),div3_transition.run(0),div4_transition||(div4_transition=create_bidirectional_transition(div4,fade,{duration:200},!1)),div4_transition.run(0),current=!1},d(detaching){detaching&&detach(div4),title_slot_or_fallback&&title_slot_or_fallback.d(detaching),destroy_component(close),body_slot_or_fallback&&body_slot_or_fallback.d(detaching),cta_slot_or_fallback&&cta_slot_or_fallback.d(detaching),detaching&&div3_transition&&div3_transition.end(),detaching&&div4_transition&&div4_transition.end(),mounted=!1,run_all(dispose)}}}function create_fragment$j(ctx){let portal,current,mounted,dispose;return portal=new Portal({props:{$$slots:{default:[create_default_slot$3]},$$scope:{ctx:ctx}}}),{c(){create_component(portal.$$.fragment)},m(target,anchor){mount_component(portal,target,anchor),current=!0,mounted||(dispose=listen(window,"keydown",ctx[6]),mounted=!0)},p(ctx,[dirty]){const portal_changes={};2049&dirty&&(portal_changes.$$scope={dirty:dirty,ctx:ctx}),portal.$set(portal_changes)},i(local){current||(transition_in(portal.$$.fragment,local),current=!0)},o(local){transition_out(portal.$$.fragment,local),current=!1},d(detaching){destroy_component(portal,detaching),mounted=!1,dispose()}}}function toVariable(key,value){return value?`${key}: ${value};`:void 0}function instance$h($$self,$$props,$$invalidate){let styles,{$$slots:slots={},$$scope:$$scope}=$$props,{width:width}=$$props,{height:height}=$$props,{topPadding:topPadding}=$$props;const dispatch=createEventDispatcher(),key=`modal-${Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}`;function onDismiss(){dispatch("dismiss")}return onMount((()=>{MicroModal.show(key,{disableScroll:!0,disableFocus:!0})})),onDestroy((()=>{MicroModal.close(key)})),$$self.$$set=$$props=>{"width"in $$props&&$$invalidate(7,width=$$props.width),"height"in $$props&&$$invalidate(8,height=$$props.height),"topPadding"in $$props&&$$invalidate(9,topPadding=$$props.topPadding),"$$scope"in $$props&&$$invalidate(11,$$scope=$$props.$$scope)},$$self.$$.update=()=>{896&$$self.$$.dirty&&$$invalidate(0,styles=function({width:width,height:height,topPadding:topPadding}){const values=[toVariable("--width",width),toVariable("--height",height),toVariable("--top-padding",topPadding)].filter((d=>void 0!==d));if(0!==values.length)return values.join("; ")}({width:width,height:height,topPadding:topPadding}))},[styles,key,function(){MicroModal.close(key),dispatch("cancel")},function(){MicroModal.close(key),dispatch("accept")},onDismiss,function(e){e.target===e.currentTarget&&onDismiss()},function(e){"Escape"===e.key&&onDismiss()},width,height,topPadding,slots,$$scope]}MicroModal.init({disableScroll:!0,disableFocus:!0});class Dialog extends SvelteComponent{constructor(options){super(),init(this,options,instance$h,create_fragment$j,safe_not_equal,{width:7,height:8,topPadding:9})}}const get_settings_slot_changes=dirty=>({}),get_settings_slot_context=ctx=>({}),get_navigation_slot_changes=dirty=>({}),get_navigation_slot_context=ctx=>({}),get_header_slot_changes=dirty=>({}),get_header_slot_context=ctx=>({});function create_fragment$k(ctx){let div,t0,t1,current;const header_slot_template=ctx[1].header,header_slot=create_slot(header_slot_template,ctx,ctx[0],get_header_slot_context),navigation_slot_template=ctx[1].navigation,navigation_slot=create_slot(navigation_slot_template,ctx,ctx[0],get_navigation_slot_context),settings_slot_template=ctx[1].settings,settings_slot=create_slot(settings_slot_template,ctx,ctx[0],get_settings_slot_context);return{c(){div=element("div"),header_slot&&header_slot.c(),t0=space(),navigation_slot&&navigation_slot.c(),t1=space(),settings_slot&&settings_slot.c(),attr(div,"class","sidebar svelte-o60uu7")},m(target,anchor){insert(target,div,anchor),header_slot&&header_slot.m(div,null),append(div,t0),navigation_slot&&navigation_slot.m(div,null),append(div,t1),settings_slot&&settings_slot.m(div,null),current=!0},p(ctx,[dirty]){header_slot&&header_slot.p&&(!current||1&dirty)&&update_slot(header_slot,header_slot_template,ctx,ctx[0],dirty,get_header_slot_changes,get_header_slot_context),navigation_slot&&navigation_slot.p&&(!current||1&dirty)&&update_slot(navigation_slot,navigation_slot_template,ctx,ctx[0],dirty,get_navigation_slot_changes,get_navigation_slot_context),settings_slot&&settings_slot.p&&(!current||1&dirty)&&update_slot(settings_slot,settings_slot_template,ctx,ctx[0],dirty,get_settings_slot_changes,get_settings_slot_context)},i(local){current||(transition_in(header_slot,local),transition_in(navigation_slot,local),transition_in(settings_slot,local),current=!0)},o(local){transition_out(header_slot,local),transition_out(navigation_slot,local),transition_out(settings_slot,local),current=!1},d(detaching){detaching&&detach(div),header_slot&&header_slot.d(detaching),navigation_slot&&navigation_slot.d(detaching),settings_slot&&settings_slot.d(detaching)}}}function instance$i($$self,$$props,$$invalidate){let{$$slots:slots={},$$scope:$$scope}=$$props;return $$self.$$set=$$props=>{"$$scope"in $$props&&$$invalidate(0,$$scope=$$props.$$scope)},[$$scope,slots]}class MainSidebar extends SvelteComponent{constructor(options){super(),init(this,options,instance$i,create_fragment$k,safe_not_equal,{})}}function create_header_slot(ctx){let button,button_intro,mounted,dispose;return{c(){button=element("button"),button.innerHTML='<h1 class="svelte-1d4qcp1"><img src="img/logo-tall.svg" alt="Mozilla Rally Logo"/></h1>',attr(button,"slot","header"),attr(button,"class","svelte-1d4qcp1")},m(target,anchor){insert(target,button,anchor),mounted||(dispose=listen(button,"click",ctx[3]("current-studies")),mounted=!0)},p:noop,i(local){button_intro||add_render_callback((()=>{button_intro=create_in_transition(button,fly,{duration:800,delay:600,x:-15}),button_intro.start()}))},o:noop,d(detaching){detaching&&detach(button),mounted=!1,dispose()}}}function create_navigation_slot(ctx){let ul,li0,button,t1,li1,a0,t2,externallink0,t3,li2,a1,t4,externallink1,ul_intro,current,mounted,dispose;return externallink0=new ExternalLink({}),externallink1=new ExternalLink({}),{c(){ul=element("ul"),li0=element("li"),button=element("button"),button.textContent="Current Studies",t1=space(),li1=element("li"),a0=element("a"),t2=text("Support\n        "),create_component(externallink0.$$.fragment),t3=space(),li2=element("li"),a1=element("a"),t4=text("FAQ\n        "),create_component(externallink1.$$.fragment),attr(button,"class","svelte-1d4qcp1"),toggle_class(button,"active","current-studies"===ctx[0]),attr(li0,"class","svelte-1d4qcp1"),attr(a0,"class","external svelte-1d4qcp1"),attr(a0,"target","_blank"),attr(a0,"rel","noopener noreferrer"),attr(a0,"href","https://support.mozilla.org/en-US/kb/about-mozilla-rally"),attr(li1,"class","svelte-1d4qcp1"),attr(a1,"class","external svelte-1d4qcp1"),attr(a1,"target","_blank"),attr(a1,"rel","noopener noreferrer"),attr(a1,"href","https://rally.mozilla.org/how-rally-works/faqs/"),attr(li2,"class","svelte-1d4qcp1"),attr(ul,"slot","navigation"),attr(ul,"class","svelte-1d4qcp1")},m(target,anchor){insert(target,ul,anchor),append(ul,li0),append(li0,button),append(ul,t1),append(ul,li1),append(li1,a0),append(a0,t2),mount_component(externallink0,a0,null),append(ul,t3),append(ul,li2),append(li2,a1),append(a1,t4),mount_component(externallink1,a1,null),current=!0,mounted||(dispose=listen(button,"click",ctx[3]("current-studies")),mounted=!0)},p(ctx,dirty){1&dirty&&toggle_class(button,"active","current-studies"===ctx[0])},i(local){current||(transition_in(externallink0.$$.fragment,local),transition_in(externallink1.$$.fragment,local),ul_intro||add_render_callback((()=>{ul_intro=create_in_transition(ul,fly,{duration:800,delay:300,x:-10}),ul_intro.start()})),current=!0)},o(local){transition_out(externallink0.$$.fragment,local),transition_out(externallink1.$$.fragment,local),current=!1},d(detaching){detaching&&detach(ul),destroy_component(externallink0),destroy_component(externallink1),mounted=!1,dispose()}}}function create_key_block(ctx){let span,t,span_intro,span_outro,current;return{c(){span=element("span"),t=text(ctx[1]),set_style(span,"display","inline-block"),set_style(span,"position","absolute")},m(target,anchor){insert(target,span,anchor),append(span,t),current=!0},p(ctx,dirty){(!current||2&dirty)&&set_data(t,ctx[1])},i(local){current||(add_render_callback((()=>{span_outro&&span_outro.end(1),span_intro||(span_intro=create_in_transition(span,fly,{duration:500,y:-24})),span_intro.start()})),current=!0)},o(local){span_intro&&span_intro.invalidate(),span_outro=create_out_transition(span,fly,{duration:500,y:24}),current=!1},d(detaching){detaching&&detach(span),detaching&&span_outro&&span_outro.end()}}}function create_settings_slot(ctx){let ul1,ul0,li0,button0,t1,div,span,t2,t3,t4,t5,li1,button1,t7,li2,button2,ul1_intro,current,mounted,dispose,previous_key=ctx[1],key_block=create_key_block(ctx);return{c(){ul1=element("ul"),ul0=element("ul"),li0=element("li"),button0=element("button"),button0.textContent="Manage Profile",t1=space(),div=element("div"),span=element("span"),key_block.c(),t2=text("\n        / "),t3=text(ctx[2]),t4=text(" Questions Answered"),t5=space(),li1=element("li"),button1=element("button"),button1.textContent="Privacy Notice",t7=space(),li2=element("li"),button2=element("button"),button2.textContent="Leave Mozilla Rally",attr(button0,"class","svelte-1d4qcp1"),toggle_class(button0,"active","manage-profile"===ctx[0]),set_style(span,"position","relative"),set_style(span,"display","inline-block"),set_style(span,"transform","translateY(-11.5px)"),set_style(span,"font-variant-numeric","tabular-nums"),set_style(span,"min-width","6.5px"),set_style(div,"color","var(--color-light-gray-90)"),set_style(div,"font-size","10px"),set_style(div,"font-weight","400"),set_style(div,"padding-top","4px"),attr(li0,"class","svelte-1d4qcp1"),attr(button1,"class","svelte-1d4qcp1"),toggle_class(button1,"active","privacy-notice"===ctx[0]),attr(li1,"class","svelte-1d4qcp1"),attr(button2,"class","svelte-1d4qcp1"),toggle_class(button2,"active","leave-rally"===ctx[0]),attr(li2,"class","svelte-1d4qcp1"),attr(ul0,"class","app-controls svelte-1d4qcp1"),attr(ul1,"slot","settings"),attr(ul1,"class","app-controls svelte-1d4qcp1")},m(target,anchor){insert(target,ul1,anchor),append(ul1,ul0),append(ul0,li0),append(li0,button0),append(li0,t1),append(li0,div),append(div,span),key_block.m(span,null),append(div,t2),append(div,t3),append(div,t4),append(ul0,t5),append(ul0,li1),append(li1,button1),append(ul0,t7),append(ul0,li2),append(li2,button2),current=!0,mounted||(dispose=[listen(button0,"click",ctx[3]("manage-profile")),listen(button1,"click",ctx[3]("privacy-notice")),listen(button2,"click",ctx[3]("leave-rally"))],mounted=!0)},p(ctx,dirty){1&dirty&&toggle_class(button0,"active","manage-profile"===ctx[0]),2&dirty&&safe_not_equal(previous_key,previous_key=ctx[1])?(group_outros(),transition_out(key_block,1,1,noop),check_outros(),key_block=create_key_block(ctx),key_block.c(),transition_in(key_block),key_block.m(span,null)):key_block.p(ctx,dirty),(!current||4&dirty)&&set_data(t3,ctx[2]),1&dirty&&toggle_class(button1,"active","privacy-notice"===ctx[0]),1&dirty&&toggle_class(button2,"active","leave-rally"===ctx[0])},i(local){current||(transition_in(key_block),ul1_intro||add_render_callback((()=>{ul1_intro=create_in_transition(ul1,fly,{duration:800,delay:600,x:-10}),ul1_intro.start()})),current=!0)},o(local){transition_out(key_block),current=!1},d(detaching){detaching&&detach(ul1),key_block.d(detaching),mounted=!1,run_all(dispose)}}}function create_fragment$l(ctx){let mainsidebar,current;return mainsidebar=new MainSidebar({props:{$$slots:{settings:[create_settings_slot],navigation:[create_navigation_slot],header:[create_header_slot]},$$scope:{ctx:ctx}}}),{c(){create_component(mainsidebar.$$.fragment)},m(target,anchor){mount_component(mainsidebar,target,anchor),current=!0},p(ctx,[dirty]){const mainsidebar_changes={};39&dirty&&(mainsidebar_changes.$$scope={dirty:dirty,ctx:ctx}),mainsidebar.$set(mainsidebar_changes)},i(local){current||(transition_in(mainsidebar.$$.fragment,local),current=!0)},o(local){transition_out(mainsidebar.$$.fragment,local),current=!1},d(detaching){destroy_component(mainsidebar,detaching)}}}function instance$j($$self,$$props,$$invalidate){let{view:view="current-studies"}=$$props,{profileQuestionsAnswered:profileQuestionsAnswered=0}=$$props,{totalProfileQuestions:totalProfileQuestions=7}=$$props;const dispatch=createEventDispatcher();return $$self.$$set=$$props=>{"view"in $$props&&$$invalidate(0,view=$$props.view),"profileQuestionsAnswered"in $$props&&$$invalidate(1,profileQuestionsAnswered=$$props.profileQuestionsAnswered),"totalProfileQuestions"in $$props&&$$invalidate(2,totalProfileQuestions=$$props.totalProfileQuestions)},[view,profileQuestionsAnswered,totalProfileQuestions,function(nextView){return()=>{"leave-rally"===nextView?dispatch("leave-rally"):($$invalidate(0,view=nextView),dispatch("change-view",{view:view}))}}]}class Sidebar extends SvelteComponent{constructor(options){super(),init(this,options,instance$j,create_fragment$l,safe_not_equal,{view:0,profileQuestionsAnswered:1,totalProfileQuestions:2})}}function create_default_slot_3(ctx){let current;const default_slot_template=ctx[5].default,default_slot=create_slot(default_slot_template,ctx,ctx[11],null);return{c(){default_slot&&default_slot.c()},m(target,anchor){default_slot&&default_slot.m(target,anchor),current=!0},p(ctx,dirty){default_slot&&default_slot.p&&(!current||2048&dirty)&&update_slot(default_slot,default_slot_template,ctx,ctx[11],dirty,null,null)},i(local){current||(transition_in(default_slot,local),current=!0)},o(local){transition_out(default_slot,local),current=!1},d(detaching){default_slot&&default_slot.d(detaching)}}}function create_default_slot_2$1(ctx){let sidebar,t,body,current;return sidebar=new Sidebar({props:{view:ctx[0],totalProfileQuestions:ctx[2],profileQuestionsAnswered:ctx[1]}}),sidebar.$on("change-view",ctx[6]),sidebar.$on("leave-rally",ctx[7]),body=new MainBody({props:{$$slots:{default:[create_default_slot_3]},$$scope:{ctx:ctx}}}),{c(){create_component(sidebar.$$.fragment),t=space(),create_component(body.$$.fragment)},m(target,anchor){mount_component(sidebar,target,anchor),insert(target,t,anchor),mount_component(body,target,anchor),current=!0},p(ctx,dirty){const sidebar_changes={};1&dirty&&(sidebar_changes.view=ctx[0]),4&dirty&&(sidebar_changes.totalProfileQuestions=ctx[2]),2&dirty&&(sidebar_changes.profileQuestionsAnswered=ctx[1]),sidebar.$set(sidebar_changes);const body_changes={};2048&dirty&&(body_changes.$$scope={dirty:dirty,ctx:ctx}),body.$set(body_changes)},i(local){current||(transition_in(sidebar.$$.fragment,local),transition_in(body.$$.fragment,local),current=!0)},o(local){transition_out(sidebar.$$.fragment,local),transition_out(body.$$.fragment,local),current=!1},d(detaching){destroy_component(sidebar,detaching),detaching&&detach(t),destroy_component(body,detaching)}}}function create_if_block$5(ctx){let dialog,current;return dialog=new Dialog({props:{width:"var(--content-width)",$$slots:{cta:[create_cta_slot],body:[create_body_slot],title:[create_title_slot]},$$scope:{ctx:ctx}}}),dialog.$on("dismiss",ctx[10]),{c(){create_component(dialog.$$.fragment)},m(target,anchor){mount_component(dialog,target,anchor),current=!0},p(ctx,dirty){const dialog_changes={};2056&dirty&&(dialog_changes.$$scope={dirty:dirty,ctx:ctx}),dialog.$set(dialog_changes)},i(local){current||(transition_in(dialog.$$.fragment,local),current=!0)},o(local){transition_out(dialog.$$.fragment,local),current=!1},d(detaching){destroy_component(dialog,detaching)}}}function create_title_slot(ctx){let div;return{c(){div=element("div"),div.textContent="Before You Goâ€¦",attr(div,"slot","title")},m(target,anchor){insert(target,div,anchor)},d(detaching){detaching&&detach(div)}}}function create_body_slot(ctx){let div1;return{c(){div1=element("div"),div1.innerHTML='<div style="width: 368px;"><p style="padding-top: 20px;">Thanks for helping make the internet just a little bit better. For your reference, leaving Rally means that:</p> \n      <ul class="mzp-u-list-styled bigger-gap" style="padding-right: 36px;"><li>We will <b>no longer collect any data</b> for our platform or studies</li> \n        <li>You will be <b>removed from any studies</b> you&#39;re currently participating in</li> \n        <li>We will <b>delete any demographic information</b> you&#39;ve shared with us</li> \n        <li>If you are currently enrolled in an open study, we will <b>delete all data</b> we&#39;ve collected through that study to date. However, researchers may still retain access to data you&#39;ve contributed to <b>completed studies</b>.</li> \n        <li>We will <b>uninstall and remove the Rally add-on</b>, and any associated study add-ons that you may have installed.</li></ul></div> \n    <img style="width: 270px; padding-top: 40px; transform: translateX(-24px);" src="img/before-you-go.png" alt="person walking through exit door"/>',attr(div1,"class","split-content-modal"),attr(div1,"slot","body"),set_style(div1,"margin-bottom","24px"),set_style(div1,"box-sizing","content-box")},m(target,anchor){insert(target,div1,anchor)},d(detaching){detaching&&detach(div1)}}}function create_default_slot_1$3(ctx){let t;return{c(){t=text("Leave Rally")},m(target,anchor){insert(target,t,anchor)},d(detaching){detaching&&detach(t)}}}function create_default_slot$4(ctx){let t;return{c(){t=text("Cancel")},m(target,anchor){insert(target,t,anchor)},d(detaching){detaching&&detach(t)}}}function create_cta_slot(ctx){let div,button0,t,button1,current;return button0=new Button({props:{size:"lg",product:!0,leave:!0,$$slots:{default:[create_default_slot_1$3]},$$scope:{ctx:ctx}}}),button0.$on("click",ctx[8]),button1=new Button({props:{size:"lg",product:!0,secondary:!0,$$slots:{default:[create_default_slot$4]},$$scope:{ctx:ctx}}}),button1.$on("click",ctx[9]),{c(){div=element("div"),create_component(button0.$$.fragment),t=space(),create_component(button1.$$.fragment),attr(div,"class","modal-call-flow"),attr(div,"slot","cta")},m(target,anchor){insert(target,div,anchor),mount_component(button0,div,null),append(div,t),mount_component(button1,div,null),current=!0},p(ctx,dirty){const button0_changes={};2048&dirty&&(button0_changes.$$scope={dirty:dirty,ctx:ctx}),button0.$set(button0_changes);const button1_changes={};2048&dirty&&(button1_changes.$$scope={dirty:dirty,ctx:ctx}),button1.$set(button1_changes)},i(local){current||(transition_in(button0.$$.fragment,local),transition_in(button1.$$.fragment,local),current=!0)},o(local){transition_out(button0.$$.fragment,local),transition_out(button1.$$.fragment,local),current=!1},d(detaching){detaching&&detach(div),destroy_component(button0),destroy_component(button1)}}}function create_fragment$m(ctx){let layout,t,if_block_anchor,current;layout=new MainLayout({props:{$$slots:{default:[create_default_slot_2$1]},$$scope:{ctx:ctx}}});let if_block=ctx[3]&&create_if_block$5(ctx);return{c(){create_component(layout.$$.fragment),t=space(),if_block&&if_block.c(),if_block_anchor=empty()},m(target,anchor){mount_component(layout,target,anchor),insert(target,t,anchor),if_block&&if_block.m(target,anchor),insert(target,if_block_anchor,anchor),current=!0},p(ctx,[dirty]){const layout_changes={};2063&dirty&&(layout_changes.$$scope={dirty:dirty,ctx:ctx}),layout.$set(layout_changes),ctx[3]?if_block?(if_block.p(ctx,dirty),8&dirty&&transition_in(if_block,1)):(if_block=create_if_block$5(ctx),if_block.c(),transition_in(if_block,1),if_block.m(if_block_anchor.parentNode,if_block_anchor)):if_block&&(group_outros(),transition_out(if_block,1,1,(()=>{if_block=null})),check_outros())},i(local){current||(transition_in(layout.$$.fragment,local),transition_in(if_block),current=!0)},o(local){transition_out(layout.$$.fragment,local),transition_out(if_block),current=!1},d(detaching){destroy_component(layout,detaching),detaching&&detach(t),if_block&&if_block.d(detaching),detaching&&detach(if_block_anchor)}}}function instance$k($$self,$$props,$$invalidate){let{$$slots:slots={},$$scope:$$scope}=$$props,leaveModal=!1;const dispatch=createEventDispatcher();let{view:view}=$$props,{profileQuestionsAnswered:profileQuestionsAnswered=0}=$$props,{totalProfileQuestions:totalProfileQuestions=7}=$$props;return $$self.$$set=$$props=>{"view"in $$props&&$$invalidate(0,view=$$props.view),"profileQuestionsAnswered"in $$props&&$$invalidate(1,profileQuestionsAnswered=$$props.profileQuestionsAnswered),"totalProfileQuestions"in $$props&&$$invalidate(2,totalProfileQuestions=$$props.totalProfileQuestions),"$$scope"in $$props&&$$invalidate(11,$$scope=$$props.$$scope)},[view,profileQuestionsAnswered,totalProfileQuestions,leaveModal,dispatch,slots,function(event){bubble($$self,event)},()=>{$$invalidate(3,leaveModal=!0)},()=>{$$invalidate(3,leaveModal=!1),dispatch("leave-rally")},()=>{$$invalidate(3,leaveModal=!1)},()=>{$$invalidate(3,leaveModal=!1)},$$scope]}class Layout_1 extends SvelteComponent{constructor(options){super(),init(this,options,instance$k,create_fragment$m,safe_not_equal,{view:0,profileQuestionsAnswered:1,totalProfileQuestions:2})}}const fmt=Intl.DateTimeFormat("en",{month:"short",day:"2-digit",year:"numeric"});function niceDate(dt){return fmt.format(dt)}const get_study_cta_slot_changes=dirty=>({}),get_study_cta_slot_context=ctx=>({}),get_study_author_slot_changes=dirty=>({}),get_study_author_slot_context=ctx=>({}),get_study_name_slot_changes=dirty=>({}),get_study_name_slot_context=ctx=>({}),get_study_icon_slot_changes=dirty=>({}),get_study_icon_slot_context=ctx=>({});function create_if_block$6(ctx){let t0,t1,t1_value=niceDate(ctx[0])+"";return{c(){t0=text("| Ends:\n        "),t1=text(t1_value)},m(target,anchor){insert(target,t0,anchor),insert(target,t1,anchor)},p(ctx,dirty){1&dirty&&t1_value!==(t1_value=niceDate(ctx[0])+"")&&set_data(t1,t1_value)},d(detaching){detaching&&detach(t0),detaching&&detach(t1)}}}function create_fragment$n(ctx){let div2,t0,div1,h3,t1,div0,t2,t3,t4,current;const study_icon_slot_template=ctx[2]["study-icon"],study_icon_slot=create_slot(study_icon_slot_template,ctx,ctx[1],get_study_icon_slot_context),study_icon_slot_or_fallback=study_icon_slot||function(ctx){let img,img_src_value;return{c(){img=element("img"),attr(img,"class","study-card-image"),attr(img,"width","60"),attr(img,"alt","study icon"),img.src!==(img_src_value="img/default-study-icon.png")&&attr(img,"src","img/default-study-icon.png")},m(target,anchor){insert(target,img,anchor)},d(detaching){detaching&&detach(img)}}}(),study_name_slot_template=ctx[2]["study-name"],study_name_slot=create_slot(study_name_slot_template,ctx,ctx[1],get_study_name_slot_context),study_name_slot_or_fallback=study_name_slot||function(ctx){let t;return{c(){t=text("Study")},m(target,anchor){insert(target,t,anchor)},d(detaching){detaching&&detach(t)}}}(),study_author_slot_template=ctx[2]["study-author"],study_author_slot=create_slot(study_author_slot_template,ctx,ctx[1],get_study_author_slot_context),study_author_slot_or_fallback=study_author_slot||function(ctx){let t;return{c(){t=text("author")},m(target,anchor){insert(target,t,anchor)},d(detaching){detaching&&detach(t)}}}();let if_block=ctx[0]&&create_if_block$6(ctx);const study_cta_slot_template=ctx[2]["study-cta"],study_cta_slot=create_slot(study_cta_slot_template,ctx,ctx[1],get_study_cta_slot_context);return{c(){div2=element("div"),study_icon_slot_or_fallback&&study_icon_slot_or_fallback.c(),t0=space(),div1=element("div"),h3=element("h3"),study_name_slot_or_fallback&&study_name_slot_or_fallback.c(),t1=space(),div0=element("div"),t2=text("by\n      "),study_author_slot_or_fallback&&study_author_slot_or_fallback.c(),t3=space(),if_block&&if_block.c(),t4=space(),study_cta_slot&&study_cta_slot.c(),attr(h3,"class","text-head-sm svelte-zrt2uh"),attr(div0,"class","study-card-author text-body-sm svelte-zrt2uh"),attr(div1,"class","study-card-header-info svelte-zrt2uh"),attr(div2,"class","study-card-header grid svelte-zrt2uh")},m(target,anchor){insert(target,div2,anchor),study_icon_slot_or_fallback&&study_icon_slot_or_fallback.m(div2,null),append(div2,t0),append(div2,div1),append(div1,h3),study_name_slot_or_fallback&&study_name_slot_or_fallback.m(h3,null),append(div1,t1),append(div1,div0),append(div0,t2),study_author_slot_or_fallback&&study_author_slot_or_fallback.m(div0,null),append(div0,t3),if_block&&if_block.m(div0,null),append(div2,t4),study_cta_slot&&study_cta_slot.m(div2,null),current=!0},p(ctx,[dirty]){study_icon_slot&&study_icon_slot.p&&(!current||2&dirty)&&update_slot(study_icon_slot,study_icon_slot_template,ctx,ctx[1],dirty,get_study_icon_slot_changes,get_study_icon_slot_context),study_name_slot&&study_name_slot.p&&(!current||2&dirty)&&update_slot(study_name_slot,study_name_slot_template,ctx,ctx[1],dirty,get_study_name_slot_changes,get_study_name_slot_context),study_author_slot&&study_author_slot.p&&(!current||2&dirty)&&update_slot(study_author_slot,study_author_slot_template,ctx,ctx[1],dirty,get_study_author_slot_changes,get_study_author_slot_context),ctx[0]?if_block?if_block.p(ctx,dirty):(if_block=create_if_block$6(ctx),if_block.c(),if_block.m(div0,null)):if_block&&(if_block.d(1),if_block=null),study_cta_slot&&study_cta_slot.p&&(!current||2&dirty)&&update_slot(study_cta_slot,study_cta_slot_template,ctx,ctx[1],dirty,get_study_cta_slot_changes,get_study_cta_slot_context)},i(local){current||(transition_in(study_icon_slot_or_fallback,local),transition_in(study_name_slot_or_fallback,local),transition_in(study_author_slot_or_fallback,local),transition_in(study_cta_slot,local),current=!0)},o(local){transition_out(study_icon_slot_or_fallback,local),transition_out(study_name_slot_or_fallback,local),transition_out(study_author_slot_or_fallback,local),transition_out(study_cta_slot,local),current=!1},d(detaching){detaching&&detach(div2),study_icon_slot_or_fallback&&study_icon_slot_or_fallback.d(detaching),study_name_slot_or_fallback&&study_name_slot_or_fallback.d(detaching),study_author_slot_or_fallback&&study_author_slot_or_fallback.d(detaching),if_block&&if_block.d(),study_cta_slot&&study_cta_slot.d(detaching)}}}function instance$l($$self,$$props,$$invalidate){let{$$slots:slots={},$$scope:$$scope}=$$props,{endDate:endDate}=$$props;return $$self.$$set=$$props=>{"endDate"in $$props&&$$invalidate(0,endDate=$$props.endDate),"$$scope"in $$props&&$$invalidate(1,$$scope=$$props.$$scope)},[endDate,$$scope,slots]}class Header extends SvelteComponent{constructor(options){super(),init(this,options,instance$l,create_fragment$n,safe_not_equal,{endDate:0})}}function create_fragment$o(ctx){let svg,circle,path;return{c(){svg=svg_element("svg"),circle=svg_element("circle"),path=svg_element("path"),attr(circle,"cx","8"),attr(circle,"cy","7.99976"),attr(circle,"r","8"),attr(circle,"fill",ctx[1]),attr(path,"d","M11.1933 5.197C11.4525 4.93556 11.8746 4.93379 12.1361 5.19304C12.3975 5.4523 12.3993 5.8744 12.14 6.13584L6.80671 11.5142C6.54515 11.7779 6.11846 11.777 5.858 11.5122L3.19134 8.80054C2.93317 8.53802 2.9367 8.11592 3.19922 7.85776C3.46174 7.5996 3.88383 7.60313 4.142 7.86564L6.33531 10.0959L11.1933 5.197Z"),attr(path,"fill","white"),attr(svg,"height",ctx[0]),attr(svg,"width",ctx[0]),attr(svg,"viewBox","0 0 16 16"),attr(svg,"fill",ctx[1]),attr(svg,"xmlns","http://www.w3.org/2000/svg")},m(target,anchor){insert(target,svg,anchor),append(svg,circle),append(svg,path)},p(ctx,[dirty]){2&dirty&&attr(circle,"fill",ctx[1]),1&dirty&&attr(svg,"height",ctx[0]),1&dirty&&attr(svg,"width",ctx[0]),2&dirty&&attr(svg,"fill",ctx[1])},i:noop,o:noop,d(detaching){detaching&&detach(svg)}}}function instance$m($$self,$$props,$$invalidate){let{size:size="1em"}=$$props,{color:color="currentColor"}=$$props;return $$self.$$set=$$props=>{"size"in $$props&&$$invalidate(0,size=$$props.size),"color"in $$props&&$$invalidate(1,color=$$props.color)},[size,color]}class CheckCircle extends SvelteComponent{constructor(options){super(),init(this,options,instance$m,create_fragment$o,safe_not_equal,{size:0,color:1})}}var studyCategories={"social media":{text:"var(--color-marketing-gray-100)",background:"#F5F1BA"},misinformation:{text:"var(--color-marketing-gray-100)",background:"#FFD5B2"},"artificial intelligence":{text:"var(--color-marketing-gray-100)",background:"#D98FFF"},devices:{text:"var(--color-marketing-gray-100)",background:"#FFB4DC"},"data & privacy":{text:"var(--color-marketing-gray-100)",background:"#B6F4F7"},accessibility:{text:"var(--color-marketing-gray-100)",background:"#E0ECEC"},"community insights":{text:"var(--color-marketing-gray-100)",background:"#D9BFFF"},"product discovery":{text:"var(--color-marketing-gray-100)",background:"#FFB4DC"}};function create_fragment$p(ctx){let svg,path;return{c(){svg=svg_element("svg"),path=svg_element("path"),attr(path,"d","M7.343,14.657L13,9L7.343,3.343L5.929,4.757L10.172,9L5.929,13.243L7.343,14.657"),attr(svg,"width",ctx[0]),attr(svg,"height",ctx[0]),attr(svg,"fill",ctx[1]),attr(svg,"viewBox","0 0 18 18"),attr(svg,"version","1.1"),attr(svg,"xmlns","http://www.w3.org/2000/svg"),attr(svg,"xmlns:xlink","http://www.w3.org/1999/xlink"),attr(svg,"xml:space","preserve"),attr(svg,"xmlns:serif","http://www.serif.com/"),set_style(svg,"fill-rule","evenodd"),set_style(svg,"clip-rule","evenodd"),set_style(svg,"stroke-linejoin","round"),set_style(svg,"stroke-miterlimit","2")},m(target,anchor){insert(target,svg,anchor),append(svg,path)},p(ctx,[dirty]){1&dirty&&attr(svg,"width",ctx[0]),1&dirty&&attr(svg,"height",ctx[0]),2&dirty&&attr(svg,"fill",ctx[1])},i:noop,o:noop,d(detaching){detaching&&detach(svg)}}}function instance$n($$self,$$props,$$invalidate){let{size:size=24}=$$props,{color:color="currentColor"}=$$props;return $$self.$$set=$$props=>{"size"in $$props&&$$invalidate(0,size=$$props.size),"color"in $$props&&$$invalidate(1,color=$$props.color)},[size,color]}class CaretRight extends SvelteComponent{constructor(options){super(),init(this,options,instance$n,create_fragment$p,safe_not_equal,{size:0,color:1})}}function create_fragment$q(ctx){let button,div,t,span,caretright,current,mounted,dispose;const default_slot_template=ctx[3].default,default_slot=create_slot(default_slot_template,ctx,ctx[2],null),default_slot_or_fallback=default_slot||function(ctx){let t;return{c(){t=text("Channel")},m(target,anchor){insert(target,t,anchor)},d(detaching){detaching&&detach(t)}}}();return caretright=new CaretRight({props:{size:"1em"}}),{c(){button=element("button"),div=element("div"),default_slot_or_fallback&&default_slot_or_fallback.c(),t=space(),span=element("span"),create_component(caretright.$$.fragment),attr(span,"class","caret gafc svelte-wdedye"),set_style(span,"transform","rotate("+(ctx[0]?90:0)+"deg) translateY(.5px)"),attr(div,"class","title svelte-wdedye"),attr(button,"class","accordion-summary svelte-wdedye")},m(target,anchor){insert(target,button,anchor),append(button,div),default_slot_or_fallback&&default_slot_or_fallback.m(div,null),append(div,t),append(div,span),mount_component(caretright,span,null),current=!0,mounted||(dispose=listen(button,"click",ctx[4]),mounted=!0)},p(ctx,[dirty]){default_slot&&default_slot.p&&(!current||4&dirty)&&update_slot(default_slot,default_slot_template,ctx,ctx[2],dirty,null,null),(!current||1&dirty)&&set_style(span,"transform","rotate("+(ctx[0]?90:0)+"deg) translateY(.5px)")},i(local){current||(transition_in(default_slot_or_fallback,local),transition_in(caretright.$$.fragment,local),current=!0)},o(local){transition_out(default_slot_or_fallback,local),transition_out(caretright.$$.fragment,local),current=!1},d(detaching){detaching&&detach(button),default_slot_or_fallback&&default_slot_or_fallback.d(detaching),destroy_component(caretright),mounted=!1,dispose()}}}function instance$o($$self,$$props,$$invalidate){let{$$slots:slots={},$$scope:$$scope}=$$props,{revealed:revealed=!1}=$$props;const expand=(v=!1)=>{$$invalidate(0,revealed=v)};return $$self.$$set=$$props=>{"revealed"in $$props&&$$invalidate(0,revealed=$$props.revealed),"$$scope"in $$props&&$$invalidate(2,$$scope=$$props.$$scope)},[revealed,expand,$$scope,slots,()=>{expand(!revealed)}]}class AccordionButton extends SvelteComponent{constructor(options){super(),init(this,options,instance$o,create_fragment$q,safe_not_equal,{revealed:0,expand:1})}get expand(){return this.$$.ctx[1]}}function get_each_context$2(ctx,list,i){const child_ctx=ctx.slice();return child_ctx[13]=list[i],child_ctx}function get_each_context_1$1(ctx,list,i){const child_ctx=ctx.slice();return child_ctx[16]=list[i],child_ctx}const get_description_slot_changes$1=dirty=>({}),get_description_slot_context$1=ctx=>({}),get_name_slot_changes=dirty=>({}),get_name_slot_context=ctx=>({}),get_author_slot_changes=dirty=>({}),get_author_slot_context=ctx=>({});function create_study_icon_slot(ctx){let img,img_src_value;return{c(){img=element("img"),attr(img,"slot","study-icon"),attr(img,"class","study-card-image"),attr(img,"width","60"),attr(img,"alt","study icon"),img.src!==(img_src_value=ctx[4]||"img/default-study-icon.png")&&attr(img,"src",img_src_value)},m(target,anchor){insert(target,img,anchor)},p(ctx,dirty){16&dirty&&img.src!==(img_src_value=ctx[4]||"img/default-study-icon.png")&&attr(img,"src",img_src_value)},d(detaching){detaching&&detach(img)}}}function create_study_name_slot(ctx){let span,current;const name_slot_template=ctx[9].name,name_slot=create_slot(name_slot_template,ctx,ctx[12],get_name_slot_context),name_slot_or_fallback=name_slot||function(ctx){let t;return{c(){t=text("Study Title")},m(target,anchor){insert(target,t,anchor)},d(detaching){detaching&&detach(t)}}}();return{c(){span=element("span"),name_slot_or_fallback&&name_slot_or_fallback.c(),attr(span,"slot","study-name")},m(target,anchor){insert(target,span,anchor),name_slot_or_fallback&&name_slot_or_fallback.m(span,null),current=!0},p(ctx,dirty){name_slot&&name_slot.p&&(!current||4096&dirty)&&update_slot(name_slot,name_slot_template,ctx,ctx[12],dirty,get_name_slot_changes,get_name_slot_context)},i(local){current||(transition_in(name_slot_or_fallback,local),current=!0)},o(local){transition_out(name_slot_or_fallback,local),current=!1},d(detaching){detaching&&detach(span),name_slot_or_fallback&&name_slot_or_fallback.d(detaching)}}}function create_study_author_slot(ctx){let span,current;const author_slot_template=ctx[9].author,author_slot=create_slot(author_slot_template,ctx,ctx[12],get_author_slot_context),author_slot_or_fallback=author_slot||function(ctx){let t;return{c(){t=text("Study Author")},m(target,anchor){insert(target,t,anchor)},d(detaching){detaching&&detach(t)}}}();return{c(){span=element("span"),author_slot_or_fallback&&author_slot_or_fallback.c(),attr(span,"slot","study-author")},m(target,anchor){insert(target,span,anchor),author_slot_or_fallback&&author_slot_or_fallback.m(span,null),current=!0},p(ctx,dirty){author_slot&&author_slot.p&&(!current||4096&dirty)&&update_slot(author_slot,author_slot_template,ctx,ctx[12],dirty,get_author_slot_changes,get_author_slot_context)},i(local){current||(transition_in(author_slot_or_fallback,local),current=!0)},o(local){transition_out(author_slot_or_fallback,local),current=!1},d(detaching){detaching&&detach(span),author_slot_or_fallback&&author_slot_or_fallback.d(detaching)}}}function create_else_block_1(ctx){let t;return{c(){t=text("Join Study")},m(target,anchor){insert(target,t,anchor)},d(detaching){detaching&&detach(t)}}}function create_if_block_6(ctx){let t;return{c(){t=text("Leave Study")},m(target,anchor){insert(target,t,anchor)},d(detaching){detaching&&detach(t)}}}function create_default_slot_1$4(ctx){let if_block_anchor;function select_block_type(ctx,dirty){return ctx[1]?create_if_block_6:create_else_block_1}let current_block_type=select_block_type(ctx),if_block=current_block_type(ctx);return{c(){if_block.c(),if_block_anchor=empty()},m(target,anchor){if_block.m(target,anchor),insert(target,if_block_anchor,anchor)},p(ctx,dirty){current_block_type!==(current_block_type=select_block_type(ctx))&&(if_block.d(1),if_block=current_block_type(ctx),if_block&&(if_block.c(),if_block.m(if_block_anchor.parentNode,if_block_anchor)))},d(detaching){if_block.d(detaching),detaching&&detach(if_block_anchor)}}}function create_study_cta_slot(ctx){let span,div,button,current;return button=new Button({props:{size:"md",product:!ctx[1],leave:ctx[1],$$slots:{default:[create_default_slot_1$4]},$$scope:{ctx:ctx}}}),button.$on("click",ctx[10]),{c(){span=element("span"),div=element("div"),create_component(button.$$.fragment),attr(div,"class","study-card-cta svelte-1x2qt8f"),attr(span,"slot","study-cta")},m(target,anchor){insert(target,span,anchor),append(span,div),mount_component(button,div,null),current=!0},p(ctx,dirty){const button_changes={};2&dirty&&(button_changes.product=!ctx[1]),2&dirty&&(button_changes.leave=ctx[1]),4098&dirty&&(button_changes.$$scope={dirty:dirty,ctx:ctx}),button.$set(button_changes)},i(local){current||(transition_in(button.$$.fragment,local),current=!0)},o(local){transition_out(button.$$.fragment,local),current=!1},d(detaching){detaching&&detach(span),destroy_component(button)}}}function create_if_block_3$2(ctx){let div,accordionbutton,updating_revealed,t,current;function accordionbutton_revealed_binding(value){ctx[11](value)}let accordionbutton_props={$$slots:{default:[create_default_slot$5]},$$scope:{ctx:ctx}};void 0!==ctx[7]&&(accordionbutton_props.revealed=ctx[7]),accordionbutton=new AccordionButton({props:accordionbutton_props}),binding_callbacks.push((()=>bind(accordionbutton,"revealed",accordionbutton_revealed_binding)));let if_block=ctx[1]&&create_if_block_4$2(ctx);return{c(){div=element("div"),create_component(accordionbutton.$$.fragment),t=space(),if_block&&if_block.c(),attr(div,"class","joined-study-accordion svelte-1x2qt8f")},m(target,anchor){insert(target,div,anchor),mount_component(accordionbutton,div,null),append(div,t),if_block&&if_block.m(div,null),current=!0},p(ctx,dirty){const accordionbutton_changes={};4096&dirty&&(accordionbutton_changes.$$scope={dirty:dirty,ctx:ctx}),!updating_revealed&&128&dirty&&(updating_revealed=!0,accordionbutton_changes.revealed=ctx[7],add_flush_callback((()=>updating_revealed=!1))),accordionbutton.$set(accordionbutton_changes),ctx[1]?if_block?(if_block.p(ctx,dirty),2&dirty&&transition_in(if_block,1)):(if_block=create_if_block_4$2(ctx),if_block.c(),transition_in(if_block,1),if_block.m(div,null)):if_block&&(group_outros(),transition_out(if_block,1,1,(()=>{if_block=null})),check_outros())},i(local){current||(transition_in(accordionbutton.$$.fragment,local),transition_in(if_block),current=!0)},o(local){transition_out(accordionbutton.$$.fragment,local),transition_out(if_block),current=!1},d(detaching){detaching&&detach(div),destroy_component(accordionbutton),if_block&&if_block.d()}}}function create_default_slot$5(ctx){let h4;return{c(){h4=element("h4"),h4.textContent="Study Description",attr(h4,"class","study-card-subheader text-display-xxs svelte-1x2qt8f")},m(target,anchor){insert(target,h4,anchor)},d(detaching){detaching&&detach(h4)}}}function create_if_block_4$2(ctx){let div,t,span,checkcircle,current;function select_block_type_1(ctx,dirty){return ctx[2]?create_if_block_5$2:create_else_block$2}let current_block_type=select_block_type_1(ctx),if_block=current_block_type(ctx);return checkcircle=new CheckCircle({props:{size:"20px",color:"var(--color-green-60)"}}),{c(){div=element("div"),if_block.c(),t=space(),span=element("span"),create_component(checkcircle.$$.fragment),attr(span,"class","gafc"),set_style(span,"transform","translateY(-1px)"),attr(div,"class","study-card-joined-date svelte-1x2qt8f")},m(target,anchor){insert(target,div,anchor),if_block.m(div,null),append(div,t),append(div,span),mount_component(checkcircle,span,null),current=!0},p(ctx,dirty){current_block_type===(current_block_type=select_block_type_1(ctx))&&if_block?if_block.p(ctx,dirty):(if_block.d(1),if_block=current_block_type(ctx),if_block&&(if_block.c(),if_block.m(div,t)))},i(local){current||(transition_in(checkcircle.$$.fragment,local),current=!0)},o(local){transition_out(checkcircle.$$.fragment,local),current=!1},d(detaching){detaching&&detach(div),if_block.d(),destroy_component(checkcircle)}}}function create_else_block$2(ctx){let t;return{c(){t=text("joined")},m(target,anchor){insert(target,t,anchor)},p:noop,d(detaching){detaching&&detach(t)}}}function create_if_block_5$2(ctx){let t0,t1,t1_value=niceDate(ctx[2])+"";return{c(){t0=text("joined on\n              "),t1=text(t1_value)},m(target,anchor){insert(target,t0,anchor),insert(target,t1,anchor)},p(ctx,dirty){4&dirty&&t1_value!==(t1_value=niceDate(ctx[2])+"")&&set_data(t1,t1_value)},d(detaching){detaching&&detach(t0),detaching&&detach(t1)}}}function create_if_block$7(ctx){let div5,div1,t0,div0,t1,t2,hr,t3,div4,div2,t4,div3,a,t5,externallink,div5_transition,current,if_block0=!ctx[1]&&create_if_block_2$2();const description_slot_template=ctx[9].description,description_slot=create_slot(description_slot_template,ctx,ctx[12],get_description_slot_context$1),description_slot_or_fallback=description_slot||function(ctx){let p;return{c(){p=element("p"),p.textContent="description missing"},m(target,anchor){insert(target,p,anchor)},d(detaching){detaching&&detach(p)}}}();let if_block1=ctx[5].length&&create_if_block_1$2(ctx),each_value=ctx[6],each_blocks=[];for(let i=0;i<each_value.length;i+=1)each_blocks[i]=create_each_block$2(get_each_context$2(ctx,each_value,i));return externallink=new ExternalLink({}),{c(){div5=element("div"),div1=element("div"),if_block0&&if_block0.c(),t0=space(),div0=element("div"),description_slot_or_fallback&&description_slot_or_fallback.c(),t1=space(),if_block1&&if_block1.c(),t2=space(),hr=element("hr"),t3=space(),div4=element("div"),div2=element("div");for(let i=0;i<each_blocks.length;i+=1)each_blocks[i].c();t4=space(),div3=element("div"),a=element("a"),t5=text("View Full Study Details "),create_component(externallink.$$.fragment),attr(div0,"class","study-card-description body-copy text-body-sm svelte-1x2qt8f"),attr(div1,"class","study-card-content svelte-1x2qt8f"),attr(hr,"class","svelte-1x2qt8f"),attr(div2,"class","study-card-tags svelte-1x2qt8f"),attr(a,"target","_blank"),attr(a,"rel","noopener noreferrer"),attr(a,"class","external-link"),set_style(a,"--spacing","6px"),attr(a,"href",ctx[3]),attr(div3,"class","study-card-privacy-policy svelte-1x2qt8f"),attr(div4,"class","study-card-footer svelte-1x2qt8f"),attr(div5,"class","study-card-body")},m(target,anchor){insert(target,div5,anchor),append(div5,div1),if_block0&&if_block0.m(div1,null),append(div1,t0),append(div1,div0),description_slot_or_fallback&&description_slot_or_fallback.m(div0,null),append(div1,t1),if_block1&&if_block1.m(div1,null),append(div5,t2),append(div5,hr),append(div5,t3),append(div5,div4),append(div4,div2);for(let i=0;i<each_blocks.length;i+=1)each_blocks[i].m(div2,null);append(div4,t4),append(div4,div3),append(div3,a),append(a,t5),mount_component(externallink,a,null),current=!0},p(ctx,dirty){if(ctx[1]?if_block0&&(if_block0.d(1),if_block0=null):if_block0||(if_block0=create_if_block_2$2(),if_block0.c(),if_block0.m(div1,t0)),description_slot&&description_slot.p&&(!current||4096&dirty)&&update_slot(description_slot,description_slot_template,ctx,ctx[12],dirty,get_description_slot_changes$1,get_description_slot_context$1),ctx[5].length?if_block1?if_block1.p(ctx,dirty):(if_block1=create_if_block_1$2(ctx),if_block1.c(),if_block1.m(div1,null)):if_block1&&(if_block1.d(1),if_block1=null),64&dirty){let i;for(each_value=ctx[6],i=0;i<each_value.length;i+=1){const child_ctx=get_each_context$2(ctx,each_value,i);each_blocks[i]?each_blocks[i].p(child_ctx,dirty):(each_blocks[i]=create_each_block$2(child_ctx),each_blocks[i].c(),each_blocks[i].m(div2,null))}for(;i<each_blocks.length;i+=1)each_blocks[i].d(1);each_blocks.length=each_value.length}(!current||8&dirty)&&attr(a,"href",ctx[3])},i(local){current||(transition_in(description_slot_or_fallback,local),transition_in(externallink.$$.fragment,local),local&&add_render_callback((()=>{div5_transition||(div5_transition=create_bidirectional_transition(div5,slide,{duration:200},!0)),div5_transition.run(1)})),current=!0)},o(local){transition_out(description_slot_or_fallback,local),transition_out(externallink.$$.fragment,local),local&&(div5_transition||(div5_transition=create_bidirectional_transition(div5,slide,{duration:200},!1)),div5_transition.run(0)),current=!1},d(detaching){detaching&&detach(div5),if_block0&&if_block0.d(),description_slot_or_fallback&&description_slot_or_fallback.d(detaching),if_block1&&if_block1.d(),destroy_each(each_blocks,detaching),destroy_component(externallink),detaching&&div5_transition&&div5_transition.end()}}}function create_if_block_2$2(ctx){let h4;return{c(){h4=element("h4"),h4.textContent="Study Description",attr(h4,"class","study-card-subheader text-display-xxs svelte-1x2qt8f")},m(target,anchor){insert(target,h4,anchor)},d(detaching){detaching&&detach(h4)}}}function create_if_block_1$2(ctx){let div,h4,t1,ul,each_value_1=ctx[5],each_blocks=[];for(let i=0;i<each_value_1.length;i+=1)each_blocks[i]=create_each_block_1$1(get_each_context_1$1(ctx,each_value_1,i));return{c(){div=element("div"),h4=element("h4"),h4.textContent="Key Data Collected",t1=space(),ul=element("ul");for(let i=0;i<each_blocks.length;i+=1)each_blocks[i].c();attr(h4,"class","study-card-subheader text-display-xxs svelte-1x2qt8f"),set_style(h4,"margin-bottom","10px"),attr(ul,"class","mzp-u-list-styled study-card-section-body data-collection-details body-copy text-body-sm svelte-1x2qt8f"),attr(div,"class","study-card-section study-card-collected body-copy text-body-sm")},m(target,anchor){insert(target,div,anchor),append(div,h4),append(div,t1),append(div,ul);for(let i=0;i<each_blocks.length;i+=1)each_blocks[i].m(ul,null)},p(ctx,dirty){if(32&dirty){let i;for(each_value_1=ctx[5],i=0;i<each_value_1.length;i+=1){const child_ctx=get_each_context_1$1(ctx,each_value_1,i);each_blocks[i]?each_blocks[i].p(child_ctx,dirty):(each_blocks[i]=create_each_block_1$1(child_ctx),each_blocks[i].c(),each_blocks[i].m(ul,null))}for(;i<each_blocks.length;i+=1)each_blocks[i].d(1);each_blocks.length=each_value_1.length}},d(detaching){detaching&&detach(div),destroy_each(each_blocks,detaching)}}}function create_each_block_1$1(ctx){let li,t,t_value=ctx[16]+"";return{c(){li=element("li"),t=text(t_value),attr(li,"class","svelte-1x2qt8f")},m(target,anchor){insert(target,li,anchor),append(li,t)},p(ctx,dirty){32&dirty&&t_value!==(t_value=ctx[16]+"")&&set_data(t,t_value)},d(detaching){detaching&&detach(li)}}}function create_each_block$2(ctx){let div,t,div_style_value,t_value=ctx[13]+"";return{c(){div=element("div"),t=text(t_value),attr(div,"class","tag radius-sm svelte-1x2qt8f"),attr(div,"style",div_style_value=`\n                color: ${studyCategories[ctx[13]]&&studyCategories[ctx[13]].color||"var(--color-marketing-gray-100)"}; \n                background: ${studyCategories[ctx[13]]&&studyCategories[ctx[13]].background||"white"};\n                `)},m(target,anchor){insert(target,div,anchor),append(div,t)},p(ctx,dirty){64&dirty&&t_value!==(t_value=ctx[13]+"")&&set_data(t,t_value),64&dirty&&div_style_value!==(div_style_value=`\n                color: ${studyCategories[ctx[13]]&&studyCategories[ctx[13]].color||"var(--color-marketing-gray-100)"}; \n                background: ${studyCategories[ctx[13]]&&studyCategories[ctx[13]].background||"white"};\n                `)&&attr(div,"style",div_style_value)},d(detaching){detaching&&detach(div)}}}function create_fragment$r(ctx){let div,header,t0,hr,t1,t2,current;header=new Header({props:{endDate:ctx[0],$$slots:{"study-cta":[create_study_cta_slot],"study-author":[create_study_author_slot],"study-name":[create_study_name_slot],"study-icon":[create_study_icon_slot]},$$scope:{ctx:ctx}}});let if_block0=ctx[1]&&create_if_block_3$2(ctx),if_block1=(ctx[7]||!ctx[1])&&create_if_block$7(ctx);return{c(){div=element("div"),create_component(header.$$.fragment),t0=space(),hr=element("hr"),t1=space(),if_block0&&if_block0.c(),t2=space(),if_block1&&if_block1.c(),attr(hr,"class","header-divider svelte-1x2qt8f"),attr(div,"class","study-card-container radius-sm svelte-1x2qt8f")},m(target,anchor){insert(target,div,anchor),mount_component(header,div,null),append(div,t0),append(div,hr),append(div,t1),if_block0&&if_block0.m(div,null),append(div,t2),if_block1&&if_block1.m(div,null),current=!0},p(ctx,[dirty]){const header_changes={};1&dirty&&(header_changes.endDate=ctx[0]),4114&dirty&&(header_changes.$$scope={dirty:dirty,ctx:ctx}),header.$set(header_changes),ctx[1]?if_block0?(if_block0.p(ctx,dirty),2&dirty&&transition_in(if_block0,1)):(if_block0=create_if_block_3$2(ctx),if_block0.c(),transition_in(if_block0,1),if_block0.m(div,t2)):if_block0&&(group_outros(),transition_out(if_block0,1,1,(()=>{if_block0=null})),check_outros()),ctx[7]||!ctx[1]?if_block1?(if_block1.p(ctx,dirty),130&dirty&&transition_in(if_block1,1)):(if_block1=create_if_block$7(ctx),if_block1.c(),transition_in(if_block1,1),if_block1.m(div,null)):if_block1&&(group_outros(),transition_out(if_block1,1,1,(()=>{if_block1=null})),check_outros())},i(local){current||(transition_in(header.$$.fragment,local),transition_in(if_block0),transition_in(if_block1),current=!0)},o(local){transition_out(header.$$.fragment,local),transition_out(if_block0),transition_out(if_block1),current=!1},d(detaching){detaching&&detach(div),destroy_component(header),if_block0&&if_block0.d(),if_block1&&if_block1.d()}}}function instance$p($$self,$$props,$$invalidate){let{$$slots:slots={},$$scope:$$scope}=$$props,revealed=!1,{endDate:endDate}=$$props,{joined:joined=!1}=$$props,{joinedDate:joinedDate}=$$props,{studyDetailsLink:studyDetailsLink}=$$props,{imageSrc:imageSrc}=$$props,{dataCollectionDetails:dataCollectionDetails=[]}=$$props,{tags:tags=[]}=$$props;const dispatch=createEventDispatcher();return $$self.$$set=$$props=>{"endDate"in $$props&&$$invalidate(0,endDate=$$props.endDate),"joined"in $$props&&$$invalidate(1,joined=$$props.joined),"joinedDate"in $$props&&$$invalidate(2,joinedDate=$$props.joinedDate),"studyDetailsLink"in $$props&&$$invalidate(3,studyDetailsLink=$$props.studyDetailsLink),"imageSrc"in $$props&&$$invalidate(4,imageSrc=$$props.imageSrc),"dataCollectionDetails"in $$props&&$$invalidate(5,dataCollectionDetails=$$props.dataCollectionDetails),"tags"in $$props&&$$invalidate(6,tags=$$props.tags),"$$scope"in $$props&&$$invalidate(12,$$scope=$$props.$$scope)},[endDate,joined,joinedDate,studyDetailsLink,imageSrc,dataCollectionDetails,tags,revealed,dispatch,slots,()=>{dispatch(joined?"leave":"join")},function(value){revealed=value,$$invalidate(7,revealed)},$$scope]}class StudyCard extends SvelteComponent{constructor(options){super(),init(this,options,instance$p,create_fragment$r,safe_not_equal,{endDate:0,joined:1,joinedDate:2,studyDetailsLink:3,imageSrc:4,dataCollectionDetails:5,tags:6})}}function create_fragment$s(ctx){let div1,t,div0,current;const default_slot_template=ctx[1].default,default_slot=create_slot(default_slot_template,ctx,ctx[0],null);return{c(){div1=element("div"),default_slot&&default_slot.c(),t=space(),div0=element("div"),attr(div0,"class","irb-bottom-fader svelte-1dtbft3"),attr(div1,"class","irb-window svelte-1dtbft3")},m(target,anchor){insert(target,div1,anchor),default_slot&&default_slot.m(div1,null),append(div1,t),append(div1,div0),current=!0},p(ctx,[dirty]){default_slot&&default_slot.p&&(!current||1&dirty)&&update_slot(default_slot,default_slot_template,ctx,ctx[0],dirty,null,null)},i(local){current||(transition_in(default_slot,local),current=!0)},o(local){transition_out(default_slot,local),current=!1},d(detaching){detaching&&detach(div1),default_slot&&default_slot.d(detaching)}}}function instance$q($$self,$$props,$$invalidate){let{$$slots:slots={},$$scope:$$scope}=$$props;return $$self.$$set=$$props=>{"$$scope"in $$props&&$$invalidate(0,$$scope=$$props.$$scope)},[$$scope,slots]}class IRBWindow extends SvelteComponent{constructor(options){super(),init(this,options,instance$q,create_fragment$s,safe_not_equal,{})}}function create_fragment$t(ctx){let h1,t1,p0,t3,h2,t5,p1;return{c(){h1=element("h1"),h1.textContent="Rally Study Consent Notice",t1=space(),p0=element("p"),p0.textContent='Data will be collected through a custom browser web extension developed by the Rally team.  \n  We will install the web extension and data will be collected through browser data after you opt-in. \n  Mozilla will store the data on Google Cloud where all analysis will be conducted. \n  This server is restricted to the study researchers and is encrypted. \n  Data will be transferred by TLS between the participant\'s browser and the Mozilla analysis database. \n  TLS stands for "transport layer security" which encrypts browser data.',t3=space(),h2=element("h2"),h2.textContent="Leaving the Study",t5=space(),p1=element("p"),p1.innerHTML='You can leave the study at any time from the Mozilla Rally options page. To\n  access the page, click on the Rally button <img style="padding: 0 4px;" width="16" src="img/rally-toolbar-icon.svg" alt="rally icon"/>\n  in your browser toolbar. The button is usually near the top right of the browser\n  window. If you have removed the Rally button from your toolbar, you can also access\n  the Rally options page from the browserâ€™s Add-ons settings. The Rally options page\n  will show you a list of studies that you are currently enrolled in. You can leave\n  this study by clicking the â€œLeave Studyâ€ button on the associated study card. If\n  you leave the study, the studyâ€™s browser extension will be automatically uninstalled,\n  removing the study code and data from your browser. We will also automatically\n  delete the data that your browser has submitted for the study, unless you allow\n  us to retain that data. You may not be able to rejoin the study if you leave. If\n  you leave Rally, you will also leave the studies that you are enrolled in, including\n  this study.',attr(h1,"class","svelte-tp8r7k"),attr(p0,"class","svelte-tp8r7k"),attr(h2,"class","svelte-tp8r7k"),attr(p1,"class","svelte-tp8r7k")},m(target,anchor){insert(target,h1,anchor),insert(target,t1,anchor),insert(target,p0,anchor),insert(target,t3,anchor),insert(target,h2,anchor),insert(target,t5,anchor),insert(target,p1,anchor)},p:noop,i:noop,o:noop,d(detaching){detaching&&detach(h1),detaching&&detach(t1),detaching&&detach(p0),detaching&&detach(t3),detaching&&detach(h2),detaching&&detach(t5),detaching&&detach(p1)}}}class GenericConsent extends SvelteComponent{constructor(options){super(),init(this,options,null,create_fragment$t,safe_not_equal,{})}}function create_fragment$u(ctx){let h1,t1,div2,t5,dl,t12,h20,t14,p0,t16,h21,t18,p1,t20,h22,t22,p2,t24,h23,t26,p3,t28,p4,t30,h24,t32,p5,t35,h25,t37,p6,t39,h26,t41,p7,t43,p8,t52,p9,t55,p10,t58,h27,t60,p11,t62,h28,t64,p12,t68,p13,t70,p14,t75,h29,t77,p15,t79,ul,t89,p16;return{c(){h1=element("h1"),h1.textContent="Rally Study Privacy Consent Notice",t1=space(),div2=element("div"),div2.innerHTML="<div>Your informed consent is being sought for research.</div> \n    <div>Participation in the research is voluntary.</div>",t5=space(),dl=element("dl"),dl.innerHTML='<dt class="svelte-1xvlme0">Academic Institution</dt><dd class="svelte-1xvlme0">Princeton University</dd><dt class="svelte-1xvlme0">Study Name</dt><dd class="svelte-1xvlme0">COVID-19 and Political Information Flows</dd><dt class="svelte-1xvlme0">Principal Investigator</dt><dd class="svelte-1xvlme0">Jonathan Mayer, Assistant Professor of Computer Science and Public\n      Affairs</dd>',t12=space(),h20=element("h2"),h20.textContent="IRB Approval",t14=space(),p0=element("p"),p0.textContent="This study has been approved by the Institutional Review Board for Human Subjects at Princeton University.",t16=space(),h21=element("h2"),h21.textContent="Study Purpose",t18=space(),p1=element("p"),p1.textContent="The study assesses how individuals are exposed to, consuming, sharing, and acting on health and political \n    information and misinformation during the COVID-19 pandemic.",t20=space(),h22=element("h2"),h22.textContent="Study Benefits to Society",t22=space(),p2=element("p"),p2.textContent="This study will help identify information distribution pathways for truthful and inaccurate information during the \n    COVID-19 pandemic. Understanding these pathways is crucial to designing public health interventions and addressing online misinformation.",t24=space(),h23=element("h2"),h23.textContent="Study Procedures",t26=space(),p3=element("p"),p3.textContent="During the study, your browser will automatically send data to Mozilla about how you engage with health and news websites, \n    in addition to standard Firefox telemetry. We have taken a number of steps to minimize and protect this data, which we describe below. \n    You may also be asked to participate in periodic surveys. \n    If you choose to provide demographic information for Mozilla Rally research purposes, \n    that information will also be used for this study.",t28=space(),p4=element("p"),p4.textContent="Your participation in the study will conclude when data collection is completed or, \n    if you choose to discontinue participation, when you make that choice. \n    Data collection will last no longer than 6 months, \n    and we will not retain data that is linkable to your browser for longer than 6 months.",t30=space(),h24=element("h2"),h24.textContent="Leaving the Study",t32=space(),p5=element("p"),p5.innerHTML='You can leave the study at any time from the Mozilla Rally options page. \n    To access the page, click on the Rally button <img style="padding: 0 4px;" width="18" src="img/rally-toolbar-icon.svg" alt="rally icon"/> in your browser toolbar. \n    The button is usually near the top right of the browser window. \n    If you have removed the Rally button from your toolbar, \n    you can also access the Rally options page from the browserâ€™s Add-ons settings. \n    The Rally options page will show you a list of studies that you are currently enrolled in. \n    You can leave this study by clicking the â€œLeave Studyâ€ button on the associated study card.  \n    If you leave the study, the studyâ€™s browser extension will be automatically uninstalled, \n    removing the study code and data from your browser. \n    We will also automatically delete the data that your browser has submitted for the study, \n    unless you allow us to retain that data.\n    You may not be able to rejoin the study if you leave. \n    If you leave Rally, you will also leave the studies that you are enrolled in, including this study.',t35=space(),h25=element("h2"),h25.textContent="Study Risks and Alternative Procedures",t37=space(),p6=element("p"),p6.textContent="There is minimal risk associated with participating in the study. \n    There are no alternative means of participating in the study that may be advantageous to you.",t39=space(),h26=element("h2"),h26.textContent="Privacy",t41=space(),p7=element("p"),p7.textContent="We will protect the information that you provide in several ways: minimizing the data we collect, \n    keeping the data we collect secure, and limiting the information we use and disclose.",t43=space(),p8=element("p"),p8.innerHTML="<em>Data minimization:</em> We will limit our data collection to information needed to carry out our study. \n    We will not collect your name, email address, or similar contact information. \n    We also will make no effort to identify you on the basis of information you provide. \n    When collecting data about your web browsing, we will use coarse and aggregate measures as much as possible. \n    For instance, when collecting data about your visit to a webpage, \n    we will only collect a <em>time window</em> in which the event occurred instead of the exact time, \n    and we will only collect the <em>domain name</em> and <em>page type</em> for the webpage rather than the full URL. \n    We will also only collect activity specific to a website \n    if we have previously categorized the website as health or news related.",t52=space(),p9=element("p"),p9.innerHTML="<em>Data security:</em> We will encrypt the data that you provide both in transit and at rest. \n    We will only allow access to Princeton researchers and Mozilla personnel who have specific responsibilities in carrying out the study.",t55=space(),p10=element("p"),p10.innerHTML="<em>Data use and disclosure:</em> We will only use the data you provide to carry out this academic study. \n    We will not disclose information that identifies you or that could reasonably be used to identify you.",t58=space(),h27=element("h2"),h27.textContent="Compensation",t60=space(),p11=element("p"),p11.textContent="There is no compensation for participation in this study.",t62=space(),h28=element("h2"),h28.textContent="Who to Contact with Questions",t64=space(),p12=element("p"),p12.innerHTML='Please contact the Principal Investigator, Jonathan Mayer (<a href="mailto:covid-19-study@lists.cs.princeton.edu">covid-19-study@lists.cs.princeton.edu</a>), with any questions about the study.',t68=space(),p13=element("p"),p13.textContent="If you have questions regarding your rights as a research subject, or\n    if problems arise which you do not feel you can discuss with the\n    Investigator, please contact the Institutional Review Board for Human\n    Subjects at Princeton University at:",t70=space(),p14=element("p"),p14.innerHTML='Assistant Director, Research Integrity and Assurance<br/>\n    (609) 258-8543<br/> \n    <a href="mailto:irb@princeton.edu">irb@princeton.edu</a>',t75=space(),h29=element("h2"),h29.textContent="Summary of Consent",t77=space(),p15=element("p"),p15.textContent="I understand the information that was presented and that:",t79=space(),ul=element("ul"),ul.innerHTML="<li>My participation is voluntary.</li> \n    <li>Refusal to participate will involve no penalty or loss of benefits\n    to which I am otherwise entitled.</li> \n    <li>I may discontinue participation at any time without penalty or loss\n    of benefits.</li> \n    <li>I do not waive any legal rights or release Princeton University or\n    its employees from liability for negligence.</li> \n    <li>I am over the age of 18 and located in the United States.</li>",t89=space(),p16=element("p"),p16.textContent="I hereby give my consent to be the subject of the research.",attr(h1,"class","svelte-1xvlme0"),attr(div2,"class","research-is-voluntary svelte-1xvlme0"),attr(dl,"class","svelte-1xvlme0"),attr(h20,"class","svelte-1xvlme0"),attr(p0,"class","svelte-1xvlme0"),attr(h21,"class","svelte-1xvlme0"),attr(p1,"class","svelte-1xvlme0"),attr(h22,"class","svelte-1xvlme0"),attr(p2,"class","svelte-1xvlme0"),attr(h23,"class","svelte-1xvlme0"),attr(p3,"class","svelte-1xvlme0"),attr(p4,"class","svelte-1xvlme0"),attr(h24,"class","svelte-1xvlme0"),attr(p5,"class","svelte-1xvlme0"),attr(h25,"class","svelte-1xvlme0"),attr(p6,"class","svelte-1xvlme0"),attr(h26,"class","svelte-1xvlme0"),attr(p7,"class","svelte-1xvlme0"),attr(p8,"class","svelte-1xvlme0"),attr(p9,"class","svelte-1xvlme0"),attr(p10,"class","svelte-1xvlme0"),attr(h27,"class","svelte-1xvlme0"),attr(p11,"class","svelte-1xvlme0"),attr(h28,"class","svelte-1xvlme0"),attr(p12,"class","svelte-1xvlme0"),attr(p13,"class","svelte-1xvlme0"),attr(p14,"class","svelte-1xvlme0"),attr(h29,"class","svelte-1xvlme0"),attr(p15,"class","svelte-1xvlme0"),attr(ul,"class","mzp-u-list-styled svelte-1xvlme0"),attr(p16,"class","svelte-1xvlme0")},m(target,anchor){insert(target,h1,anchor),insert(target,t1,anchor),insert(target,div2,anchor),insert(target,t5,anchor),insert(target,dl,anchor),insert(target,t12,anchor),insert(target,h20,anchor),insert(target,t14,anchor),insert(target,p0,anchor),insert(target,t16,anchor),insert(target,h21,anchor),insert(target,t18,anchor),insert(target,p1,anchor),insert(target,t20,anchor),insert(target,h22,anchor),insert(target,t22,anchor),insert(target,p2,anchor),insert(target,t24,anchor),insert(target,h23,anchor),insert(target,t26,anchor),insert(target,p3,anchor),insert(target,t28,anchor),insert(target,p4,anchor),insert(target,t30,anchor),insert(target,h24,anchor),insert(target,t32,anchor),insert(target,p5,anchor),insert(target,t35,anchor),insert(target,h25,anchor),insert(target,t37,anchor),insert(target,p6,anchor),insert(target,t39,anchor),insert(target,h26,anchor),insert(target,t41,anchor),insert(target,p7,anchor),insert(target,t43,anchor),insert(target,p8,anchor),insert(target,t52,anchor),insert(target,p9,anchor),insert(target,t55,anchor),insert(target,p10,anchor),insert(target,t58,anchor),insert(target,h27,anchor),insert(target,t60,anchor),insert(target,p11,anchor),insert(target,t62,anchor),insert(target,h28,anchor),insert(target,t64,anchor),insert(target,p12,anchor),insert(target,t68,anchor),insert(target,p13,anchor),insert(target,t70,anchor),insert(target,p14,anchor),insert(target,t75,anchor),insert(target,h29,anchor),insert(target,t77,anchor),insert(target,p15,anchor),insert(target,t79,anchor),insert(target,ul,anchor),insert(target,t89,anchor),insert(target,p16,anchor)},p:noop,i:noop,o:noop,d(detaching){detaching&&detach(h1),detaching&&detach(t1),detaching&&detach(div2),detaching&&detach(t5),detaching&&detach(dl),detaching&&detach(t12),detaching&&detach(h20),detaching&&detach(t14),detaching&&detach(p0),detaching&&detach(t16),detaching&&detach(h21),detaching&&detach(t18),detaching&&detach(p1),detaching&&detach(t20),detaching&&detach(h22),detaching&&detach(t22),detaching&&detach(p2),detaching&&detach(t24),detaching&&detach(h23),detaching&&detach(t26),detaching&&detach(p3),detaching&&detach(t28),detaching&&detach(p4),detaching&&detach(t30),detaching&&detach(h24),detaching&&detach(t32),detaching&&detach(p5),detaching&&detach(t35),detaching&&detach(h25),detaching&&detach(t37),detaching&&detach(p6),detaching&&detach(t39),detaching&&detach(h26),detaching&&detach(t41),detaching&&detach(p7),detaching&&detach(t43),detaching&&detach(p8),detaching&&detach(t52),detaching&&detach(p9),detaching&&detach(t55),detaching&&detach(p10),detaching&&detach(t58),detaching&&detach(h27),detaching&&detach(t60),detaching&&detach(p11),detaching&&detach(t62),detaching&&detach(h28),detaching&&detach(t64),detaching&&detach(p12),detaching&&detach(t68),detaching&&detach(p13),detaching&&detach(t70),detaching&&detach(p14),detaching&&detach(t75),detaching&&detach(h29),detaching&&detach(t77),detaching&&detach(p15),detaching&&detach(t79),detaching&&detach(ul),detaching&&detach(t89),detaching&&detach(p16)}}}function create_fragment$v(ctx){let h1,t1,p0,t5,p1,t9,p2,t13,p3,t15,p4,t17,h2,t19,p5;return{c(){h1=element("h1"),h1.textContent="Rally Study Consent Notice",t1=space(),p0=element("p"),p0.innerHTML="The goal of this study is to improve our understanding of how our community\n  browses the internet, where they spend their time, and <b>how these browsing dynamics differ across segments of people</b>.",t5=space(),p1=element("p"),p1.innerHTML='To understand this we will collect data about your browsing experience. More\n  specifically, what websites you browse (e.g., wikipedia.org), how long you\n  view pages, how far you scroll on pages, when a page plays audio, and for how\n  long audio is playing. The data we collect about the specific pages you browse\n  is limited to the page title, description, and category. For more information\n  take a look at our <a target="_blank" href="http://rally.mozilla.org/current-studies/your-time-online-and-doomscrolling/">additional details page</a>.',t9=space(),p2=element("p"),p2.innerHTML="This data is not aggregated before it is sent to our servers; this study will\n  record all events. After we analyze our data we will publish aggregated\n  insights on our blog or other channels. When we do so, <b>we will minimize what weâ€™re sharing publicly by ensuring we aggregate the\n    data</b>.",t13=space(),p3=element("p"),p3.textContent='Data will be collected through a custom browser web extension developed by the\n  Rally team. We will install the web extension and data will be collected\n  through browser data after you opt-in. Mozilla will store the data on Google\n  Cloud where all analysis will be conducted. This server is restricted to the\n  Rally team researchers and is encrypted. Data will be transferred by TLS\n  between the participant\'s browser and the Mozilla analysis database. TLS\n  stands for "transport layer security" which encrypts browser data.',t15=space(),p4=element("p"),p4.textContent="This study will be open for 6 months, and you can unenroll at any time by\n  following the steps below.",t17=space(),h2=element("h2"),h2.textContent="Leaving the Study",t19=space(),p5=element("p"),p5.innerHTML='You can leave the study at any time from the Mozilla Rally options page. To\n  access the page, click on the Rally button <img style="padding: 0 4px;" width="16" src="img/rally-toolbar-icon.svg" alt="rally icon"/>\n  in your browser toolbar. The button is usually near the top right of the browser\n  window. If you have removed the Rally button from your toolbar, you can also access\n  the Rally options page from the browserâ€™s add-ons settings. The Rally options page\n  will show you a list of studies that you are currently enrolled in. You can leave\n  this study by clicking the â€œLeave Studyâ€ button on the associated study card. If\n  you leave the study, the studyâ€™s browser extension will be automatically uninstalled,\n  removing the study code and data from your browser. We will also automatically\n  delete the data that your browser has submitted for the study, unless you allow\n  us to retain that data. You may not be able to rejoin the study if you leave. If\n  you leave Rally, you will also leave the studies that you are enrolled in, including\n  this study.',attr(h1,"class","svelte-tp8r7k"),attr(p0,"class","svelte-tp8r7k"),attr(p1,"class","svelte-tp8r7k"),attr(p2,"class","svelte-tp8r7k"),attr(p3,"class","svelte-tp8r7k"),attr(p4,"class","svelte-tp8r7k"),attr(h2,"class","svelte-tp8r7k"),attr(p5,"class","svelte-tp8r7k")},m(target,anchor){insert(target,h1,anchor),insert(target,t1,anchor),insert(target,p0,anchor),insert(target,t5,anchor),insert(target,p1,anchor),insert(target,t9,anchor),insert(target,p2,anchor),insert(target,t13,anchor),insert(target,p3,anchor),insert(target,t15,anchor),insert(target,p4,anchor),insert(target,t17,anchor),insert(target,h2,anchor),insert(target,t19,anchor),insert(target,p5,anchor)},p:noop,i:noop,o:noop,d(detaching){detaching&&detach(h1),detaching&&detach(t1),detaching&&detach(p0),detaching&&detach(t5),detaching&&detach(p1),detaching&&detach(t9),detaching&&detach(p2),detaching&&detach(t13),detaching&&detach(p3),detaching&&detach(t15),detaching&&detach(p4),detaching&&detach(t17),detaching&&detach(h2),detaching&&detach(t19),detaching&&detach(p5)}}}var irb={"princeton-news-study@rally.mozilla.org":class extends SvelteComponent{constructor(options){super(),init(this,options,null,create_fragment$u,safe_not_equal,{})}},"rally-study-01@mozilla.org":class extends SvelteComponent{constructor(options){super(),init(this,options,null,create_fragment$v,safe_not_equal,{})}}};function create_name_slot(ctx){let span,t;return{c(){span=element("span"),t=text(ctx[2]),attr(span,"slot","name")},m(target,anchor){insert(target,span,anchor),append(span,t)},p(ctx,dirty){4&dirty&&set_data(t,ctx[2])},d(detaching){detaching&&detach(span)}}}function create_author_slot(ctx){let span,t;return{c(){span=element("span"),t=text(ctx[3]),attr(span,"slot","author")},m(target,anchor){insert(target,span,anchor),append(span,t)},p(ctx,dirty){8&dirty&&set_data(t,ctx[3])},d(detaching){detaching&&detach(span)}}}function create_description_slot(ctx){let p,t;return{c(){p=element("p"),t=text(ctx[4]),attr(p,"slot","description")},m(target,anchor){insert(target,p,anchor),append(p,t)},p(ctx,dirty){16&dirty&&set_data(t,ctx[4])},d(detaching){detaching&&detach(p)}}}function create_if_block$8(ctx){let dialog,current;return dialog=new Dialog({props:{height:ctx[0]?void 0:"80vh",topPadding:ctx[0]?void 0:"calc(10vh - 20px)",width:ctx[0]?"var(--content-width)":void 0,$$slots:{cta:[create_cta_slot$1],body:[create_body_slot$1],title:[create_title_slot$1]},$$scope:{ctx:ctx}}}),dialog.$on("dismiss",ctx[16]),{c(){create_component(dialog.$$.fragment)},m(target,anchor){mount_component(dialog,target,anchor),current=!0},p(ctx,dirty){const dialog_changes={};1&dirty&&(dialog_changes.height=ctx[0]?void 0:"80vh"),1&dirty&&(dialog_changes.topPadding=ctx[0]?void 0:"calc(10vh - 20px)"),1&dirty&&(dialog_changes.width=ctx[0]?"var(--content-width)":void 0),133231&dirty&&(dialog_changes.$$scope={dirty:dirty,ctx:ctx}),dialog.$set(dialog_changes)},i(local){current||(transition_in(dialog.$$.fragment,local),current=!0)},o(local){transition_out(dialog.$$.fragment,local),current=!1},d(detaching){destroy_component(dialog,detaching)}}}function create_else_block_3(ctx){let t;return{c(){t=text("Leave this Study?")},m(target,anchor){insert(target,t,anchor)},p:noop,i:noop,o:noop,d(detaching){detaching&&detach(t)}}}function create_if_block_4$3(ctx){let studycardheader,current;return studycardheader=new Header({props:{endDate:ctx[6],$$slots:{"study-author":[create_study_author_slot$1],"study-name":[create_study_name_slot$1],"study-icon":[create_study_icon_slot$1]},$$scope:{ctx:ctx}}}),{c(){create_component(studycardheader.$$.fragment)},m(target,anchor){mount_component(studycardheader,target,anchor),current=!0},p(ctx,dirty){const studycardheader_changes={};64&dirty&&(studycardheader_changes.endDate=ctx[6]),131086&dirty&&(studycardheader_changes.$$scope={dirty:dirty,ctx:ctx}),studycardheader.$set(studycardheader_changes)},i(local){current||(transition_in(studycardheader.$$.fragment,local),current=!0)},o(local){transition_out(studycardheader.$$.fragment,local),current=!1},d(detaching){destroy_component(studycardheader,detaching)}}}function create_study_icon_slot$1(ctx){let img,img_src_value;return{c(){img=element("img"),attr(img,"slot","study-icon"),attr(img,"class","study-card-image"),attr(img,"width","60"),attr(img,"alt","study icon"),img.src!==(img_src_value=ctx[1]||"img/default-study-icon.png")&&attr(img,"src",img_src_value)},m(target,anchor){insert(target,img,anchor)},p(ctx,dirty){2&dirty&&img.src!==(img_src_value=ctx[1]||"img/default-study-icon.png")&&attr(img,"src",img_src_value)},d(detaching){detaching&&detach(img)}}}function create_study_name_slot$1(ctx){let span,t;return{c(){span=element("span"),t=text(ctx[2]),attr(span,"slot","study-name")},m(target,anchor){insert(target,span,anchor),append(span,t)},p(ctx,dirty){4&dirty&&set_data(t,ctx[2])},d(detaching){detaching&&detach(span)}}}function create_study_author_slot$1(ctx){let span,t;return{c(){span=element("span"),t=text(ctx[3]),attr(span,"slot","study-author")},m(target,anchor){insert(target,span,anchor),append(span,t)},p(ctx,dirty){8&dirty&&set_data(t,ctx[3])},d(detaching){detaching&&detach(span)}}}function create_title_slot$1(ctx){let div,current_block_type_index,if_block,current;const if_block_creators=[create_if_block_4$3,create_else_block_3],if_blocks=[];function select_block_type_3(ctx,dirty){return ctx[0]?1:0}return current_block_type_index=select_block_type_3(ctx),if_block=if_blocks[current_block_type_index]=if_block_creators[current_block_type_index](ctx),{c(){div=element("div"),if_block.c(),attr(div,"slot","title")},m(target,anchor){insert(target,div,anchor),if_blocks[current_block_type_index].m(div,null),current=!0},p(ctx,dirty){let previous_block_index=current_block_type_index;current_block_type_index=select_block_type_3(ctx),current_block_type_index===previous_block_index?if_blocks[current_block_type_index].p(ctx,dirty):(group_outros(),transition_out(if_blocks[previous_block_index],1,1,(()=>{if_blocks[previous_block_index]=null})),check_outros(),if_block=if_blocks[current_block_type_index],if_block?if_block.p(ctx,dirty):(if_block=if_blocks[current_block_type_index]=if_block_creators[current_block_type_index](ctx),if_block.c()),transition_in(if_block,1),if_block.m(div,null))},i(local){current||(transition_in(if_block),current=!0)},o(local){transition_out(if_block),current=!1},d(detaching){detaching&&detach(div),if_blocks[current_block_type_index].d()}}}function create_else_block_2(ctx){let div,t10,img,img_src_value;return{c(){div=element("div"),div.innerHTML='<p style="padding-top: 20px;">Youâ€™re free to come and go as you please. Just to confirm, leaving a study means the following:</p> \n                    <ul class="mzp-u-list-styled bigger-gap" style="padding-right: 48px;"><li><b>You will only be leaving this specific study</b>.\n                            If you are enrolled in other studies, data\n                            collection will proceed as planned.</li> \n                        <li>Researchers working on this study will <b>no longer receive data from you</b>, \n                            and we will <b>delete any study data that weâ€™ve collected from you</b> to date.</li></ul>',t10=space(),img=element("img"),set_style(div,"width","368px"),set_style(img,"width","270px"),set_style(img,"padding-top","20px"),set_style(img,"transform","translateX(-24px)"),img.src!==(img_src_value="img/leave-this-study.png")&&attr(img,"src","img/leave-this-study.png"),attr(img,"alt","person considering leaving the study")},m(target,anchor){insert(target,div,anchor),insert(target,t10,anchor),insert(target,img,anchor)},p:noop,i:noop,o:noop,d(detaching){detaching&&detach(div),detaching&&detach(t10),detaching&&detach(img)}}}function create_if_block_2$3(ctx){let irbwindow,current;return irbwindow=new IRBWindow({props:{$$slots:{default:[create_default_slot_2$2]},$$scope:{ctx:ctx}}}),{c(){create_component(irbwindow.$$.fragment)},m(target,anchor){mount_component(irbwindow,target,anchor),current=!0},p(ctx,dirty){const irbwindow_changes={};131104&dirty&&(irbwindow_changes.$$scope={dirty:dirty,ctx:ctx}),irbwindow.$set(irbwindow_changes)},i(local){current||(transition_in(irbwindow.$$.fragment,local),current=!0)},o(local){transition_out(irbwindow.$$.fragment,local),current=!1},d(detaching){destroy_component(irbwindow,detaching)}}}function create_else_block_1$1(ctx){let genericconsent,current;return genericconsent=new GenericConsent({}),{c(){create_component(genericconsent.$$.fragment)},m(target,anchor){mount_component(genericconsent,target,anchor),current=!0},p:noop,i(local){current||(transition_in(genericconsent.$$.fragment,local),current=!0)},o(local){transition_out(genericconsent.$$.fragment,local),current=!1},d(detaching){destroy_component(genericconsent,detaching)}}}function create_if_block_3$3(ctx){let switch_instance,switch_instance_anchor,current;var switch_value=irb[ctx[5]];return switch_value&&(switch_instance=new switch_value({})),{c(){switch_instance&&create_component(switch_instance.$$.fragment),switch_instance_anchor=empty()},m(target,anchor){switch_instance&&mount_component(switch_instance,target,anchor),insert(target,switch_instance_anchor,anchor),current=!0},p(ctx,dirty){if(switch_value!==(switch_value=irb[ctx[5]])){if(switch_instance){group_outros();const old_component=switch_instance;transition_out(old_component.$$.fragment,1,0,(()=>{destroy_component(old_component,1)})),check_outros()}switch_value?(switch_instance=new switch_value({}),create_component(switch_instance.$$.fragment),transition_in(switch_instance.$$.fragment,1),mount_component(switch_instance,switch_instance_anchor.parentNode,switch_instance_anchor)):switch_instance=null}},i(local){current||(switch_instance&&transition_in(switch_instance.$$.fragment,local),current=!0)},o(local){switch_instance&&transition_out(switch_instance.$$.fragment,local),current=!1},d(detaching){detaching&&detach(switch_instance_anchor),switch_instance&&destroy_component(switch_instance,detaching)}}}function create_default_slot_2$2(ctx){let current_block_type_index,if_block,if_block_anchor,current;const if_block_creators=[create_if_block_3$3,create_else_block_1$1],if_blocks=[];function select_block_type_2(ctx,dirty){return ctx[5]in irb?0:1}return current_block_type_index=select_block_type_2(ctx),if_block=if_blocks[current_block_type_index]=if_block_creators[current_block_type_index](ctx),{c(){if_block.c(),if_block_anchor=empty()},m(target,anchor){if_blocks[current_block_type_index].m(target,anchor),insert(target,if_block_anchor,anchor),current=!0},p(ctx,dirty){let previous_block_index=current_block_type_index;current_block_type_index=select_block_type_2(ctx),current_block_type_index===previous_block_index?if_blocks[current_block_type_index].p(ctx,dirty):(group_outros(),transition_out(if_blocks[previous_block_index],1,1,(()=>{if_blocks[previous_block_index]=null})),check_outros(),if_block=if_blocks[current_block_type_index],if_block?if_block.p(ctx,dirty):(if_block=if_blocks[current_block_type_index]=if_block_creators[current_block_type_index](ctx),if_block.c()),transition_in(if_block,1),if_block.m(if_block_anchor.parentNode,if_block_anchor))},i(local){current||(transition_in(if_block),current=!0)},o(local){transition_out(if_block),current=!1},d(detaching){if_blocks[current_block_type_index].d(detaching),detaching&&detach(if_block_anchor)}}}function create_body_slot$1(ctx){let div,current_block_type_index,if_block,current;const if_block_creators=[create_if_block_2$3,create_else_block_2],if_blocks=[];function select_block_type_1(ctx,dirty){return ctx[0]?1:0}return current_block_type_index=select_block_type_1(ctx),if_block=if_blocks[current_block_type_index]=if_block_creators[current_block_type_index](ctx),{c(){div=element("div"),if_block.c(),attr(div,"slot","body"),toggle_class(div,"split-content-modal",ctx[0])},m(target,anchor){insert(target,div,anchor),if_blocks[current_block_type_index].m(div,null),current=!0},p(ctx,dirty){let previous_block_index=current_block_type_index;current_block_type_index=select_block_type_1(ctx),current_block_type_index===previous_block_index?if_blocks[current_block_type_index].p(ctx,dirty):(group_outros(),transition_out(if_blocks[previous_block_index],1,1,(()=>{if_blocks[previous_block_index]=null})),check_outros(),if_block=if_blocks[current_block_type_index],if_block?if_block.p(ctx,dirty):(if_block=if_blocks[current_block_type_index]=if_block_creators[current_block_type_index](ctx),if_block.c()),transition_in(if_block,1),if_block.m(div,null)),1&dirty&&toggle_class(div,"split-content-modal",ctx[0])},i(local){current||(transition_in(if_block),current=!0)},o(local){transition_out(if_block),current=!1},d(detaching){detaching&&detach(div),if_blocks[current_block_type_index].d()}}}function create_else_block$3(ctx){let t;return{c(){t=text("Accept & Enroll")},m(target,anchor){insert(target,t,anchor)},d(detaching){detaching&&detach(t)}}}function create_if_block_1$3(ctx){let t;return{c(){t=text("Leave Study")},m(target,anchor){insert(target,t,anchor)},d(detaching){detaching&&detach(t)}}}function create_default_slot_1$5(ctx){let if_block_anchor;function select_block_type(ctx,dirty){return ctx[0]?create_if_block_1$3:create_else_block$3}let current_block_type=select_block_type(ctx),if_block=current_block_type(ctx);return{c(){if_block.c(),if_block_anchor=empty()},m(target,anchor){if_block.m(target,anchor),insert(target,if_block_anchor,anchor)},p(ctx,dirty){current_block_type!==(current_block_type=select_block_type(ctx))&&(if_block.d(1),if_block=current_block_type(ctx),if_block&&(if_block.c(),if_block.m(if_block_anchor.parentNode,if_block_anchor)))},d(detaching){if_block.d(detaching),detaching&&detach(if_block_anchor)}}}function create_default_slot$6(ctx){let t;return{c(){t=text("Cancel")},m(target,anchor){insert(target,t,anchor)},d(detaching){detaching&&detach(t)}}}function create_cta_slot$1(ctx){let div,button0,t,button1,div_style_value,current;return button0=new Button({props:{size:"lg",product:!0,leave:ctx[0],$$slots:{default:[create_default_slot_1$5]},$$scope:{ctx:ctx}}}),button0.$on("click",ctx[14]),button1=new Button({props:{size:"lg",product:!0,secondary:!0,$$slots:{default:[create_default_slot$6]},$$scope:{ctx:ctx}}}),button1.$on("click",ctx[15]),{c(){div=element("div"),create_component(button0.$$.fragment),t=space(),create_component(button1.$$.fragment),attr(div,"class","modal-call-flow"),attr(div,"slot","cta"),attr(div,"style",div_style_value=`margin-top: ${ctx[0]?"-50px":"none"};`)},m(target,anchor){insert(target,div,anchor),mount_component(button0,div,null),append(div,t),mount_component(button1,div,null),current=!0},p(ctx,dirty){const button0_changes={};1&dirty&&(button0_changes.leave=ctx[0]),131073&dirty&&(button0_changes.$$scope={dirty:dirty,ctx:ctx}),button0.$set(button0_changes);const button1_changes={};131072&dirty&&(button1_changes.$$scope={dirty:dirty,ctx:ctx}),button1.$set(button1_changes),(!current||1&dirty&&div_style_value!==(div_style_value=`margin-top: ${ctx[0]?"-50px":"none"};`))&&attr(div,"style",div_style_value)},i(local){current||(transition_in(button0.$$.fragment,local),transition_in(button1.$$.fragment,local),current=!0)},o(local){transition_out(button0.$$.fragment,local),transition_out(button1.$$.fragment,local),current=!1},d(detaching){detaching&&detach(div),destroy_component(button0),destroy_component(button1)}}}function create_fragment$w(ctx){let studycard,t,if_block_anchor,current;studycard=new StudyCard({props:{joined:ctx[0],endDate:ctx[6],joinedDate:ctx[7],dataCollectionDetails:ctx[8],tags:ctx[10],imageSrc:ctx[1],studyDetailsLink:ctx[9],$$slots:{description:[create_description_slot],author:[create_author_slot],name:[create_name_slot]},$$scope:{ctx:ctx}}}),studycard.$on("join",ctx[13]),studycard.$on("leave",ctx[13]);let if_block=ctx[11]&&create_if_block$8(ctx);return{c(){create_component(studycard.$$.fragment),t=space(),if_block&&if_block.c(),if_block_anchor=empty()},m(target,anchor){mount_component(studycard,target,anchor),insert(target,t,anchor),if_block&&if_block.m(target,anchor),insert(target,if_block_anchor,anchor),current=!0},p(ctx,[dirty]){const studycard_changes={};1&dirty&&(studycard_changes.joined=ctx[0]),64&dirty&&(studycard_changes.endDate=ctx[6]),128&dirty&&(studycard_changes.joinedDate=ctx[7]),256&dirty&&(studycard_changes.dataCollectionDetails=ctx[8]),1024&dirty&&(studycard_changes.tags=ctx[10]),2&dirty&&(studycard_changes.imageSrc=ctx[1]),512&dirty&&(studycard_changes.studyDetailsLink=ctx[9]),131100&dirty&&(studycard_changes.$$scope={dirty:dirty,ctx:ctx}),studycard.$set(studycard_changes),ctx[11]?if_block?(if_block.p(ctx,dirty),2048&dirty&&transition_in(if_block,1)):(if_block=create_if_block$8(ctx),if_block.c(),transition_in(if_block,1),if_block.m(if_block_anchor.parentNode,if_block_anchor)):if_block&&(group_outros(),transition_out(if_block,1,1,(()=>{if_block=null})),check_outros())},i(local){current||(transition_in(studycard.$$.fragment,local),transition_in(if_block),current=!0)},o(local){transition_out(studycard.$$.fragment,local),transition_out(if_block),current=!1},d(detaching){destroy_component(studycard,detaching),detaching&&detach(t),if_block&&if_block.d(detaching),detaching&&detach(if_block_anchor)}}}function instance$r($$self,$$props,$$invalidate){let{joined:joined=!1}=$$props,{imageSrc:imageSrc}=$$props,{title:title="Untitled Study"}=$$props,{author:author="Author Unknown"}=$$props,{description:description="no description."}=$$props,{addonId:addonId}=$$props,{endDate:endDate}=$$props,{joinedDate:joinedDate}=$$props,{dataCollectionDetails:dataCollectionDetails}=$$props,{studyDetailsLink:studyDetailsLink}=$$props,{tags:tags}=$$props;const dispatch=createEventDispatcher();let joinModal=!1;return $$self.$$set=$$props=>{"joined"in $$props&&$$invalidate(0,joined=$$props.joined),"imageSrc"in $$props&&$$invalidate(1,imageSrc=$$props.imageSrc),"title"in $$props&&$$invalidate(2,title=$$props.title),"author"in $$props&&$$invalidate(3,author=$$props.author),"description"in $$props&&$$invalidate(4,description=$$props.description),"addonId"in $$props&&$$invalidate(5,addonId=$$props.addonId),"endDate"in $$props&&$$invalidate(6,endDate=$$props.endDate),"joinedDate"in $$props&&$$invalidate(7,joinedDate=$$props.joinedDate),"dataCollectionDetails"in $$props&&$$invalidate(8,dataCollectionDetails=$$props.dataCollectionDetails),"studyDetailsLink"in $$props&&$$invalidate(9,studyDetailsLink=$$props.studyDetailsLink),"tags"in $$props&&$$invalidate(10,tags=$$props.tags)},[joined,imageSrc,title,author,description,addonId,endDate,joinedDate,dataCollectionDetails,studyDetailsLink,tags,joinModal,dispatch,function(){dispatch("cta-clicked"),$$invalidate(11,joinModal=!0)},()=>{dispatch(joined?"leave":"join"),$$invalidate(11,joinModal=!1)},()=>{$$invalidate(11,joinModal=!1)},()=>{$$invalidate(11,joinModal=!1)}]}class StudyCard_1 extends SvelteComponent{constructor(options){super(),init(this,options,instance$r,create_fragment$w,safe_not_equal,{joined:0,imageSrc:1,title:2,author:3,description:4,addonId:5,endDate:6,joinedDate:7,dataCollectionDetails:8,studyDetailsLink:9,tags:10})}}function get_each_context$3(ctx,list,i){const child_ctx=ctx.slice();return child_ctx[9]=list[i],child_ctx[11]=i,child_ctx}function create_else_block$4(ctx){let t;return{c(){t=text("No available studies")},m(target,anchor){insert(target,t,anchor)},d(detaching){detaching&&detach(t)}}}function create_each_block$3(key_1,ctx){let first,studycard,current;return studycard=new StudyCard_1({props:{title:ctx[9].name,author:ctx[9].authors.name,joined:ctx[9].addonId in ctx[1]&&ctx[1][ctx[9].addonId].enrolled,imageSrc:ctx[9].icons[64],addonId:ctx[9].addonId,endDate:parseDateIfNeeded(ctx[9].endDate),joinedDate:ctx[9].addonId in ctx[1]&&ctx[1][ctx[9].addonId].enrolled&&ctx[1][ctx[9].addonId].joinedOn.toDate(),description:ctx[9].description,dataCollectionDetails:ctx[9].dataCollectionDetails,studyDetailsLink:ctx[9].studyDetailsLink,tags:ctx[9].tags,sidebarOffset:ctx[2]}}),studycard.$on("cta-clicked",ctx[5]),studycard.$on("join",(function(){return ctx[6](ctx[9])})),studycard.$on("leave",(function(){return ctx[7](ctx[9])})),{key:key_1,first:null,c(){first=empty(),create_component(studycard.$$.fragment),this.first=first},m(target,anchor){insert(target,first,anchor),mount_component(studycard,target,anchor),current=!0},p(new_ctx,dirty){ctx=new_ctx;const studycard_changes={};1&dirty&&(studycard_changes.title=ctx[9].name),1&dirty&&(studycard_changes.author=ctx[9].authors.name),3&dirty&&(studycard_changes.joined=ctx[9].addonId in ctx[1]&&ctx[1][ctx[9].addonId].enrolled),1&dirty&&(studycard_changes.imageSrc=ctx[9].icons[64]),1&dirty&&(studycard_changes.addonId=ctx[9].addonId),1&dirty&&(studycard_changes.endDate=parseDateIfNeeded(ctx[9].endDate)),3&dirty&&(studycard_changes.joinedDate=ctx[9].addonId in ctx[1]&&ctx[1][ctx[9].addonId].enrolled&&ctx[1][ctx[9].addonId].joinedOn.toDate()),1&dirty&&(studycard_changes.description=ctx[9].description),1&dirty&&(studycard_changes.dataCollectionDetails=ctx[9].dataCollectionDetails),1&dirty&&(studycard_changes.studyDetailsLink=ctx[9].studyDetailsLink),1&dirty&&(studycard_changes.tags=ctx[9].tags),4&dirty&&(studycard_changes.sidebarOffset=ctx[2]),studycard.$set(studycard_changes)},i(local){current||(transition_in(studycard.$$.fragment,local),current=!0)},o(local){transition_out(studycard.$$.fragment,local),current=!1},d(detaching){detaching&&detach(first),destroy_component(studycard,detaching)}}}function create_fragment$x(ctx){let div1,h2,t1,p,t3,div0,div1_intro,current,each_blocks=[],each_1_lookup=new Map,each_value=ctx[0];const get_key=ctx=>ctx[9].addonId;for(let i=0;i<each_value.length;i+=1){let child_ctx=get_each_context$3(ctx,each_value,i),key=get_key(child_ctx);each_1_lookup.set(key,each_blocks[i]=create_each_block$3(key,child_ctx))}let each_1_else=null;return each_value.length||(each_1_else=create_else_block$4()),{c(){div1=element("div"),h2=element("h2"),h2.textContent="Current Studies",t1=space(),p=element("p"),p.textContent="Browse available studies and find the choice (or choices) that feel right to you.",t3=space(),div0=element("div");for(let i=0;i<each_blocks.length;i+=1)each_blocks[i].c();each_1_else&&each_1_else.c(),attr(h2,"class","section-header"),attr(p,"class","svelte-1tuz08x"),attr(div0,"class","studies svelte-1tuz08x"),attr(div1,"class","current-studies svelte-1tuz08x")},m(target,anchor){insert(target,div1,anchor),append(div1,h2),append(div1,t1),append(div1,p),append(div1,t3),append(div1,div0);for(let i=0;i<each_blocks.length;i+=1)each_blocks[i].m(div0,null);each_1_else&&each_1_else.m(div0,null),current=!0},p(ctx,[dirty]){31&dirty&&(each_value=ctx[0],group_outros(),each_blocks=function(old_blocks,dirty,get_key,dynamic,ctx,list,lookup,node,destroy,create_each_block,next,get_context){let o=old_blocks.length,n=list.length,i=o;const old_indexes={};for(;i--;)old_indexes[old_blocks[i].key]=i;const new_blocks=[],new_lookup=new Map,deltas=new Map;for(i=n;i--;){const child_ctx=get_context(ctx,list,i),key=get_key(child_ctx);let block=lookup.get(key);block?dynamic&&block.p(child_ctx,dirty):(block=create_each_block(key,child_ctx),block.c()),new_lookup.set(key,new_blocks[i]=block),key in old_indexes&&deltas.set(key,Math.abs(i-old_indexes[key]))}const will_move=new Set,did_move=new Set;function insert(block){transition_in(block,1),block.m(node,next),lookup.set(block.key,block),next=block.first,n--}for(;o&&n;){const new_block=new_blocks[n-1],old_block=old_blocks[o-1],new_key=new_block.key,old_key=old_block.key;new_block===old_block?(next=new_block.first,o--,n--):new_lookup.has(old_key)?!lookup.has(new_key)||will_move.has(new_key)?insert(new_block):did_move.has(old_key)?o--:deltas.get(new_key)>deltas.get(old_key)?(did_move.add(new_key),insert(new_block)):(will_move.add(old_key),o--):(destroy(old_block,lookup),o--)}for(;o--;){const old_block=old_blocks[o];new_lookup.has(old_block.key)||destroy(old_block,lookup)}for(;n;)insert(new_blocks[n-1]);return new_blocks}(each_blocks,dirty,get_key,1,ctx,each_value,each_1_lookup,div0,outro_and_destroy_block,create_each_block$3,null,get_each_context$3),check_outros(),each_value.length?each_1_else&&(each_1_else.d(1),each_1_else=null):each_1_else||(each_1_else=create_else_block$4(),each_1_else.c(),each_1_else.m(div0,null)))},i(local){if(!current){for(let i=0;i<each_value.length;i+=1)transition_in(each_blocks[i]);div1_intro||add_render_callback((()=>{div1_intro=create_in_transition(div1,fly,{duration:800,y:5}),div1_intro.start()})),current=!0}},o(local){for(let i=0;i<each_blocks.length;i+=1)transition_out(each_blocks[i]);current=!1},d(detaching){detaching&&detach(div1);for(let i=0;i<each_blocks.length;i+=1)each_blocks[i].d();each_1_else&&each_1_else.d()}}}function parseDateIfNeeded(date){if(void 0===date||"object"==typeof date&&"function"==typeof date.getMonth)return date;try{let endDate=date.split("-"),day=+endDate[2],month=+endDate[1]-1,year=+endDate[0];return new Date(year,month,day)}catch(err){return void console.error(err)}}function instance$s($$self,$$props,$$invalidate){let{studies:studies=[]}=$$props,{userEnrollment:userEnrollment={}}=$$props,{sidebarOffset:sidebarOffset=!1}=$$props;const dispatch=createEventDispatcher();function joinStudy(studyID){dispatch("join-study",studyID)}function leaveStudy(studyID){dispatch("leave-study",studyID)}return $$self.$$set=$$props=>{"studies"in $$props&&$$invalidate(0,studies=$$props.studies),"userEnrollment"in $$props&&$$invalidate(1,userEnrollment=$$props.userEnrollment),"sidebarOffset"in $$props&&$$invalidate(2,sidebarOffset=$$props.sidebarOffset)},[studies,userEnrollment,sidebarOffset,joinStudy,leaveStudy,function(event){bubble($$self,event)},study=>{joinStudy(study.addonId)},study=>{leaveStudy(study.addonId)}]}class Content$3 extends SvelteComponent{constructor(options){super(),init(this,options,instance$s,create_fragment$x,safe_not_equal,{studies:0,userEnrollment:1,sidebarOffset:2})}}function create_title_slot$2(ctx){let span;return{c(){span=element("span"),span.textContent="Manage Profile",attr(span,"slot","title")},m(target,anchor){insert(target,span,anchor)},d(detaching){detaching&&detach(span)}}}function create_description_slot$1(ctx){let p;return{c(){p=element("p"),p.textContent="Here's what you've shared with us so far. You can update, add, or rescind your answers as \n        you see fit. Just a reminder, this info helps us better understand the representitivity of our study\n        participants, and we'll always ask before we share this data with a research collaborator.",attr(p,"slot","description")},m(target,anchor){insert(target,p,anchor)},d(detaching){detaching&&detach(p)}}}function create_default_slot_1$6(ctx){let t;return{c(){t=text("Save Changes")},m(target,anchor){insert(target,t,anchor)},d(detaching){detaching&&detach(t)}}}function create_default_slot$7(ctx){let t;return{c(){t=text("Cancel")},m(target,anchor){insert(target,t,anchor)},d(detaching){detaching&&detach(t)}}}function create_call_to_action_slot(ctx){let div1,hr,t0,div0,button0,t1,button1,current;return button0=new Button({props:{size:"lg",product:!0,leave:!ctx[6],disabled:!ctx[6],$$slots:{default:[create_default_slot_1$6]},$$scope:{ctx:ctx}}}),button0.$on("click",(function(){return ctx[4](ctx[7])})),button1=new Button({props:{size:"lg",product:!0,disabled:!ctx[6],secondary:!0,$$slots:{default:[create_default_slot$7]},$$scope:{ctx:ctx}}}),button1.$on("click",ctx[5]),{c(){div1=element("div"),hr=element("hr"),t0=space(),div0=element("div"),create_component(button0.$$.fragment),t1=space(),create_component(button1.$$.fragment),set_style(div0,"display","grid"),set_style(div0,"grid-auto-flow","column"),set_style(div0,"grid-column-gap","12px"),set_style(div0,"width","max-content"),attr(div1,"slot","call-to-action")},m(target,anchor){insert(target,div1,anchor),append(div1,hr),append(div1,t0),append(div1,div0),mount_component(button0,div0,null),append(div0,t1),mount_component(button1,div0,null),current=!0},p(new_ctx,dirty){ctx=new_ctx;const button0_changes={};64&dirty&&(button0_changes.leave=!ctx[6]),64&dirty&&(button0_changes.disabled=!ctx[6]),256&dirty&&(button0_changes.$$scope={dirty:dirty,ctx:ctx}),button0.$set(button0_changes);const button1_changes={};64&dirty&&(button1_changes.disabled=!ctx[6]),256&dirty&&(button1_changes.$$scope={dirty:dirty,ctx:ctx}),button1.$set(button1_changes)},i(local){current||(transition_in(button0.$$.fragment,local),transition_in(button1.$$.fragment,local),current=!0)},o(local){transition_out(button0.$$.fragment,local),transition_out(button1.$$.fragment,local),current=!1},d(detaching){detaching&&detach(div1),destroy_component(button0),destroy_component(button1)}}}function create_fragment$y(ctx){let demographics,current;return demographics=new Content$1({props:{results:ctx[1],$$slots:{"call-to-action":[create_call_to_action_slot,({validated:validated,formattedResults:formattedResults})=>({6:validated,7:formattedResults}),({validated:validated,formattedResults:formattedResults})=>(validated?64:0)|(formattedResults?128:0)],description:[create_description_slot$1],title:[create_title_slot$2]},$$scope:{ctx:ctx}}}),{c(){create_component(demographics.$$.fragment)},m(target,anchor){mount_component(demographics,target,anchor),current=!0},p(ctx,[dirty]){const demographics_changes={};2&dirty&&(demographics_changes.results=ctx[1]),323&dirty&&(demographics_changes.$$scope={dirty:dirty,ctx:ctx}),demographics.$set(demographics_changes)},i(local){current||(transition_in(demographics.$$.fragment,local),current=!0)},o(local){transition_out(demographics.$$.fragment,local),current=!1},d(detaching){destroy_component(demographics,detaching)}}}function instance$t($$self,$$props,$$invalidate){let $store;const store=getContext("rally:store");component_subscribe($$self,store,(value=>$$invalidate(0,$store=value)));const dispatch=createEventDispatcher();let intermediateResults;return $$self.$$.update=()=>{1&$$self.$$.dirty&&$store.user&&$store.user.demographicsData&&$$invalidate(1,intermediateResults=formatAnswersForDisplay(schema,{...$store.user.demographicsData},inputFormatters))},[$store,intermediateResults,store,dispatch,formattedResults=>{store.updateDemographicSurvey(formattedResults),notification.send({code:"SUCCESSFULLY_UPDATED_PROFILE"}),dispatch("redirect-to",{view:"current-studies",suppressNotifications:!0})},()=>{$$invalidate(1,intermediateResults=formatAnswersForDisplay(schema,{...$store.user.demographicsData},inputFormatters)),dispatch("redirect-to",{view:"current-studies"})}]}class MainDemographicsView extends SvelteComponent{constructor(options){super(),init(this,options,instance$t,create_fragment$y,safe_not_equal,{})}}function is_date(obj){return"[object Date]"===Object.prototype.toString.call(obj)}function get_interpolator(a,b){if(a===b||a!=a)return()=>a;const type=typeof a;if(type!==typeof b||Array.isArray(a)!==Array.isArray(b))throw new Error("Cannot interpolate values of different type");if(Array.isArray(a)){const arr=b.map(((bi,i)=>get_interpolator(a[i],bi)));return t=>arr.map((fn=>fn(t)))}if("object"===type){if(!a||!b)throw new Error("Object cannot be null");if(is_date(a)&&is_date(b)){a=a.getTime();const delta=(b=b.getTime())-a;return t=>new Date(a+t*delta)}const keys=Object.keys(b),interpolators={};return keys.forEach((key=>{interpolators[key]=get_interpolator(a[key],b[key])})),t=>{const result={};return keys.forEach((key=>{result[key]=interpolators[key](t)})),result}}if("number"===type){const delta=b-a;return t=>a+t*delta}throw new Error(`Cannot interpolate ${type} values`)}function tweened(value,defaults={}){const store=writable(value);let task,target_value=value;function set(new_value,opts){if(null==value)return store.set(value=new_value),Promise.resolve();target_value=new_value;let previous_task=task,started=!1,{delay:delay=0,duration:duration=400,easing:easing=identity,interpolate:interpolate=get_interpolator}=assign(assign({},defaults),opts);if(0===duration)return previous_task&&(previous_task.abort(),previous_task=null),store.set(value=target_value),Promise.resolve();const start=now()+delay;let fn;return task=loop((now=>{if(now<start)return!0;started||(fn=interpolate(value,new_value),"function"==typeof duration&&(duration=duration(value,new_value)),started=!0),previous_task&&(previous_task.abort(),previous_task=null);const elapsed=now-start;return elapsed>duration?(store.set(value=new_value),!1):(store.set(value=fn(easing(elapsed/duration))),!0)})),task.promise}return{set:set,update:(fn,opts)=>set(fn(target_value,value),opts),subscribe:store.subscribe}}function create_fragment$z(ctx){let scrolling_timeout,div,div_style_value,current,mounted,dispose,scrolling=!1,clear_scrolling=()=>{scrolling=!1};add_render_callback(ctx[15]),add_render_callback(ctx[16]);const default_slot_template=ctx[14].default,default_slot=create_slot(default_slot_template,ctx,ctx[13],null);return{c(){div=element("div"),default_slot&&default_slot.c(),attr(div,"class","study-background"),attr(div,"style",div_style_value=`\n        --o1: ${ctx[2]};\n        --data1: ${15*ctx[3]+4*ctx[4]}px; \n        --data2: ${15*-ctx[5]-7*ctx[4]}px;\n        --card1: ${10*-ctx[3]-3*ctx[4]}px;\n        --card2: ${10*ctx[5]+6*ctx[4]}px;`)},m(target,anchor){insert(target,div,anchor),default_slot&&default_slot.m(div,null),current=!0,mounted||(dispose=[listen(window,"scroll",(()=>{scrolling=!0,clearTimeout(scrolling_timeout),scrolling_timeout=setTimeout(clear_scrolling,100),ctx[15]()})),listen(window,"resize",ctx[16])],mounted=!0)},p(ctx,[dirty]){2&dirty&&!scrolling&&(scrolling=!0,clearTimeout(scrolling_timeout),scrollTo(window.pageXOffset,ctx[1]),scrolling_timeout=setTimeout(clear_scrolling,100)),default_slot&&default_slot.p&&(!current||8192&dirty)&&update_slot(default_slot,default_slot_template,ctx,ctx[13],dirty,null,null),(!current||60&dirty&&div_style_value!==(div_style_value=`\n        --o1: ${ctx[2]};\n        --data1: ${15*ctx[3]+4*ctx[4]}px; \n        --data2: ${15*-ctx[5]-7*ctx[4]}px;\n        --card1: ${10*-ctx[3]-3*ctx[4]}px;\n        --card2: ${10*ctx[5]+6*ctx[4]}px;`))&&attr(div,"style",div_style_value)},i(local){current||(transition_in(default_slot,local),current=!0)},o(local){transition_out(default_slot,local),current=!1},d(detaching){detaching&&detach(div),default_slot&&default_slot.d(detaching),mounted=!1,run_all(dispose)}}}function instance$u($$self,$$props,$$invalidate){let documentHeight,totalDist,percentScrolled,$o1,$layer1,$m,$layer2,{$$slots:slots={},$$scope:$$scope}=$$props,o1=tweened(1,{duration:800});component_subscribe($$self,o1,(value=>$$invalidate(2,$o1=value)));let layer1=tweened(1,{duration:1100,easing:cubicOut,delay:200});component_subscribe($$self,layer1,(value=>$$invalidate(3,$layer1=value)));let layer2=tweened(1,{duration:2200,easing:cubicOut});component_subscribe($$self,layer2,(value=>$$invalidate(5,$layer2=value)));let m=tweened(0,{duration:500,easing:cubicOut});component_subscribe($$self,m,(value=>$$invalidate(4,$m=value)));let innerHeight=0,scrollY=0;return $$self.$$set=$$props=>{"$$scope"in $$props&&$$invalidate(13,$$scope=$$props.$$scope)},$$self.$$.update=()=>{1025&$$self.$$.dirty&&$$invalidate(11,totalDist=documentHeight-innerHeight),2050&$$self.$$.dirty&&$$invalidate(12,percentScrolled=scrollY/totalDist),4096&$$self.$$.dirty&&m.set(percentScrolled)},o1.set(.2),layer1.set(0),layer2.set(0),$$invalidate(10,documentHeight=document.body.height||1e3),[innerHeight,scrollY,$o1,$layer1,$m,$layer2,o1,layer1,layer2,m,documentHeight,totalDist,percentScrolled,$$scope,slots,function(){$$invalidate(1,scrollY=window.pageYOffset)},function(){$$invalidate(0,innerHeight=window.innerHeight)}]}class Background extends SvelteComponent{constructor(options){super(),init(this,options,instance$u,create_fragment$z,safe_not_equal,{})}}function create_fragment$A(ctx){let div,div_style_value,current;const default_slot_template=ctx[2].default,default_slot=create_slot(default_slot_template,ctx,ctx[1],null);return{c(){div=element("div"),default_slot&&default_slot.c(),attr(div,"style",div_style_value=`--pad: ${ctx[0]?"2rem 2.5rem":"0"};`),attr(div,"class","svelte-i0y75s")},m(target,anchor){insert(target,div,anchor),default_slot&&default_slot.m(div,null),current=!0},p(ctx,[dirty]){default_slot&&default_slot.p&&(!current||2&dirty)&&update_slot(default_slot,default_slot_template,ctx,ctx[1],dirty,null,null),(!current||1&dirty&&div_style_value!==(div_style_value=`--pad: ${ctx[0]?"2rem 2.5rem":"0"};`))&&attr(div,"style",div_style_value)},i(local){current||(transition_in(default_slot,local),current=!0)},o(local){transition_out(default_slot,local),current=!1},d(detaching){detaching&&detach(div),default_slot&&default_slot.d(detaching)}}}function instance$v($$self,$$props,$$invalidate){let{$$slots:slots={},$$scope:$$scope}=$$props,{pad:pad=!0}=$$props;return $$self.$$set=$$props=>{"pad"in $$props&&$$invalidate(0,pad=$$props.pad),"$$scope"in $$props&&$$invalidate(1,$$scope=$$props.$$scope)},[pad,$$scope,slots]}class MainContent extends SvelteComponent{constructor(options){super(),init(this,options,instance$v,create_fragment$A,safe_not_equal,{pad:0})}}function create_if_block$9(ctx){let layout,current;return layout=new Layout_1({props:{view:ctx[1],profileQuestionsAnswered:ctx[3],totalProfileQuestions:ctx[4],$$slots:{default:[create_default_slot$8]},$$scope:{ctx:ctx}}}),layout.$on("change-view",ctx[7]),layout.$on("leave-rally",ctx[14]),{c(){create_component(layout.$$.fragment)},m(target,anchor){mount_component(layout,target,anchor),current=!0},p(ctx,dirty){const layout_changes={};2&dirty&&(layout_changes.view=ctx[1]),8&dirty&&(layout_changes.profileQuestionsAnswered=ctx[3]),16&dirty&&(layout_changes.totalProfileQuestions=ctx[4]),32771&dirty&&(layout_changes.$$scope={dirty:dirty,ctx:ctx}),layout.$set(layout_changes)},i(local){current||(transition_in(layout.$$.fragment,local),current=!0)},o(local){transition_out(layout.$$.fragment,local),current=!1},d(detaching){destroy_component(layout,detaching)}}}function create_else_block$5(ctx){let studybackgroundelement,current;return studybackgroundelement=new Background({props:{$$slots:{default:[create_default_slot_3$1]},$$scope:{ctx:ctx}}}),{c(){create_component(studybackgroundelement.$$.fragment)},m(target,anchor){mount_component(studybackgroundelement,target,anchor),current=!0},p(ctx,dirty){const studybackgroundelement_changes={};32769&dirty&&(studybackgroundelement_changes.$$scope={dirty:dirty,ctx:ctx}),studybackgroundelement.$set(studybackgroundelement_changes)},i(local){current||(transition_in(studybackgroundelement.$$.fragment,local),current=!0)},o(local){transition_out(studybackgroundelement.$$.fragment,local),current=!1},d(detaching){destroy_component(studybackgroundelement,detaching)}}}function create_if_block_2$4(ctx){let maincontent,current;return maincontent=new MainContent({props:{$$slots:{default:[create_default_slot_2$3]},$$scope:{ctx:ctx}}}),{c(){create_component(maincontent.$$.fragment)},m(target,anchor){mount_component(maincontent,target,anchor),current=!0},p(ctx,dirty){const maincontent_changes={};32768&dirty&&(maincontent_changes.$$scope={dirty:dirty,ctx:ctx}),maincontent.$set(maincontent_changes)},i(local){current||(transition_in(maincontent.$$.fragment,local),current=!0)},o(local){transition_out(maincontent.$$.fragment,local),current=!1},d(detaching){destroy_component(maincontent,detaching)}}}function create_if_block_1$4(ctx){let maincontent,current;return maincontent=new MainContent({props:{$$slots:{default:[create_default_slot_1$7]},$$scope:{ctx:ctx}}}),{c(){create_component(maincontent.$$.fragment)},m(target,anchor){mount_component(maincontent,target,anchor),current=!0},p(ctx,dirty){const maincontent_changes={};32768&dirty&&(maincontent_changes.$$scope={dirty:dirty,ctx:ctx}),maincontent.$set(maincontent_changes)},i(local){current||(transition_in(maincontent.$$.fragment,local),current=!0)},o(local){transition_out(maincontent.$$.fragment,local),current=!1},d(detaching){destroy_component(maincontent,detaching)}}}function create_default_slot_4(ctx){let currentstudies,current;return currentstudies=new Content$3({props:{sidebarOffset:!0,studies:ctx[0].studies,userEnrollment:ctx[0].user?.enrolledStudies||{}}}),currentstudies.$on("cta-clicked",ctx[11]),currentstudies.$on("join-study",ctx[12]),currentstudies.$on("leave-study",ctx[13]),{c(){create_component(currentstudies.$$.fragment)},m(target,anchor){mount_component(currentstudies,target,anchor),current=!0},p(ctx,dirty){const currentstudies_changes={};1&dirty&&(currentstudies_changes.studies=ctx[0].studies),1&dirty&&(currentstudies_changes.userEnrollment=ctx[0].user?.enrolledStudies||{}),currentstudies.$set(currentstudies_changes)},i(local){current||(transition_in(currentstudies.$$.fragment,local),current=!0)},o(local){transition_out(currentstudies.$$.fragment,local),current=!1},d(detaching){destroy_component(currentstudies,detaching)}}}function create_default_slot_3$1(ctx){let maincontent,current;return maincontent=new MainContent({props:{pad:!1,$$slots:{default:[create_default_slot_4]},$$scope:{ctx:ctx}}}),{c(){create_component(maincontent.$$.fragment)},m(target,anchor){mount_component(maincontent,target,anchor),current=!0},p(ctx,dirty){const maincontent_changes={};32769&dirty&&(maincontent_changes.$$scope={dirty:dirty,ctx:ctx}),maincontent.$set(maincontent_changes)},i(local){current||(transition_in(maincontent.$$.fragment,local),current=!0)},o(local){transition_out(maincontent.$$.fragment,local),current=!1},d(detaching){destroy_component(maincontent,detaching)}}}function create_default_slot_2$3(ctx){let privacynotice,current;return privacynotice=new Content$2({props:{onboarding:!1}}),{c(){create_component(privacynotice.$$.fragment)},m(target,anchor){mount_component(privacynotice,target,anchor),current=!0},p:noop,i(local){current||(transition_in(privacynotice.$$.fragment,local),current=!0)},o(local){transition_out(privacynotice.$$.fragment,local),current=!1},d(detaching){destroy_component(privacynotice,detaching)}}}function create_default_slot_1$7(ctx){let demographics,current;return demographics=new MainDemographicsView({}),demographics.$on("redirect-to",ctx[7]),{c(){create_component(demographics.$$.fragment)},m(target,anchor){mount_component(demographics,target,anchor),current=!0},p:noop,i(local){current||(transition_in(demographics.$$.fragment,local),current=!0)},o(local){transition_out(demographics.$$.fragment,local),current=!1},d(detaching){destroy_component(demographics,detaching)}}}function create_default_slot$8(ctx){let current_block_type_index,if_block,if_block_anchor,current;const if_block_creators=[create_if_block_1$4,create_if_block_2$4,create_else_block$5],if_blocks=[];function select_block_type(ctx,dirty){return"manage-profile"===ctx[1]?0:"privacy-notice"===ctx[1]?1:2}return current_block_type_index=select_block_type(ctx),if_block=if_blocks[current_block_type_index]=if_block_creators[current_block_type_index](ctx),{c(){if_block.c(),if_block_anchor=empty()},m(target,anchor){if_blocks[current_block_type_index].m(target,anchor),insert(target,if_block_anchor,anchor),current=!0},p(ctx,dirty){let previous_block_index=current_block_type_index;current_block_type_index=select_block_type(ctx),current_block_type_index===previous_block_index?if_blocks[current_block_type_index].p(ctx,dirty):(group_outros(),transition_out(if_blocks[previous_block_index],1,1,(()=>{if_blocks[previous_block_index]=null})),check_outros(),if_block=if_blocks[current_block_type_index],if_block?if_block.p(ctx,dirty):(if_block=if_blocks[current_block_type_index]=if_block_creators[current_block_type_index](ctx),if_block.c()),transition_in(if_block,1),if_block.m(if_block_anchor.parentNode,if_block_anchor))},i(local){current||(transition_in(if_block),current=!0)},o(local){transition_out(if_block),current=!1},d(detaching){if_blocks[current_block_type_index].d(detaching),detaching&&detach(if_block_anchor)}}}function create_fragment$B(ctx){let if_block_anchor,current,if_block=ctx[2]&&create_if_block$9(ctx);return{c(){if_block&&if_block.c(),if_block_anchor=empty()},m(target,anchor){if_block&&if_block.m(target,anchor),insert(target,if_block_anchor,anchor),current=!0},p(ctx,[dirty]){ctx[2]?if_block?(if_block.p(ctx,dirty),4&dirty&&transition_in(if_block,1)):(if_block=create_if_block$9(ctx),if_block.c(),transition_in(if_block,1),if_block.m(if_block_anchor.parentNode,if_block_anchor)):if_block&&(group_outros(),transition_out(if_block,1,1,(()=>{if_block=null})),check_outros())},i(local){current||(transition_in(if_block),current=!0)},o(local){transition_out(if_block),current=!1},d(detaching){if_block&&if_block.d(detaching),detaching&&detach(if_block_anchor)}}}function instance$w($$self,$$props,$$invalidate){let formattedDemographicsData,profileQuestionsAnswered,totalProfileQuestions,$store;const store=getContext("rally:store");component_subscribe($$self,store,(value=>$$invalidate(0,$store=value)));const notification=getContext("rally:notification");let view="current-studies";function joinStudy(studyID){store.updateStudyEnrollment(studyID,!0),notification.send({code:"SUCCESSFULLY_JOINED_STUDY"})}function leaveStudy(studyID){store.updateStudyEnrollment(studyID,!1),notification.send({code:"SUCCESSFULLY_LEFT_STUDY"})}let mounted=!1;onMount((()=>{$$invalidate(2,mounted=!0)}));return $$self.$$.update=()=>{1&$$self.$$.dirty&&$$invalidate(10,formattedDemographicsData=$store.user.demographicsData?formatAnswersForDisplay(schema,{...$store.user.demographicsData},inputFormatters):void 0),1024&$$self.$$.dirty&&$$invalidate(3,profileQuestionsAnswered=formattedDemographicsData?Object.keys(schema).filter((key=>questionIsAnswered(formattedDemographicsData[key],schema[key].type))).length:0)},$$invalidate(4,totalProfileQuestions=Object.keys(schema).length),[$store,view,mounted,profileQuestionsAnswered,totalProfileQuestions,store,notification,function(event){$$invalidate(1,view=event.detail.view),event.detail.suppressNotifications||notification.clear(),window.scrollTo(0,0)},joinStudy,leaveStudy,formattedDemographicsData,()=>{notification.clear()},evt=>{joinStudy(evt.detail)},evt=>{leaveStudy(evt.detail)},function(event){bubble($$self,event)}]}class Main extends SvelteComponent{constructor(options){super(),init(this,options,instance$w,create_fragment$B,safe_not_equal,{})}}const get_cta_slot_changes$1=dirty=>({}),get_cta_slot_context$1=ctx=>({}),get_body_slot_changes$1=dirty=>({}),get_body_slot_context$1=ctx=>({}),get_icon_slot_changes=dirty=>({}),get_icon_slot_context=ctx=>({});function create_fragment$C(ctx){let aside,div0,t0,div1,t1,div2,aside_class_value,aside_transition,current;const icon_slot_template=ctx[7].icon,icon_slot=create_slot(icon_slot_template,ctx,ctx[6],get_icon_slot_context),body_slot_template=ctx[7].body,body_slot=create_slot(body_slot_template,ctx,ctx[6],get_body_slot_context$1),cta_slot_template=ctx[7].cta,cta_slot=create_slot(cta_slot_template,ctx,ctx[6],get_cta_slot_context$1);return{c(){aside=element("aside"),div0=element("div"),icon_slot&&icon_slot.c(),t0=space(),div1=element("div"),body_slot&&body_slot.c(),t1=space(),div2=element("div"),cta_slot&&cta_slot.c(),attr(div0,"class","icon centered svelte-92geuk"),attr(div1,"class","body centered svelte-92geuk"),attr(div2,"class","cta centered svelte-92geuk"),attr(aside,"style",ctx[2]),attr(aside,"class",aside_class_value="radius-sm notification-"+ctx[0]+" \n    "+(void 0!==ctx[1]?`notification-floating notification-floating-${ctx[1]}`:"")+" svelte-92geuk")},m(target,anchor){insert(target,aside,anchor),append(aside,div0),icon_slot&&icon_slot.m(div0,null),append(aside,t0),append(aside,div1),body_slot&&body_slot.m(div1,null),append(aside,t1),append(aside,div2),cta_slot&&cta_slot.m(div2,null),current=!0},p(ctx,[dirty]){icon_slot&&icon_slot.p&&(!current||64&dirty)&&update_slot(icon_slot,icon_slot_template,ctx,ctx[6],dirty,get_icon_slot_changes,get_icon_slot_context),body_slot&&body_slot.p&&(!current||64&dirty)&&update_slot(body_slot,body_slot_template,ctx,ctx[6],dirty,get_body_slot_changes$1,get_body_slot_context$1),cta_slot&&cta_slot.p&&(!current||64&dirty)&&update_slot(cta_slot,cta_slot_template,ctx,ctx[6],dirty,get_cta_slot_changes$1,get_cta_slot_context$1),(!current||4&dirty)&&attr(aside,"style",ctx[2]),(!current||3&dirty&&aside_class_value!==(aside_class_value="radius-sm notification-"+ctx[0]+" \n    "+(void 0!==ctx[1]?`notification-floating notification-floating-${ctx[1]}`:"")+" svelte-92geuk"))&&attr(aside,"class",aside_class_value)},i(local){current||(transition_in(icon_slot,local),transition_in(body_slot,local),transition_in(cta_slot,local),add_render_callback((()=>{aside_transition||(aside_transition=create_bidirectional_transition(aside,scale,{duration:200,start:.98,opacity:0},!0)),aside_transition.run(1)})),current=!0)},o(local){transition_out(icon_slot,local),transition_out(body_slot,local),transition_out(cta_slot,local),aside_transition||(aside_transition=create_bidirectional_transition(aside,scale,{duration:200,start:.98,opacity:0},!1)),aside_transition.run(0),current=!1},d(detaching){detaching&&detach(aside),icon_slot&&icon_slot.d(detaching),body_slot&&body_slot.d(detaching),cta_slot&&cta_slot.d(detaching),detaching&&aside_transition&&aside_transition.end()}}}function instance$x($$self,$$props,$$invalidate){let style,{$$slots:slots={},$$scope:$$scope}=$$props,{width:width}=$$props,{level:level="info"}=$$props,{xOffset:xOffset}=$$props,{yOffset:yOffset}=$$props,{location:location}=$$props;return $$self.$$set=$$props=>{"width"in $$props&&$$invalidate(3,width=$$props.width),"level"in $$props&&$$invalidate(0,level=$$props.level),"xOffset"in $$props&&$$invalidate(4,xOffset=$$props.xOffset),"yOffset"in $$props&&$$invalidate(5,yOffset=$$props.yOffset),"location"in $$props&&$$invalidate(1,location=$$props.location),"$$scope"in $$props&&$$invalidate(6,$$scope=$$props.$$scope)},$$self.$$.update=()=>{56&$$self.$$.dirty&&$$invalidate(2,style=function({width:width,xOffset:xOffset,yOffset:yOffset}){return[width?`--width: ${width}`:void 0,xOffset?`--x-offset: ${xOffset}`:void 0,yOffset?`--y-offset: ${yOffset}`:void 0].filter((d=>void 0!==d)).join("; ")}({width:width,xOffset:xOffset,yOffset:yOffset}))},[level,location,style,width,xOffset,yOffset,$$scope,slots]}class NotificationElement extends SvelteComponent{constructor(options){super(),init(this,options,instance$x,create_fragment$C,safe_not_equal,{width:3,level:0,xOffset:4,yOffset:5,location:1})}}function create_fragment$D(ctx){let svg,path;return{c(){svg=svg_element("svg"),path=svg_element("path"),attr(path,"d","M20 6L9 17L4 12"),attr(path,"stroke","currentColor"),attr(path,"stroke-width","2"),attr(path,"stroke-linecap","round"),attr(path,"stroke-linejoin","round"),attr(svg,"height","1em"),attr(svg,"viewBox","0 0 24 24"),attr(svg,"fill","none"),attr(svg,"xmlns","http://www.w3.org/2000/svg")},m(target,anchor){insert(target,svg,anchor),append(svg,path)},p:noop,i:noop,o:noop,d(detaching){detaching&&detach(svg)}}}class Check extends SvelteComponent{constructor(options){super(),init(this,options,null,create_fragment$D,safe_not_equal,{})}}function create_icon_slot(ctx){let span,check,current;return check=new Check({}),{c(){span=element("span"),create_component(check.$$.fragment),set_style(span,"display","contents"),attr(span,"slot","icon")},m(target,anchor){insert(target,span,anchor),mount_component(check,span,null),current=!0},i(local){current||(transition_in(check.$$.fragment,local),current=!0)},o(local){transition_out(check.$$.fragment,local),current=!1},d(detaching){detaching&&detach(span),destroy_component(check)}}}function create_body_slot$2(ctx){let span;return{c(){span=element("span"),span.textContent="successfully joined study",attr(span,"slot","body")},m(target,anchor){insert(target,span,anchor)},d(detaching){detaching&&detach(span)}}}function create_fragment$E(ctx){let notification,current;return notification=new NotificationElement({props:{location:ctx[1],xOffset:ctx[0],$$slots:{body:[create_body_slot$2],icon:[create_icon_slot]},$$scope:{ctx:ctx}}}),{c(){create_component(notification.$$.fragment)},m(target,anchor){mount_component(notification,target,anchor),current=!0},p(ctx,[dirty]){const notification_changes={};2&dirty&&(notification_changes.location=ctx[1]),1&dirty&&(notification_changes.xOffset=ctx[0]),4&dirty&&(notification_changes.$$scope={dirty:dirty,ctx:ctx}),notification.$set(notification_changes)},i(local){current||(transition_in(notification.$$.fragment,local),current=!0)},o(local){transition_out(notification.$$.fragment,local),current=!1},d(detaching){destroy_component(notification,detaching)}}}function instance$y($$self,$$props,$$invalidate){let{xOffset:xOffset}=$$props,{location:location="top"}=$$props;return $$self.$$set=$$props=>{"xOffset"in $$props&&$$invalidate(0,xOffset=$$props.xOffset),"location"in $$props&&$$invalidate(1,location=$$props.location)},[xOffset,location]}class SuccessfullyJoinedStudyNotification extends SvelteComponent{constructor(options){super(),init(this,options,instance$y,create_fragment$E,safe_not_equal,{xOffset:0,location:1})}}function create_icon_slot$1(ctx){let span,check,current;return check=new Check({}),{c(){span=element("span"),create_component(check.$$.fragment),set_style(span,"display","contents"),attr(span,"slot","icon")},m(target,anchor){insert(target,span,anchor),mount_component(check,span,null),current=!0},i(local){current||(transition_in(check.$$.fragment,local),current=!0)},o(local){transition_out(check.$$.fragment,local),current=!1},d(detaching){detaching&&detach(span),destroy_component(check)}}}function create_body_slot$3(ctx){let span;return{c(){span=element("span"),span.textContent="successfully left study",attr(span,"slot","body")},m(target,anchor){insert(target,span,anchor)},d(detaching){detaching&&detach(span)}}}function create_fragment$F(ctx){let notification,current;return notification=new NotificationElement({props:{location:ctx[1],xOffset:ctx[0],$$slots:{body:[create_body_slot$3],icon:[create_icon_slot$1]},$$scope:{ctx:ctx}}}),{c(){create_component(notification.$$.fragment)},m(target,anchor){mount_component(notification,target,anchor),current=!0},p(ctx,[dirty]){const notification_changes={};2&dirty&&(notification_changes.location=ctx[1]),1&dirty&&(notification_changes.xOffset=ctx[0]),4&dirty&&(notification_changes.$$scope={dirty:dirty,ctx:ctx}),notification.$set(notification_changes)},i(local){current||(transition_in(notification.$$.fragment,local),current=!0)},o(local){transition_out(notification.$$.fragment,local),current=!1},d(detaching){destroy_component(notification,detaching)}}}function instance$z($$self,$$props,$$invalidate){let{xOffset:xOffset}=$$props,{location:location="top"}=$$props;return $$self.$$set=$$props=>{"xOffset"in $$props&&$$invalidate(0,xOffset=$$props.xOffset),"location"in $$props&&$$invalidate(1,location=$$props.location)},[xOffset,location]}class SuccessfullyLeftStudyNotification extends SvelteComponent{constructor(options){super(),init(this,options,instance$z,create_fragment$F,safe_not_equal,{xOffset:0,location:1})}}function create_icon_slot$2(ctx){let span,check,current;return check=new Check({}),{c(){span=element("span"),create_component(check.$$.fragment),set_style(span,"display","contents"),attr(span,"slot","icon")},m(target,anchor){insert(target,span,anchor),mount_component(check,span,null),current=!0},i(local){current||(transition_in(check.$$.fragment,local),current=!0)},o(local){transition_out(check.$$.fragment,local),current=!1},d(detaching){detaching&&detach(span),destroy_component(check)}}}function create_body_slot$4(ctx){let span;return{c(){span=element("span"),span.textContent="successfully updated profile",attr(span,"slot","body")},m(target,anchor){insert(target,span,anchor)},d(detaching){detaching&&detach(span)}}}function create_fragment$G(ctx){let notification,current;return notification=new NotificationElement({props:{location:ctx[1],xOffset:ctx[0],$$slots:{body:[create_body_slot$4],icon:[create_icon_slot$2]},$$scope:{ctx:ctx}}}),{c(){create_component(notification.$$.fragment)},m(target,anchor){mount_component(notification,target,anchor),current=!0},p(ctx,[dirty]){const notification_changes={};2&dirty&&(notification_changes.location=ctx[1]),1&dirty&&(notification_changes.xOffset=ctx[0]),4&dirty&&(notification_changes.$$scope={dirty:dirty,ctx:ctx}),notification.$set(notification_changes)},i(local){current||(transition_in(notification.$$.fragment,local),current=!0)},o(local){transition_out(notification.$$.fragment,local),current=!1},d(detaching){destroy_component(notification,detaching)}}}function instance$A($$self,$$props,$$invalidate){let{xOffset:xOffset}=$$props,{location:location="top"}=$$props;return $$self.$$set=$$props=>{"xOffset"in $$props&&$$invalidate(0,xOffset=$$props.xOffset),"location"in $$props&&$$invalidate(1,location=$$props.location)},[xOffset,location]}class SuccessfullyUpdatedProfileNotification extends SvelteComponent{constructor(options){super(),init(this,options,instance$A,create_fragment$G,safe_not_equal,{xOffset:0,location:1})}}function create_if_block$a(ctx){let switch_instance,switch_instance_anchor,current;var switch_value=ctx[2][ctx[1].code];function switch_props(ctx){return{props:{location:ctx[0]?"top-left":"top",xOffset:ctx[0]?"var(--main-notification-offset)":void 0}}}return switch_value&&(switch_instance=new switch_value(switch_props(ctx))),{c(){switch_instance&&create_component(switch_instance.$$.fragment),switch_instance_anchor=empty()},m(target,anchor){switch_instance&&mount_component(switch_instance,target,anchor),insert(target,switch_instance_anchor,anchor),current=!0},p(ctx,dirty){const switch_instance_changes={};if(1&dirty&&(switch_instance_changes.location=ctx[0]?"top-left":"top"),1&dirty&&(switch_instance_changes.xOffset=ctx[0]?"var(--main-notification-offset)":void 0),switch_value!==(switch_value=ctx[2][ctx[1].code])){if(switch_instance){group_outros();const old_component=switch_instance;transition_out(old_component.$$.fragment,1,0,(()=>{destroy_component(old_component,1)})),check_outros()}switch_value?(switch_instance=new switch_value(switch_props(ctx)),create_component(switch_instance.$$.fragment),transition_in(switch_instance.$$.fragment,1),mount_component(switch_instance,switch_instance_anchor.parentNode,switch_instance_anchor)):switch_instance=null}else switch_value&&switch_instance.$set(switch_instance_changes)},i(local){current||(switch_instance&&transition_in(switch_instance.$$.fragment,local),current=!0)},o(local){switch_instance&&transition_out(switch_instance.$$.fragment,local),current=!1},d(detaching){detaching&&detach(switch_instance_anchor),switch_instance&&destroy_component(switch_instance,detaching)}}}function create_key_block$1(ctx){let if_block_anchor,current,if_block=ctx[1].id&&create_if_block$a(ctx);return{c(){if_block&&if_block.c(),if_block_anchor=empty()},m(target,anchor){if_block&&if_block.m(target,anchor),insert(target,if_block_anchor,anchor),current=!0},p(ctx,dirty){ctx[1].id?if_block?(if_block.p(ctx,dirty),2&dirty&&transition_in(if_block,1)):(if_block=create_if_block$a(ctx),if_block.c(),transition_in(if_block,1),if_block.m(if_block_anchor.parentNode,if_block_anchor)):if_block&&(group_outros(),transition_out(if_block,1,1,(()=>{if_block=null})),check_outros())},i(local){current||(transition_in(if_block),current=!0)},o(local){transition_out(if_block),current=!1},d(detaching){if_block&&if_block.d(detaching),detaching&&detach(if_block_anchor)}}}function create_fragment$H(ctx){let key_block_anchor,current,previous_key=ctx[1].id,key_block=create_key_block$1(ctx);return{c(){key_block.c(),key_block_anchor=empty()},m(target,anchor){key_block.m(target,anchor),insert(target,key_block_anchor,anchor),current=!0},p(ctx,[dirty]){2&dirty&&safe_not_equal(previous_key,previous_key=ctx[1].id)?(group_outros(),transition_out(key_block,1,1,noop),check_outros(),key_block=create_key_block$1(ctx),key_block.c(),transition_in(key_block),key_block.m(key_block_anchor.parentNode,key_block_anchor)):key_block.p(ctx,dirty)},i(local){current||(transition_in(key_block),current=!0)},o(local){transition_out(key_block),current=!1},d(detaching){detaching&&detach(key_block_anchor),key_block.d(detaching)}}}function instance$B($$self,$$props,$$invalidate){let $notification;component_subscribe($$self,notification,($$value=>$$invalidate(1,$notification=$$value)));let{sidebarOffset:sidebarOffset=!1}=$$props;const messages={SUCCESSFULLY_JOINED_STUDY:SuccessfullyJoinedStudyNotification,SUCCESSFULLY_LEFT_STUDY:SuccessfullyLeftStudyNotification,SUCCESSFULLY_UPDATED_PROFILE:SuccessfullyUpdatedProfileNotification};return $$self.$$set=$$props=>{"sidebarOffset"in $$props&&$$invalidate(0,sidebarOffset=$$props.sidebarOffset)},[sidebarOffset,$notification,messages]}class NotificationCenter extends SvelteComponent{constructor(options){super(),init(this,options,instance$B,create_fragment$H,safe_not_equal,{sidebarOffset:0})}}function create_if_block$b(ctx){let layout,current;return layout=new OnboardingLayout({props:{$$slots:{default:[create_default_slot$9]},$$scope:{ctx:ctx}}}),{c(){create_component(layout.$$.fragment)},m(target,anchor){mount_component(layout,target,anchor),current=!0},p(ctx,dirty){const layout_changes={};8&dirty&&(layout_changes.$$scope={dirty:dirty,ctx:ctx}),layout.$set(layout_changes)},i(local){current||(transition_in(layout.$$.fragment,local),current=!0)},o(local){transition_out(layout.$$.fragment,local),current=!1},d(detaching){destroy_component(layout,detaching)}}}function create_default_slot_2$4(ctx){let t;return{c(){t=text("Remove Extension")},m(target,anchor){insert(target,t,anchor)},d(detaching){detaching&&detach(t)}}}function create_default_slot_1$8(ctx){let section,div1,h2,h2_intro,t0,p0,t2,p1,t4,div0,button,div0_intro,div1_intro,current;return button=new Button({props:{product:!0,leave:!0,size:"xl",$$slots:{default:[create_default_slot_2$4]},$$scope:{ctx:ctx}}}),button.$on("click",ctx[2]),{c(){section=element("section"),div1=element("div"),h2=element("h2"),h2.innerHTML='<img src="img/logo-wide.svg" alt="Mozilla Rally Logo"/>',t0=space(),p0=element("p"),p0.textContent="Put your data to work and start building a better internet.",t2=space(),p1=element("p"),p1.textContent="At this time, Mozilla Rally is only available to participants based in the U.S., but we're\n                    hoping to provide access to other countries as soon as we can.",t4=space(),div0=element("div"),create_component(button.$$.fragment),attr(h2,"class","mzp-c-call-out-title mzp-has-zap-1 svelte-rfxmnm"),attr(p0,"class","mzp-c-call-out-desc"),set_style(p0,"color","var(--color-marketing-gray-70)"),set_style(p0,"letter-spacing","-.01em"),set_style(p1,"font-weight","bold"),set_style(p1,"margin","auto"),set_style(p1,"margin-top","60px"),set_style(p1,"margin-bottom","20px"),set_style(p1,"width","660px"),attr(div0,"class","mzp-c-button-download-container"),set_style(div0,"width","239px"),set_style(div0,"display","grid"),set_style(div0,"margin","auto"),attr(div1,"class","mzp-l-content svelte-rfxmnm"),attr(section,"class","mzp-c-call-out svelte-rfxmnm")},m(target,anchor){insert(target,section,anchor),append(section,div1),append(div1,h2),append(div1,t0),append(div1,p0),append(div1,t2),append(div1,p1),append(div1,t4),append(div1,div0),mount_component(button,div0,null),current=!0},p(ctx,dirty){const button_changes={};8&dirty&&(button_changes.$$scope={dirty:dirty,ctx:ctx}),button.$set(button_changes)},i(local){current||(h2_intro||add_render_callback((()=>{h2_intro=create_in_transition(h2,fly,{duration:800,y:5}),h2_intro.start()})),transition_in(button.$$.fragment,local),div0_intro||add_render_callback((()=>{div0_intro=create_in_transition(div0,fly,{duration:800,y:-5}),div0_intro.start()})),div1_intro||add_render_callback((()=>{div1_intro=create_in_transition(div1,fly,{duration:800,y:5}),div1_intro.start()})),current=!0)},o(local){transition_out(button.$$.fragment,local),current=!1},d(detaching){detaching&&detach(section),destroy_component(button)}}}function create_default_slot$9(ctx){let main,current;return main=new OnboardingBody({props:{$$slots:{default:[create_default_slot_1$8]},$$scope:{ctx:ctx}}}),{c(){create_component(main.$$.fragment)},m(target,anchor){mount_component(main,target,anchor),current=!0},p(ctx,dirty){const main_changes={};8&dirty&&(main_changes.$$scope={dirty:dirty,ctx:ctx}),main.$set(main_changes)},i(local){current||(transition_in(main.$$.fragment,local),current=!0)},o(local){transition_out(main.$$.fragment,local),current=!1},d(detaching){destroy_component(main,detaching)}}}function create_fragment$I(ctx){let if_block_anchor,current,if_block=ctx[0]&&create_if_block$b(ctx);return{c(){if_block&&if_block.c(),if_block_anchor=empty()},m(target,anchor){if_block&&if_block.m(target,anchor),insert(target,if_block_anchor,anchor),current=!0},p(ctx,[dirty]){ctx[0]?if_block?(if_block.p(ctx,dirty),1&dirty&&transition_in(if_block,1)):(if_block=create_if_block$b(ctx),if_block.c(),transition_in(if_block,1),if_block.m(if_block_anchor.parentNode,if_block_anchor)):if_block&&(group_outros(),transition_out(if_block,1,1,(()=>{if_block=null})),check_outros())},i(local){current||(transition_in(if_block),current=!0)},o(local){transition_out(if_block),current=!1},d(detaching){if_block&&if_block.d(detaching),detaching&&detach(if_block_anchor)}}}function instance$C($$self,$$props,$$invalidate){const dispatch=createEventDispatcher();let mounted=!1;onMount((()=>{$$invalidate(0,mounted=!0)}));return[mounted,dispatch,()=>dispatch("remove-extension")]}class NonUSUser extends SvelteComponent{constructor(options){super(),init(this,options,instance$C,create_fragment$I,safe_not_equal,{})}}function create_if_block_3$4(ctx){let div,t,t_value=ctx[1].user?.testValue+"";return{c(){div=element("div"),t=text(t_value),set_style(div,"position","absolute"),set_style(div,"right","1rem"),set_style(div,"top","1rem"),set_style(div,"padding","1rem"),set_style(div,"border-radius",".5rem"),set_style(div,"background-color","black"),set_style(div,"color","white"),set_style(div,"font-weight","600")},m(target,anchor){insert(target,div,anchor),append(div,t)},p(ctx,dirty){2&dirty&&t_value!==(t_value=ctx[1].user?.testValue+"")&&set_data(t,t_value)},d(detaching){detaching&&detach(div)}}}function create_else_block_1$2(ctx){let nonussplashpage,current;return nonussplashpage=new NonUSUser({}),nonussplashpage.$on("remove-extension",ctx[7]),{c(){create_component(nonussplashpage.$$.fragment)},m(target,anchor){mount_component(nonussplashpage,target,anchor),current=!0},p:noop,i(local){current||(transition_in(nonussplashpage.$$.fragment,local),current=!0)},o(local){transition_out(nonussplashpage.$$.fragment,local),current=!1},d(detaching){destroy_component(nonussplashpage,detaching)}}}function create_if_block$c(ctx){let if_block_anchor,current,if_block=ctx[2]&&create_if_block_1$5(ctx);return{c(){if_block&&if_block.c(),if_block_anchor=empty()},m(target,anchor){if_block&&if_block.m(target,anchor),insert(target,if_block_anchor,anchor),current=!0},p(ctx,dirty){ctx[2]?if_block?(if_block.p(ctx,dirty),4&dirty&&transition_in(if_block,1)):(if_block=create_if_block_1$5(ctx),if_block.c(),transition_in(if_block,1),if_block.m(if_block_anchor.parentNode,if_block_anchor)):if_block&&(group_outros(),transition_out(if_block,1,1,(()=>{if_block=null})),check_outros())},i(local){current||(transition_in(if_block),current=!0)},o(local){transition_out(if_block),current=!1},d(detaching){if_block&&if_block.d(detaching),detaching&&detach(if_block_anchor)}}}function create_if_block_1$5(ctx){let current_block_type_index,if_block,if_block_anchor,current;const if_block_creators=[create_if_block_2$5,create_else_block$6],if_blocks=[];function select_block_type_1(ctx,dirty){return ctx[0]?0:1}return current_block_type_index=select_block_type_1(ctx),if_block=if_blocks[current_block_type_index]=if_block_creators[current_block_type_index](ctx),{c(){if_block.c(),if_block_anchor=empty()},m(target,anchor){if_blocks[current_block_type_index].m(target,anchor),insert(target,if_block_anchor,anchor),current=!0},p(ctx,dirty){let previous_block_index=current_block_type_index;current_block_type_index=select_block_type_1(ctx),current_block_type_index===previous_block_index?if_blocks[current_block_type_index].p(ctx,dirty):(group_outros(),transition_out(if_blocks[previous_block_index],1,1,(()=>{if_blocks[previous_block_index]=null})),check_outros(),if_block=if_blocks[current_block_type_index],if_block?if_block.p(ctx,dirty):(if_block=if_blocks[current_block_type_index]=if_block_creators[current_block_type_index](ctx),if_block.c()),transition_in(if_block,1),if_block.m(if_block_anchor.parentNode,if_block_anchor))},i(local){current||(transition_in(if_block),current=!0)},o(local){transition_out(if_block),current=!1},d(detaching){if_blocks[current_block_type_index].d(detaching),detaching&&detach(if_block_anchor)}}}function create_else_block$6(ctx){let main,t,notificationcenter,current;return main=new Main({}),main.$on("leave-rally",ctx[6]),notificationcenter=new NotificationCenter({props:{sidebarOffset:!0}}),{c(){create_component(main.$$.fragment),t=space(),create_component(notificationcenter.$$.fragment)},m(target,anchor){mount_component(main,target,anchor),insert(target,t,anchor),mount_component(notificationcenter,target,anchor),current=!0},p:noop,i(local){current||(transition_in(main.$$.fragment,local),transition_in(notificationcenter.$$.fragment,local),current=!0)},o(local){transition_out(main.$$.fragment,local),transition_out(notificationcenter.$$.fragment,local),current=!1},d(detaching){destroy_component(main,detaching),detaching&&detach(t),destroy_component(notificationcenter,detaching)}}}function create_if_block_2$5(ctx){let onboarding,current;return onboarding=new Onboarding({props:{firstRunCompleted:ctx[1].firstRunCompleted}}),onboarding.$on("first-run-initiated",ctx[4]),onboarding.$on("onboarding-complete",ctx[5]),{c(){create_component(onboarding.$$.fragment)},m(target,anchor){mount_component(onboarding,target,anchor),current=!0},p(ctx,dirty){const onboarding_changes={};2&dirty&&(onboarding_changes.firstRunCompleted=ctx[1].firstRunCompleted),onboarding.$set(onboarding_changes)},i(local){current||(transition_in(onboarding.$$.fragment,local),current=!0)},o(local){transition_out(onboarding.$$.fragment,local),current=!1},d(detaching){destroy_component(onboarding,detaching)}}}function create_fragment$J(ctx){let t,current_block_type_index,if_block1,if_block1_anchor,current,if_block0=ctx[1].user?.testValue&&create_if_block_3$4(ctx);const if_block_creators=[create_if_block$c,create_else_block_1$2],if_blocks=[];return current_block_type_index=function(ctx,dirty){return ctx[3]?0:1}(ctx),if_block1=if_blocks[current_block_type_index]=if_block_creators[current_block_type_index](ctx),{c(){if_block0&&if_block0.c(),t=space(),if_block1.c(),if_block1_anchor=empty()},m(target,anchor){if_block0&&if_block0.m(target,anchor),insert(target,t,anchor),if_blocks[current_block_type_index].m(target,anchor),insert(target,if_block1_anchor,anchor),current=!0},p(ctx,[dirty]){ctx[1].user?.testValue?if_block0?if_block0.p(ctx,dirty):(if_block0=create_if_block_3$4(ctx),if_block0.c(),if_block0.m(t.parentNode,t)):if_block0&&(if_block0.d(1),if_block0=null),if_block1.p(ctx,dirty)},i(local){current||(transition_in(if_block1),current=!0)},o(local){transition_out(if_block1),current=!1},d(detaching){if_block0&&if_block0.d(detaching),detaching&&detach(t),if_blocks[current_block_type_index].d(detaching),detaching&&detach(if_block1_anchor)}}}function instance$D($$self,$$props,$$invalidate){let showStore,$store,firstRun;component_subscribe($$self,store,($$value=>$$invalidate(1,$store=$$value))),setContext("rally:store",store),setContext("rally:notification",notification);let isRallySupported="en-US"===navigator.language;return $$self.$$.update=()=>{2&$$self.$$.dirty&&$$invalidate(2,showStore=!0===$store._initialized),3&$$self.$$.dirty&&$store._initialized&&void 0===firstRun&&$$invalidate(0,firstRun=!$store.user?.enrolled)},[firstRun,$store,showStore,isRallySupported,()=>{store.setFirstRunCompletion(!0)},()=>{$$invalidate(0,firstRun=!1)},()=>{store.updatePlatformEnrollment(!1),$$invalidate(0,firstRun=!0)},()=>{store.updatePlatformEnrollment(!1)}]}return new class extends SvelteComponent{constructor(options){super(),init(this,options,instance$D,create_fragment$J,safe_not_equal,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
